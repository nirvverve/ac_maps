(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[566],{6:function(e,t,s){Promise.resolve().then(s.bind(s,9590))},9590:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return v}});var r=s(7437),a=s(9376),n=s(2265),i=s(7648),l=s(3145),d=s(2869),o=s(5186),c=s(6815),u=s(6070),f=s(5613),m=s(9205);let x=(0,m.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),h=(0,m.Z)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var p=s(2934),g=s(1817);function v(){let e=(0,a.useRouter)(),[t,s]=(0,n.useState)("email"),[m,v]=(0,n.useState)(""),[y,j]=(0,n.useState)(""),[b,N]=(0,n.useState)(""),[w,C]=(0,n.useState)(""),[S,k]=(0,n.useState)(""),[A,P]=(0,n.useState)(!1),[R,Z]=(0,n.useState)(!1),F=async e=>{e.preventDefault(),k(""),Z(!0);try{let e=await fetch("/api/auth/send-verification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:m.toLowerCase()})}),t=await e.json();e.ok?s("verify"):k(t.error||"Failed to send verification code")}catch(e){k("An unexpected error occurred")}finally{Z(!1)}},T=async e=>{e.preventDefault(),k(""),Z(!0);try{let e=await fetch("/api/auth/verify-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:m.toLowerCase(),code:y})}),t=await e.json();e.ok?s("password"):k(t.error||"Invalid verification code")}catch(e){k("An unexpected error occurred")}finally{Z(!1)}},_=async t=>{if(t.preventDefault(),k(""),P(!1),b!==w){k("Passwords do not match");return}let s=/[A-Z]/.test(b),r=/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(b);if(!(b.length>=9)){k("Password must be at least 9 characters long");return}if(!s){k("Password must contain at least 1 uppercase letter");return}if(!r){k("Password must contain at least 1 special character");return}Z(!0);try{let t=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:m.toLowerCase(),password:b})}),s=await t.json();t.ok?(P(!0),setTimeout(()=>{e.push("/login")},2e3)):k(s.error||"Registration failed")}catch(e){k("An unexpected error occurred")}finally{Z(!1)}},z=async()=>{k(""),Z(!0);try{let e=await fetch("/api/auth/send-verification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:m.toLowerCase()})}),t=await e.json();e.ok?(k(""),k("New verification code sent!"),setTimeout(()=>k(""),3e3)):k(t.error||"Failed to resend verification code")}catch(e){k("An unexpected error occurred")}finally{Z(!1)}},O={length:b.length>=9,uppercase:/[A-Z]/.test(b),special:/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(b)};return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#27add6]/10 via-white to-[#1e759d]/10 p-4",children:(0,r.jsxs)(u.Zb,{className:"w-full max-w-md shadow-xl border-[#27add6]/20",children:[(0,r.jsxs)(u.Ol,{className:"space-y-4 pb-2",children:[(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(l.default,{src:"/aps-logo-horizontal.png",alt:"Amenity Pool Services",width:220,height:60,priority:!0})}),(0,r.jsxs)("div",{className:"flex items-center justify-center",children:["email"===t&&(0,r.jsx)(x,{className:"h-8 w-8 text-[#1e759d]"}),"verify"===t&&(0,r.jsx)(h,{className:"h-8 w-8 text-[#1e759d]"}),"password"===t&&(0,r.jsx)(p.Z,{className:"h-8 w-8 text-[#53bc53]"})]}),(0,r.jsxs)(u.ll,{className:"text-2xl font-bold text-center text-[#1e759d]",children:["email"===t&&"Register","verify"===t&&"Verify Email","password"===t&&"Set Password"]}),(0,r.jsxs)(u.SZ,{className:"text-center text-base text-slate-600",children:["email"===t&&"Enter your email to get started","verify"===t&&"Enter the 6-digit code sent to your email","password"===t&&"Create a secure password for your account"]})]}),"email"===t&&(0,r.jsxs)("form",{onSubmit:F,children:[(0,r.jsxs)(u.aY,{className:"space-y-4",children:[S&&(0,r.jsx)(f.bZ,{variant:"destructive",children:(0,r.jsx)(f.X,{children:S})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c._,{htmlFor:"email",children:"Email Address"}),(0,r.jsx)(o.I,{id:"email",type:"email",placeholder:"your.email@amenitypool.com",value:m,onChange:e=>v(e.target.value),required:!0,disabled:R,autoFocus:!0}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"We'll send a verification code to this email"})]})]}),(0,r.jsxs)(u.eW,{className:"flex flex-col space-y-4",children:[(0,r.jsx)(d.z,{type:"submit",className:"w-full bg-[#1e759d] hover:bg-[#1e759d]/90",disabled:R,children:R?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending Code..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x,{className:"mr-2 h-4 w-4"}),"Send Verification Code"]})}),(0,r.jsxs)("p",{className:"text-sm text-center text-muted-foreground",children:["Already registered?"," ",(0,r.jsx)(i.default,{href:"/login",className:"text-[#1e759d] hover:underline font-medium",children:"Sign in"})]})]})]}),"verify"===t&&(0,r.jsxs)("form",{onSubmit:T,children:[(0,r.jsxs)(u.aY,{className:"space-y-4",children:[S&&(0,r.jsx)(f.bZ,{variant:S.includes("sent!")?"default":"destructive",children:(0,r.jsx)(f.X,{children:S})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c._,{htmlFor:"code",children:"Verification Code"}),(0,r.jsx)(o.I,{id:"code",type:"text",placeholder:"000000",value:y,onChange:e=>j(e.target.value.replace(/\D/g,"").slice(0,6)),required:!0,disabled:R,autoFocus:!0,maxLength:6,className:"text-center text-2xl tracking-widest font-mono"}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Code sent to ",(0,r.jsx)("strong",{children:m})]})]})]}),(0,r.jsxs)(u.eW,{className:"flex flex-col space-y-3",children:[(0,r.jsx)(d.z,{type:"submit",className:"w-full bg-[#1e759d] hover:bg-[#1e759d]/90",disabled:R||6!==y.length,children:R?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Verifying..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h,{className:"mr-2 h-4 w-4"}),"Verify Code"]})}),(0,r.jsx)(d.z,{type:"button",variant:"ghost",className:"w-full",onClick:z,disabled:R,children:"Resend Code"}),(0,r.jsx)(d.z,{type:"button",variant:"link",className:"w-full text-sm",onClick:()=>{s("email"),k(""),j("")},children:"Change Email"})]})]}),"password"===t&&(0,r.jsxs)("form",{onSubmit:_,children:[(0,r.jsxs)(u.aY,{className:"space-y-4",children:[S&&(0,r.jsx)(f.bZ,{variant:"destructive",children:(0,r.jsx)(f.X,{children:S})}),A&&(0,r.jsxs)(f.bZ,{className:"bg-green-50 text-green-900 border-green-200",children:[(0,r.jsx)(p.Z,{className:"h-4 w-4"}),(0,r.jsx)(f.X,{children:"Registration successful! Redirecting to login..."})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c._,{htmlFor:"password",children:"Password"}),(0,r.jsx)(o.I,{id:"password",type:"password",placeholder:"•••••••••",value:b,onChange:e=>N(e.target.value),required:!0,disabled:R||A,autoFocus:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c._,{htmlFor:"confirmPassword",children:"Confirm Password"}),(0,r.jsx)(o.I,{id:"confirmPassword",type:"password",placeholder:"•••••••••",value:w,onChange:e=>C(e.target.value),required:!0,disabled:R||A})]}),b&&(0,r.jsxs)("div",{className:"space-y-2 p-3 bg-muted rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm font-medium mb-2",children:"Password Requirements:"}),(0,r.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:`h-2 w-2 rounded-full ${O.length?"bg-green-500":"bg-gray-300"}`}),(0,r.jsx)("span",{className:O.length?"text-green-700":"text-muted-foreground",children:"At least 9 characters"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:`h-2 w-2 rounded-full ${O.uppercase?"bg-green-500":"bg-gray-300"}`}),(0,r.jsx)("span",{className:O.uppercase?"text-green-700":"text-muted-foreground",children:"At least 1 uppercase letter"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:`h-2 w-2 rounded-full ${O.special?"bg-green-500":"bg-gray-300"}`}),(0,r.jsx)("span",{className:O.special?"text-green-700":"text-muted-foreground",children:"At least 1 special character"})]})]})]})]}),(0,r.jsx)(u.eW,{className:"flex flex-col space-y-4",children:(0,r.jsx)(d.z,{type:"submit",className:"w-full bg-[#1e759d] hover:bg-[#1e759d]/90",disabled:R||A,children:R?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating Account..."]}):A?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.Z,{className:"mr-2 h-4 w-4"}),"Account Created!"]}):"Complete Registration"})})]})]})})}},5613:function(e,t,s){"use strict";s.d(t,{X:function(){return o},bZ:function(){return d}});var r=s(7437),a=s(2265),n=s(7712),i=s(4508);let l=(0,n.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=a.forwardRef(({className:e,variant:t,...s},a)=>(0,r.jsx)("div",{ref:a,role:"alert",className:(0,i.cn)(l({variant:t}),e),...s}));d.displayName="Alert",a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("h5",{ref:s,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",e),...t})).displayName="AlertTitle";let o=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",e),...t}));o.displayName="AlertDescription"},2869:function(e,t,s){"use strict";s.d(t,{z:function(){return o}});var r=s(7437),a=s(2265),n=s(7495),i=s(7712),l=s(4508);let d=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef(({className:e,variant:t,size:s,asChild:a=!1,...i},o)=>{let c=a?n.g7:"button";return(0,r.jsx)(c,{className:(0,l.cn)(d({variant:t,size:s,className:e})),ref:o,...i})});o.displayName="Button"},6070:function(e,t,s){"use strict";s.d(t,{Ol:function(){return l},SZ:function(){return o},Zb:function(){return i},aY:function(){return c},eW:function(){return u},ll:function(){return d}});var r=s(7437),a=s(2265),n=s(4508);let i=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));i.displayName="Card";let l=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let d=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));d.displayName="CardTitle";let o=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));o.displayName="CardDescription";let c=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent";let u=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t}));u.displayName="CardFooter"},5186:function(e,t,s){"use strict";s.d(t,{I:function(){return i}});var r=s(7437),a=s(2265),n=s(4508);let i=a.forwardRef(({className:e,type:t,...s},a)=>(0,r.jsx)("input",{type:t,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));i.displayName="Input"},6815:function(e,t,s){"use strict";s.d(t,{_:function(){return o}});var r=s(7437),a=s(2265),n=s(6394),i=s(7712),l=s(4508);let d=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(n.f,{ref:s,className:(0,l.cn)(d(),e),...t}));o.displayName=n.f.displayName},4508:function(e,t,s){"use strict";s.d(t,{G:function(){return i},cn:function(){return n}});var r=s(1994),a=s(3335);function n(...e){return(0,a.m6)((0,r.W)(e))}function i(e){return({West:"APS of Glendale",Central:"APS of Scottsdale",East:"APS of Chandler",Tucson:"APS of Tucson",Commercial:"APS - Commercial",Mesa:"APS of Mesa",Goodyear:"APS of Goodyear","Cave Creek":"APS of Cave Creek"})[e]||e}},2934:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},9376:function(e,t,s){"use strict";var r=s(5475);s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})}},function(e){e.O(0,[960,145,971,117,744],function(){return e(e.s=6)}),_N_E=e.O()}]);