(()=>{var e={};e.id=931,e.ids=[931],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},927:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>h,originalPathname:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>c}),s(90908),s(37462),s(35866);var r=s(23191),a=s(88716),n=s(37922),l=s.n(n),i=s(95231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,90908)),"/data/projects/ac_maps/phoenix_territory_map/nextjs_space/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,37462)),"/data/projects/ac_maps/phoenix_territory_map/nextjs_space/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],d=["/data/projects/ac_maps/phoenix_territory_map/nextjs_space/app/page.tsx"],m="/page",h={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},57786:(e,t,s)=>{Promise.resolve().then(s.bind(s,78143)),Promise.resolve().then(s.bind(s,15813))},36663:(e,t,s)=>{Promise.resolve().then(s.bind(s,3667))},74820:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,12994,23)),Promise.resolve().then(s.t.bind(s,96114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,79671,23)),Promise.resolve().then(s.t.bind(s,41868,23)),Promise.resolve().then(s.t.bind(s,84759,23))},3667:(e,t,s)=>{"use strict";let r;s.r(t),s.d(t,{default:()=>nN});var a,n,l,i,o,c,d,m=s(10326),h=s(17577),u=s(77109),p=s(90434),x=s(46226),g=s(33071),f=s(90772),j=s(567),v=s(62881);let b=(0,v.Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),y=(0,v.Z)("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]),N=(0,v.Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),C=(0,v.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),w=(0,v.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),k=(0,v.Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),S=(0,v.Z)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),L=(0,v.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),P=(0,v.Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),M=(0,v.Z)("Route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]),E=(0,v.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),T=(0,v.Z)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),O=(0,v.Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var z=s(60962);function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t,s){var r;return(r=function(e,t){if("object"!=A(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!=A(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==A(r)?r:r+"")in e)?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function D(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var I=D(n?a:(n=1,a=function(e,t,s,r,a,n,l,i){if(!e){var o;if(void 0===t)o=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[s,r,a,n,l,i],d=0;(o=Error(t.replace(/%s/g,function(){return c[d++]}))).name="Invariant Violation"}throw o.framesToPop=1,o}})),Z=(0,h.createContext)(null);function F(e){google.maps.event.removeListener(e)}function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.forEach(F)}function $(e){var t,s,r,{updaterMap:a,eventMap:n,prevProps:l,nextProps:i,instance:o}=e,c=(t=function(e,t,s){return"function"==typeof i[s]&&e.push(google.maps.event.addListener(o,t,i[s])),e},s=[],Object.keys(n).reduce(function(e,s){return t(e,n[s],s)},s));return r={},function(e,t){Object.keys(e).forEach(s=>t(e[s],s))}(a,(e,t)=>{var s=i[t];s!==l[t]&&(r[t]=s,e(o,s))}),c}var U={onDblClick:"dblclick",onDragEnd:"dragend",onDragStart:"dragstart",onMapTypeIdChanged:"maptypeid_changed",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseDown:"mousedown",onMouseUp:"mouseup",onRightClick:"rightclick",onTilesLoaded:"tilesloaded",onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onDrag:"drag",onHeadingChanged:"heading_changed",onIdle:"idle",onProjectionChanged:"projection_changed",onResize:"resize",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed"},_={extraMapTypes(e,t){t.forEach(function(t,s){e.mapTypes.set(String(s),t)})},center(e,t){e.setCenter(t)},clickableIcons(e,t){e.setClickableIcons(t)},heading(e,t){e.setHeading(t)},mapTypeId(e,t){e.setMapTypeId(t)},options(e,t){e.setOptions(t)},streetView(e,t){e.setStreetView(t)},tilt(e,t){e.setTilt(t)},zoom(e,t){e.setZoom(t)}};(0,h.memo)(function(e){var{children:t,options:s,id:r,mapContainerStyle:a,mapContainerClassName:n,center:l,onClick:i,onDblClick:o,onDrag:c,onDragEnd:d,onDragStart:u,onMouseMove:p,onMouseOut:x,onMouseOver:g,onMouseDown:f,onMouseUp:j,onRightClick:v,onCenterChanged:b,onLoad:y,onUnmount:N}=e,[C,w]=(0,h.useState)(null),k=(0,h.useRef)(null),[S,L]=(0,h.useState)(null),[P,M]=(0,h.useState)(null),[E,T]=(0,h.useState)(null),[O,z]=(0,h.useState)(null),[A,R]=(0,h.useState)(null),[D,I]=(0,h.useState)(null),[F,B]=(0,h.useState)(null),[$,U]=(0,h.useState)(null),[_,W]=(0,h.useState)(null),[Y,V]=(0,h.useState)(null),[H,G]=(0,h.useState)(null),[J,X]=(0,h.useState)(null);return(0,h.useEffect)(()=>{s&&null!==C&&C.setOptions(s)},[C,s]),(0,h.useEffect)(()=>{null!==C&&void 0!==l&&C.setCenter(l)},[C,l]),(0,h.useEffect)(()=>{C&&o&&(null!==P&&google.maps.event.removeListener(P),M(google.maps.event.addListener(C,"dblclick",o)))},[o]),(0,h.useEffect)(()=>{C&&d&&(null!==E&&google.maps.event.removeListener(E),T(google.maps.event.addListener(C,"dragend",d)))},[d]),(0,h.useEffect)(()=>{C&&u&&(null!==O&&google.maps.event.removeListener(O),z(google.maps.event.addListener(C,"dragstart",u)))},[u]),(0,h.useEffect)(()=>{C&&f&&(null!==A&&google.maps.event.removeListener(A),R(google.maps.event.addListener(C,"mousedown",f)))},[f]),(0,h.useEffect)(()=>{C&&p&&(null!==D&&google.maps.event.removeListener(D),I(google.maps.event.addListener(C,"mousemove",p)))},[p]),(0,h.useEffect)(()=>{C&&x&&(null!==F&&google.maps.event.removeListener(F),B(google.maps.event.addListener(C,"mouseout",x)))},[x]),(0,h.useEffect)(()=>{C&&g&&(null!==$&&google.maps.event.removeListener($),U(google.maps.event.addListener(C,"mouseover",g)))},[g]),(0,h.useEffect)(()=>{C&&j&&(null!==_&&google.maps.event.removeListener(_),W(google.maps.event.addListener(C,"mouseup",j)))},[j]),(0,h.useEffect)(()=>{C&&v&&(null!==Y&&google.maps.event.removeListener(Y),V(google.maps.event.addListener(C,"rightclick",v)))},[v]),(0,h.useEffect)(()=>{C&&i&&(null!==H&&google.maps.event.removeListener(H),G(google.maps.event.addListener(C,"click",i)))},[i]),(0,h.useEffect)(()=>{C&&c&&(null!==J&&google.maps.event.removeListener(J),X(google.maps.event.addListener(C,"drag",c)))},[c]),(0,h.useEffect)(()=>{C&&b&&(null!==S&&google.maps.event.removeListener(S),L(google.maps.event.addListener(C,"center_changed",b)))},[i]),(0,h.useEffect)(()=>{var e=null===k.current?null:new google.maps.Map(k.current,s);return w(e),null!==e&&y&&y(e),()=>{null!==e&&N&&N(e)}},[]),(0,m.jsx)("div",{id:r,ref:k,style:a,className:n,children:(0,m.jsx)(Z.Provider,{value:C,children:null!==C?t:null})})});class W extends h.PureComponent{constructor(){super(...arguments),R(this,"state",{map:null}),R(this,"registeredEvents",[]),R(this,"mapRef",null),R(this,"getInstance",()=>null===this.mapRef?null:new google.maps.Map(this.mapRef,this.props.options)),R(this,"panTo",e=>{var t=this.getInstance();t&&t.panTo(e)}),R(this,"setMapCallback",()=>{null!==this.state.map&&this.props.onLoad&&this.props.onLoad(this.state.map)}),R(this,"getRef",e=>{this.mapRef=e})}componentDidMount(){var e=this.getInstance();this.registeredEvents=$({updaterMap:_,eventMap:U,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{map:e}},this.setMapCallback)}componentDidUpdate(e){null!==this.state.map&&(B(this.registeredEvents),this.registeredEvents=$({updaterMap:_,eventMap:U,prevProps:e,nextProps:this.props,instance:this.state.map}))}componentWillUnmount(){null!==this.state.map&&(this.props.onUnmount&&this.props.onUnmount(this.state.map),B(this.registeredEvents))}render(){return(0,m.jsx)("div",{id:this.props.id,ref:this.getRef,style:this.props.mapContainerStyle,className:this.props.mapContainerClassName,children:(0,m.jsx)(Z.Provider,{value:this.state.map,children:null!==this.state.map?this.props.children:null})})}}function Y(e,t,s,r,a,n,l){try{var i=e[n](l),o=i.value}catch(e){return void s(e)}i.done?t(o):Promise.resolve(o).then(r,a)}function V(e){return function(){var t=this,s=arguments;return new Promise(function(r,a){var n=e.apply(t,s);function l(e){Y(n,r,a,l,i,"next",e)}function i(e){Y(n,r,a,l,i,"throw",e)}l(void 0)})}}function H(e){var{googleMapsApiKey:t,googleMapsClientId:s,version:r="weekly",language:a,region:n,libraries:l,channel:i,mapIds:o,authReferrerPolicy:c,apiUrl:d="https://maps.googleapis.com"}=e,m=[];return I(t&&s||!(t&&s),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),t?m.push("key=".concat(t)):s&&m.push("client=".concat(s)),r&&m.push("v=".concat(r)),a&&m.push("language=".concat(a)),n&&m.push("region=".concat(n)),l&&l.length&&m.push("libraries=".concat(l.sort().join(","))),i&&m.push("channel=".concat(i)),o&&o.length&&m.push("map_ids=".concat(o.join(","))),c&&m.push("auth_referrer_policy=".concat(c)),m.push("loading=async"),m.push("callback=initMap"),"".concat(d,"/maps/api/js?").concat(m.join("&"))}var G="undefined"!=typeof document;function J(e){var{url:t,id:s,nonce:r}=e;return G?new Promise(function(e,a){var n=document.getElementById(s),l=window;if(n){var i=n.getAttribute("data-state");if(n.src===t&&"error"!==i){if("ready"===i)return e(s);var o=l.initMap,c=n.onerror;return l.initMap=function(){o&&o(),e(s)},void(n.onerror=function(e){c&&c(e),a(e)})}n.remove()}var d=document.createElement("script");d.type="text/javascript",d.src=t,d.id=s,d.async=!0,d.nonce=r||"",d.onerror=function(e){d.setAttribute("data-state","error"),a(e)},l.initMap=function(){d.setAttribute("data-state","ready"),e(s)},document.head.appendChild(d)}).catch(e=>{throw console.error("injectScript error: ",e),e}):Promise.reject(Error("document is undefined"))}function X(e){var t=e.href;return!!t&&(0===t.indexOf("https://fonts.googleapis.com/css?family=Roboto")||0===t.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text"))||("style"===e.tagName.toLowerCase()&&e.styleSheet&&e.styleSheet.cssText&&0===e.styleSheet.cssText.replace("\r\n","").indexOf(".gm-style")?(e.styleSheet.cssText="",!0):"style"===e.tagName.toLowerCase()&&e.innerHTML&&0===e.innerHTML.replace("\r\n","").indexOf(".gm-style")?(e.innerHTML="",!0):"style"===e.tagName.toLowerCase()&&!e.styleSheet&&!e.innerHTML)}function q(){var e=document.getElementsByTagName("head")[0];if(e){var t=e.insertBefore.bind(e);e.insertBefore=function(s,r){return X(s)||Reflect.apply(t,e,[s,r]),s};var s=e.appendChild.bind(e);e.appendChild=function(t){return X(t)||Reflect.apply(s,e,[t]),t}}}var K=!1;function Q(){return(0,m.jsx)("div",{children:"Loading..."})}var ee={id:"script-loader",version:"weekly"};class et extends h.PureComponent{constructor(){super(...arguments),R(this,"check",null),R(this,"state",{loaded:!1}),R(this,"cleanupCallback",()=>{delete window.google.maps,this.injectScript()}),R(this,"isCleaningUp",V(function*(){return new Promise(function(e){if(K){if(G)var t=window.setInterval(function(){K||(window.clearInterval(t),e())},1)}else e()})})),R(this,"cleanup",()=>{K=!0;var e=document.getElementById(this.props.id);e&&e.parentNode&&e.parentNode.removeChild(e),Array.prototype.slice.call(document.getElementsByTagName("script")).filter(function(e){return"string"==typeof e.src&&e.src.includes("maps.googleapis")}).forEach(function(e){e.parentNode&&e.parentNode.removeChild(e)}),Array.prototype.slice.call(document.getElementsByTagName("link")).filter(function(e){return"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"===e.href}).forEach(function(e){e.parentNode&&e.parentNode.removeChild(e)}),Array.prototype.slice.call(document.getElementsByTagName("style")).filter(function(e){return void 0!==e.innerText&&e.innerText.length>0&&e.innerText.includes(".gm-")}).forEach(function(e){e.parentNode&&e.parentNode.removeChild(e)})}),R(this,"injectScript",()=>{this.props.preventGoogleFontsLoading&&q(),I(!!this.props.id,'LoadScript requires "id" prop to be a string: %s',this.props.id),J({id:this.props.id,nonce:this.props.nonce,url:H(this.props)}).then(()=>{this.props.onLoad&&this.props.onLoad(),this.setState(function(){return{loaded:!0}})}).catch(e=>{this.props.onError&&this.props.onError(e),console.error("\n          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (".concat(this.props.googleMapsApiKey||"-",") or Client ID (").concat(this.props.googleMapsClientId||"-",") to <LoadScript />\n          Otherwise it is a Network issue.\n        "))})}),R(this,"getRef",e=>{this.check=e})}componentDidMount(){if(G){if(window.google&&window.google.maps&&!K){console.error("google api is already presented");return}this.isCleaningUp().then(this.injectScript).catch(function(e){console.error("Error at injecting script after cleaning up: ",e)})}}componentDidUpdate(e){this.props.libraries!==e.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),G&&e.language!==this.props.language&&(this.cleanup(),this.setState(function(){return{loaded:!1}},this.cleanupCallback))}componentWillUnmount(){G&&(this.cleanup(),window.setTimeout(()=>{this.check||(delete window.google,K=!1)},1),this.props.onUnmount&&this.props.onUnmount())}render(){return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{ref:this.getRef}),this.state.loaded?this.props.children:this.props.loadingElement||(0,m.jsx)(Q,{})]})}}function es(e,t){if(null==e)return{};var s,r,a=function(e,t){if(null==e)return{};var s={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(t.includes(r))continue;s[r]=e[r]}return s}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)s=n[r],t.includes(s)||({}).propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function er(e){var{id:t=ee.id,version:s=ee.version,nonce:r,googleMapsApiKey:a,googleMapsClientId:n,language:i,region:o,libraries:c,preventGoogleFontsLoading:d,channel:m,mapIds:u,authReferrerPolicy:p,apiUrl:x="https://maps.googleapis.com"}=e,g=(0,h.useRef)(!1),[f,j]=(0,h.useState)(!1),[v,b]=(0,h.useState)(void 0);(0,h.useEffect)(function(){return g.current=!0,()=>{g.current=!1}},[]),(0,h.useEffect)(function(){G&&d&&q()},[d]),(0,h.useEffect)(function(){f&&I(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")},[f]);var y=H({version:s,googleMapsApiKey:a,googleMapsClientId:n,language:i,region:o,libraries:c,channel:m,mapIds:u,authReferrerPolicy:p,apiUrl:x});(0,h.useEffect)(function(){if(G){if(window.google&&window.google.maps&&l===y){e();return}J({id:t,url:y,nonce:r}).then(e).catch(function(e){g.current&&b(e),console.warn("\n        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (".concat(a||"-",") or Client ID (").concat(n||"-",")\n        Otherwise it is a Network issue.\n      ")),console.error(e)})}function e(){g.current&&(j(!0),l=y)}},[t,y,r]);var N=(0,h.useRef)(void 0);return(0,h.useEffect)(function(){N.current&&c!==N.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),N.current=c},[c]),{isLoaded:f,loadError:v,url:y}}R(et,"defaultProps",ee);var ea=["loadingElement","onLoad","onError","onUnmount","children"],en=(0,m.jsx)(Q,{});(0,h.memo)(function(e){var{loadingElement:t,onLoad:s,onError:r,onUnmount:a,children:n}=e,{isLoaded:l,loadError:i}=er(es(e,ea));return(0,h.useEffect)(function(){l&&"function"==typeof s&&s()},[l,s]),(0,h.useEffect)(function(){i&&"function"==typeof r&&r(i)},[i,r]),(0,h.useEffect)(function(){return()=>{a&&a()}},[a]),l?n:t||en}),"function"==typeof SuppressedError&&SuppressedError;var el="__googleMapsScriptId";!function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"}(i||(i={}));class ei{constructor(e){var{apiKey:t,authReferrerPolicy:s,channel:r,client:a,id:n=el,language:l,libraries:i=[],mapIds:o,nonce:c,region:d,retries:m=3,url:h="https://maps.googleapis.com/maps/api/js",version:u}=e;if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=s,this.channel=r,this.client=a,this.id=n||el,this.language=l,this.libraries=i,this.mapIds=o,this.nonce=c,this.region=d,this.retries=m,this.url=h,this.version=u,ei.instance){if(!(null)(this.options,ei.instance.options))throw Error("Loader must not be called again with different options. ".concat(JSON.stringify(this.options)," !== ").concat(JSON.stringify(ei.instance.options)));return ei.instance}ei.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?i.FAILURE:this.done?i.SUCCESS:this.loading?i.LOADING:i.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){var e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+="&key=".concat(this.apiKey)),this.channel&&(e+="&channel=".concat(this.channel)),this.client&&(e+="&client=".concat(this.client)),this.libraries.length>0&&(e+="&libraries=".concat(this.libraries.join(","))),this.language&&(e+="&language=".concat(this.language)),this.region&&(e+="&region=".concat(this.region)),this.version&&(e+="&v=".concat(this.version)),this.mapIds&&(e+="&map_ids=".concat(this.mapIds.join(","))),this.authReferrerPolicy&&(e+="&auth_referrer_policy=".concat(this.authReferrerPolicy)),e}deleteScript(){var e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,t)=>{this.loadCallback(s=>{s?t(s.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){if(document.getElementById(this.id)){this.callback();return}var e,t,s={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(s).forEach(e=>!s[e]&&delete s[e]),(null===(t=null===(e=null==window?void 0:window.google)||void 0===e?void 0:e.maps)||void 0===t?void 0:t.importLibrary)||(e=>{var t,s,r,a="The Google Maps JavaScript API",n="google",l="importLibrary",i="__ib__",o=document,c=window,d=(c=c[n]||(c[n]={})).maps||(c.maps={}),m=new Set,h=new URLSearchParams,u=()=>t||(t=new Promise((l,c)=>{var u,p,x;return u=this,p=void 0,x=function*(){var u;for(r in yield s=o.createElement("script"),s.id=this.id,h.set("libraries",[...m]+""),e)h.set(r.replace(/[A-Z]/g,e=>"_"+e[0].toLowerCase()),e[r]);h.set("callback",n+".maps."+i),s.src=this.url+"?"+h,d[i]=l,s.onerror=()=>t=c(Error(a+" could not load.")),s.nonce=this.nonce||(null===(u=o.querySelector("script[nonce]"))||void 0===u?void 0:u.nonce)||"",o.head.append(s)},new(p||(p=Promise))(function(e,t){function s(e){try{a(x.next(e))}catch(e){t(e)}}function r(e){try{a(x.throw(e))}catch(e){t(e)}}function a(t){var a;t.done?e(t.value):((a=t.value)instanceof p?a:new p(function(e){e(a)})).then(s,r)}a((x=x.apply(u,[])).next())})}));d[l]?console.warn(a+" only loads once. Ignoring:",e):d[l]=function(e){for(var t=arguments.length,s=Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];return m.add(e)&&u().then(()=>d[l](e,...s))}})(s);var r=this.libraries.map(e=>this.importLibrary(e));r.length||r.push(this.importLibrary("core")),Promise.all(r).then(()=>this.callback(),e=>{var t=new ErrorEvent("error",{error:e});this.loadErrorCallback(t)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){var t=this.errors.length*Math.pow(2,this.errors.length);console.error("Failed to load Google Maps script, retrying in ".concat(t," ms.")),setTimeout(()=>{this.deleteScript(),this.setScript()},t)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading){if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}}}function eo(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function ec(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?eo(Object(s),!0).forEach(function(t){R(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):eo(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var ed={},em={options(e,t){e.setOptions(t)}};(0,h.memo)(function(e){var{options:t,onLoad:s,onUnmount:r}=e,a=(0,h.useContext)(Z),[n,l]=(0,h.useState)(null);return(0,h.useEffect)(()=>{null!==n&&n.setMap(a)},[a]),(0,h.useEffect)(()=>{t&&null!==n&&n.setOptions(t)},[n,t]),(0,h.useEffect)(()=>{var e=new google.maps.TrafficLayer(ec(ec({},t),{},{map:a}));return l(e),s&&s(e),()=>{null!==n&&(r&&r(n),n.setMap(null))}},[]),null});class eh extends h.PureComponent{constructor(){super(...arguments),R(this,"state",{trafficLayer:null}),R(this,"setTrafficLayerCallback",()=>{null!==this.state.trafficLayer&&this.props.onLoad&&this.props.onLoad(this.state.trafficLayer)}),R(this,"registeredEvents",[])}componentDidMount(){var e=new google.maps.TrafficLayer(ec(ec({},this.props.options),{},{map:this.context}));this.registeredEvents=$({updaterMap:em,eventMap:ed,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{trafficLayer:e}},this.setTrafficLayerCallback)}componentDidUpdate(e){null!==this.state.trafficLayer&&(B(this.registeredEvents),this.registeredEvents=$({updaterMap:em,eventMap:ed,prevProps:e,nextProps:this.props,instance:this.state.trafficLayer}))}componentWillUnmount(){null!==this.state.trafficLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),B(this.registeredEvents),this.state.trafficLayer.setMap(null))}render(){return null}}R(eh,"contextType",Z),(0,h.memo)(function(e){var{onLoad:t,onUnmount:s}=e,r=(0,h.useContext)(Z),[a,n]=(0,h.useState)(null);return(0,h.useEffect)(()=>{null!==a&&a.setMap(r)},[r]),(0,h.useEffect)(()=>{var e=new google.maps.BicyclingLayer;return n(e),e.setMap(r),t&&t(e),()=>{null!==e&&(s&&s(e),e.setMap(null))}},[]),null});class eu extends h.PureComponent{constructor(){super(...arguments),R(this,"state",{bicyclingLayer:null}),R(this,"setBicyclingLayerCallback",()=>{null!==this.state.bicyclingLayer&&(this.state.bicyclingLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.bicyclingLayer))})}componentDidMount(){var e=new google.maps.BicyclingLayer;this.setState(()=>({bicyclingLayer:e}),this.setBicyclingLayerCallback)}componentWillUnmount(){null!==this.state.bicyclingLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))}render(){return null}}R(eu,"contextType",Z),(0,h.memo)(function(e){var{onLoad:t,onUnmount:s}=e,r=(0,h.useContext)(Z),[a,n]=(0,h.useState)(null);return(0,h.useEffect)(()=>{null!==a&&a.setMap(r)},[r]),(0,h.useEffect)(()=>{var e=new google.maps.TransitLayer;return n(e),e.setMap(r),t&&t(e),()=>{null!==a&&(s&&s(a),a.setMap(null))}},[]),null});class ep extends h.PureComponent{constructor(){super(...arguments),R(this,"state",{transitLayer:null}),R(this,"setTransitLayerCallback",()=>{null!==this.state.transitLayer&&(this.state.transitLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.transitLayer))})}componentDidMount(){var e=new google.maps.TransitLayer;this.setState(function(){return{transitLayer:e}},this.setTransitLayerCallback)}componentWillUnmount(){null!==this.state.transitLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))}render(){return null}}function ex(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function eg(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ex(Object(s),!0).forEach(function(t){R(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ex(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}R(ep,"contextType",Z);var ef={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},ej={drawingMode(e,t){e.setDrawingMode(t)},options(e,t){e.setOptions(t)}};(0,h.memo)(function(e){var{options:t,drawingMode:s,onCircleComplete:r,onMarkerComplete:a,onOverlayComplete:n,onPolygonComplete:l,onPolylineComplete:i,onRectangleComplete:o,onLoad:c,onUnmount:d}=e,m=(0,h.useContext)(Z),[u,p]=(0,h.useState)(null),[x,g]=(0,h.useState)(null),[f,j]=(0,h.useState)(null),[v,b]=(0,h.useState)(null),[y,N]=(0,h.useState)(null),[C,w]=(0,h.useState)(null),[k,S]=(0,h.useState)(null);return(0,h.useEffect)(()=>{null!==u&&u.setMap(m)},[m]),(0,h.useEffect)(()=>{t&&null!==u&&u.setOptions(t)},[u,t]),(0,h.useEffect)(()=>{null!==u&&u.setDrawingMode(null!=s?s:null)},[u,s]),(0,h.useEffect)(()=>{u&&r&&(null!==x&&google.maps.event.removeListener(x),g(google.maps.event.addListener(u,"circlecomplete",r)))},[u,r]),(0,h.useEffect)(()=>{u&&a&&(null!==f&&google.maps.event.removeListener(f),j(google.maps.event.addListener(u,"markercomplete",a)))},[u,a]),(0,h.useEffect)(()=>{u&&n&&(null!==v&&google.maps.event.removeListener(v),b(google.maps.event.addListener(u,"overlaycomplete",n)))},[u,n]),(0,h.useEffect)(()=>{u&&l&&(null!==y&&google.maps.event.removeListener(y),N(google.maps.event.addListener(u,"polygoncomplete",l)))},[u,l]),(0,h.useEffect)(()=>{u&&i&&(null!==C&&google.maps.event.removeListener(C),w(google.maps.event.addListener(u,"polylinecomplete",i)))},[u,i]),(0,h.useEffect)(()=>{u&&o&&(null!==k&&google.maps.event.removeListener(k),S(google.maps.event.addListener(u,"rectanglecomplete",o)))},[u,o]),(0,h.useEffect)(()=>{I(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);var e=new google.maps.drawing.DrawingManager(eg(eg({},t),{},{map:m}));return s&&e.setDrawingMode(s),r&&g(google.maps.event.addListener(e,"circlecomplete",r)),a&&j(google.maps.event.addListener(e,"markercomplete",a)),n&&b(google.maps.event.addListener(e,"overlaycomplete",n)),l&&N(google.maps.event.addListener(e,"polygoncomplete",l)),i&&w(google.maps.event.addListener(e,"polylinecomplete",i)),o&&S(google.maps.event.addListener(e,"rectanglecomplete",o)),p(e),c&&c(e),()=>{null!==u&&(x&&google.maps.event.removeListener(x),f&&google.maps.event.removeListener(f),v&&google.maps.event.removeListener(v),y&&google.maps.event.removeListener(y),C&&google.maps.event.removeListener(C),k&&google.maps.event.removeListener(k),d&&d(u),u.setMap(null))}},[]),null});class ev extends h.PureComponent{constructor(e){super(e),R(this,"registeredEvents",[]),R(this,"state",{drawingManager:null}),R(this,"setDrawingManagerCallback",()=>{null!==this.state.drawingManager&&this.props.onLoad&&this.props.onLoad(this.state.drawingManager)}),I(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing)}componentDidMount(){var e=new google.maps.drawing.DrawingManager(eg(eg({},this.props.options),{},{map:this.context}));this.registeredEvents=$({updaterMap:ej,eventMap:ef,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{drawingManager:e}},this.setDrawingManagerCallback)}componentDidUpdate(e){null!==this.state.drawingManager&&(B(this.registeredEvents),this.registeredEvents=$({updaterMap:ej,eventMap:ef,prevProps:e,nextProps:this.props,instance:this.state.drawingManager}))}componentWillUnmount(){null!==this.state.drawingManager&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),B(this.registeredEvents),this.state.drawingManager.setMap(null))}render(){return null}}function eb(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function ey(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?eb(Object(s),!0).forEach(function(t){R(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):eb(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}R(ev,"contextType",Z);var eN={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},eC={animation(e,t){e.setAnimation(t)},clickable(e,t){e.setClickable(t)},cursor(e,t){e.setCursor(t)},draggable(e,t){e.setDraggable(t)},icon(e,t){e.setIcon(t)},label(e,t){e.setLabel(t)},map(e,t){e.setMap(t)},opacity(e,t){e.setOpacity(t)},options(e,t){e.setOptions(t)},position(e,t){e.setPosition(t)},shape(e,t){e.setShape(t)},title(e,t){e.setTitle(t)},visible(e,t){e.setVisible(t)},zIndex(e,t){e.setZIndex(t)}},ew={},ek=(0,h.memo)(function(e){var{position:t,options:s,clusterer:r,noClustererRedraw:a,children:n,draggable:l,visible:i,animation:o,clickable:c,cursor:d,icon:u,label:p,opacity:x,shape:g,title:f,zIndex:j,onClick:v,onDblClick:b,onDrag:y,onDragEnd:N,onDragStart:C,onMouseOut:w,onMouseOver:k,onMouseUp:S,onMouseDown:L,onRightClick:P,onClickableChanged:M,onCursorChanged:E,onAnimationChanged:T,onDraggableChanged:O,onFlatChanged:z,onIconChanged:A,onPositionChanged:R,onShapeChanged:D,onTitleChanged:I,onVisibleChanged:F,onZindexChanged:B,onLoad:$,onUnmount:U}=e,_=(0,h.useContext)(Z),[W,Y]=(0,h.useState)(null),[V,H]=(0,h.useState)(null),[G,J]=(0,h.useState)(null),[X,q]=(0,h.useState)(null),[K,Q]=(0,h.useState)(null),[ee,et]=(0,h.useState)(null),[es,er]=(0,h.useState)(null),[ea,en]=(0,h.useState)(null),[el,ei]=(0,h.useState)(null),[eo,ec]=(0,h.useState)(null),[ed,em]=(0,h.useState)(null),[eh,eu]=(0,h.useState)(null),[ep,ex]=(0,h.useState)(null),[eg,ef]=(0,h.useState)(null),[ej,ev]=(0,h.useState)(null),[eb,eN]=(0,h.useState)(null),[eC,ek]=(0,h.useState)(null),[eS,eL]=(0,h.useState)(null),[eP,eM]=(0,h.useState)(null),[eE,eT]=(0,h.useState)(null),[eO,ez]=(0,h.useState)(null),[eA,eR]=(0,h.useState)(null);(0,h.useEffect)(()=>{null!==W&&W.setMap(_)},[_]),(0,h.useEffect)(()=>{void 0!==s&&null!==W&&W.setOptions(s)},[W,s]),(0,h.useEffect)(()=>{void 0!==l&&null!==W&&W.setDraggable(l)},[W,l]),(0,h.useEffect)(()=>{t&&null!==W&&W.setPosition(t)},[W,t]),(0,h.useEffect)(()=>{void 0!==i&&null!==W&&W.setVisible(i)},[W,i]),(0,h.useEffect)(()=>{null==W||W.setAnimation(o)},[W,o]),(0,h.useEffect)(()=>{W&&void 0!==c&&W.setClickable(c)},[W,c]),(0,h.useEffect)(()=>{W&&void 0!==d&&W.setCursor(d)},[W,d]),(0,h.useEffect)(()=>{W&&void 0!==u&&W.setIcon(u)},[W,u]),(0,h.useEffect)(()=>{W&&void 0!==p&&W.setLabel(p)},[W,p]),(0,h.useEffect)(()=>{W&&void 0!==x&&W.setOpacity(x)},[W,x]),(0,h.useEffect)(()=>{W&&void 0!==g&&W.setShape(g)},[W,g]),(0,h.useEffect)(()=>{W&&void 0!==f&&W.setTitle(f)},[W,f]),(0,h.useEffect)(()=>{W&&void 0!==j&&W.setZIndex(j)},[W,j]),(0,h.useEffect)(()=>{W&&b&&(null!==V&&google.maps.event.removeListener(V),H(google.maps.event.addListener(W,"dblclick",b)))},[b]),(0,h.useEffect)(()=>{W&&N&&(null!==G&&google.maps.event.removeListener(G),J(google.maps.event.addListener(W,"dragend",N)))},[N]),(0,h.useEffect)(()=>{W&&C&&(null!==X&&google.maps.event.removeListener(X),q(google.maps.event.addListener(W,"dragstart",C)))},[C]),(0,h.useEffect)(()=>{W&&L&&(null!==K&&google.maps.event.removeListener(K),Q(google.maps.event.addListener(W,"mousedown",L)))},[L]),(0,h.useEffect)(()=>{W&&w&&(null!==ee&&google.maps.event.removeListener(ee),et(google.maps.event.addListener(W,"mouseout",w)))},[w]),(0,h.useEffect)(()=>{W&&k&&(null!==es&&google.maps.event.removeListener(es),er(google.maps.event.addListener(W,"mouseover",k)))},[k]),(0,h.useEffect)(()=>{W&&S&&(null!==ea&&google.maps.event.removeListener(ea),en(google.maps.event.addListener(W,"mouseup",S)))},[S]),(0,h.useEffect)(()=>{W&&P&&(null!==el&&google.maps.event.removeListener(el),ei(google.maps.event.addListener(W,"rightclick",P)))},[P]),(0,h.useEffect)(()=>{W&&v&&(null!==eo&&google.maps.event.removeListener(eo),ec(google.maps.event.addListener(W,"click",v)))},[v]),(0,h.useEffect)(()=>{W&&y&&(null!==ed&&google.maps.event.removeListener(ed),em(google.maps.event.addListener(W,"drag",y)))},[y]),(0,h.useEffect)(()=>{W&&M&&(null!==eh&&google.maps.event.removeListener(eh),eu(google.maps.event.addListener(W,"clickable_changed",M)))},[M]),(0,h.useEffect)(()=>{W&&E&&(null!==ep&&google.maps.event.removeListener(ep),ex(google.maps.event.addListener(W,"cursor_changed",E)))},[E]),(0,h.useEffect)(()=>{W&&T&&(null!==eg&&google.maps.event.removeListener(eg),ef(google.maps.event.addListener(W,"animation_changed",T)))},[T]),(0,h.useEffect)(()=>{W&&O&&(null!==ej&&google.maps.event.removeListener(ej),ev(google.maps.event.addListener(W,"draggable_changed",O)))},[O]),(0,h.useEffect)(()=>{W&&z&&(null!==eb&&google.maps.event.removeListener(eb),eN(google.maps.event.addListener(W,"flat_changed",z)))},[z]),(0,h.useEffect)(()=>{W&&A&&(null!==eC&&google.maps.event.removeListener(eC),ek(google.maps.event.addListener(W,"icon_changed",A)))},[A]),(0,h.useEffect)(()=>{W&&R&&(null!==eS&&google.maps.event.removeListener(eS),eL(google.maps.event.addListener(W,"position_changed",R)))},[R]),(0,h.useEffect)(()=>{W&&D&&(null!==eP&&google.maps.event.removeListener(eP),eM(google.maps.event.addListener(W,"shape_changed",D)))},[D]),(0,h.useEffect)(()=>{W&&I&&(null!==eE&&google.maps.event.removeListener(eE),eT(google.maps.event.addListener(W,"title_changed",I)))},[I]),(0,h.useEffect)(()=>{W&&F&&(null!==eO&&google.maps.event.removeListener(eO),ez(google.maps.event.addListener(W,"visible_changed",F)))},[F]),(0,h.useEffect)(()=>{W&&B&&(null!==eA&&google.maps.event.removeListener(eA),eR(google.maps.event.addListener(W,"zindex_changed",B)))},[B]),(0,h.useEffect)(()=>{var e=ey(ey(ey({},s||ew),r?ew:{map:_}),{},{position:t}),n=new google.maps.Marker(e);return r?r.addMarker(n,!!a):n.setMap(_),t&&n.setPosition(t),void 0!==i&&n.setVisible(i),void 0!==l&&n.setDraggable(l),void 0!==c&&n.setClickable(c),"string"==typeof d&&n.setCursor(d),u&&n.setIcon(u),void 0!==p&&n.setLabel(p),void 0!==x&&n.setOpacity(x),g&&n.setShape(g),"string"==typeof f&&n.setTitle(f),"number"==typeof j&&n.setZIndex(j),b&&H(google.maps.event.addListener(n,"dblclick",b)),N&&J(google.maps.event.addListener(n,"dragend",N)),C&&q(google.maps.event.addListener(n,"dragstart",C)),L&&Q(google.maps.event.addListener(n,"mousedown",L)),w&&et(google.maps.event.addListener(n,"mouseout",w)),k&&er(google.maps.event.addListener(n,"mouseover",k)),S&&en(google.maps.event.addListener(n,"mouseup",S)),P&&ei(google.maps.event.addListener(n,"rightclick",P)),v&&ec(google.maps.event.addListener(n,"click",v)),y&&em(google.maps.event.addListener(n,"drag",y)),M&&eu(google.maps.event.addListener(n,"clickable_changed",M)),E&&ex(google.maps.event.addListener(n,"cursor_changed",E)),T&&ef(google.maps.event.addListener(n,"animation_changed",T)),O&&ev(google.maps.event.addListener(n,"draggable_changed",O)),z&&eN(google.maps.event.addListener(n,"flat_changed",z)),A&&ek(google.maps.event.addListener(n,"icon_changed",A)),R&&eL(google.maps.event.addListener(n,"position_changed",R)),D&&eM(google.maps.event.addListener(n,"shape_changed",D)),I&&eT(google.maps.event.addListener(n,"title_changed",I)),F&&ez(google.maps.event.addListener(n,"visible_changed",F)),B&&eR(google.maps.event.addListener(n,"zindex_changed",B)),Y(n),$&&$(n),()=>{null!==V&&google.maps.event.removeListener(V),null!==G&&google.maps.event.removeListener(G),null!==X&&google.maps.event.removeListener(X),null!==K&&google.maps.event.removeListener(K),null!==ee&&google.maps.event.removeListener(ee),null!==es&&google.maps.event.removeListener(es),null!==ea&&google.maps.event.removeListener(ea),null!==el&&google.maps.event.removeListener(el),null!==eo&&google.maps.event.removeListener(eo),null!==eh&&google.maps.event.removeListener(eh),null!==ep&&google.maps.event.removeListener(ep),null!==eg&&google.maps.event.removeListener(eg),null!==ej&&google.maps.event.removeListener(ej),null!==eb&&google.maps.event.removeListener(eb),null!==eC&&google.maps.event.removeListener(eC),null!==eS&&google.maps.event.removeListener(eS),null!==eE&&google.maps.event.removeListener(eE),null!==eO&&google.maps.event.removeListener(eO),null!==eA&&google.maps.event.removeListener(eA),U&&U(n),r?r.removeMarker(n,!!a):n&&n.setMap(null)}},[]);var eD=(0,h.useMemo)(()=>n?h.Children.map(n,e=>(0,h.isValidElement)(e)?(0,h.cloneElement)(e,{anchor:W}):e):null,[n,W]);return(0,m.jsx)(m.Fragment,{children:eD})||null});class eS extends h.PureComponent{constructor(){super(...arguments),R(this,"registeredEvents",[])}componentDidMount(){var e=this;return V(function*(){var t=ey(ey(ey({},e.props.options||ew),e.props.clusterer?ew:{map:e.context}),{},{position:e.props.position});e.marker=new google.maps.Marker(t),e.props.clusterer?e.props.clusterer.addMarker(e.marker,!!e.props.noClustererRedraw):e.marker.setMap(e.context),e.registeredEvents=$({updaterMap:eC,eventMap:eN,prevProps:{},nextProps:e.props,instance:e.marker}),e.props.onLoad&&e.props.onLoad(e.marker)})()}componentDidUpdate(e){this.marker&&(B(this.registeredEvents),this.registeredEvents=$({updaterMap:eC,eventMap:eN,prevProps:e,nextProps:this.props,instance:this.marker}))}componentWillUnmount(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),B(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))}render(){return(this.props.children?h.Children.map(this.props.children,e=>(0,h.isValidElement)(e)?(0,h.cloneElement)(e,{anchor:this.marker}):e):null)||null}}R(eS,"contextType",Z);var eL=function(){function e(t,s){t.getClusterer().extend(e,google.maps.OverlayView),this.cluster=t,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=s,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(t.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return e.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},e.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},e.prototype.onClick=function(e){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var t=this.cluster.getClusterer();if(google.maps.event.trigger(t,"click",this.cluster),google.maps.event.trigger(t,"clusterclick",this.cluster),t.getZoomOnClick()){var s=t.getMaxZoom(),r=this.cluster.getBounds(),a=t.getMap();null!==a&&"fitBounds"in a&&a.fitBounds(r),this.timeOut=window.setTimeout(function(){var e=t.getMap();if(null!==e){"fitBounds"in e&&e.fitBounds(r);var a=e.getZoom()||0;null!==s&&a>s&&e.setZoom(s+1)}},100)}e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}},e.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},e.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},e.prototype.onAdd=function(){this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),null===(e=this.getPanes())||void 0===e||e.overlayMouseTarget.appendChild(this.div);var e,t=this.getMap();null!==t&&(this.boundsChangedListener=google.maps.event.addListener(t,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},e.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),null!==this.boundsChangedListener&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),null!==this.timeOut&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},e.prototype.draw=function(){if(this.visible&&null!==this.div&&this.center){var e=this.getPosFromLatLng(this.center);this.div.style.top=null!==e?"".concat(e.y,"px"):"0",this.div.style.left=null!==e?"".concat(e.x,"px"):"0"}},e.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},e.prototype.show=function(){var e,t,s,r,a,n;if(this.div&&this.center){var l=null===this.sums||void 0===this.sums.title||""===this.sums.title?this.cluster.getClusterer().getTitle():this.sums.title,i=this.backgroundPosition.split(" "),o=parseInt((null===(e=i[0])||void 0===e?void 0:e.replace(/^\s+|\s+$/g,""))||"0",10),c=parseInt((null===(t=i[1])||void 0===t?void 0:t.replace(/^\s+|\s+$/g,""))||"0",10),d=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(null!==d?"".concat(d.y,"px"):"0","; left: ").concat(null!==d?"".concat(d.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var m=document.createElement("img");m.alt=l,m.src=this.url,m.width=this.width,m.height=this.height,m.setAttribute("style","position: absolute; top: ".concat(c,"px; left: ").concat(o,"px")),this.cluster.getClusterer().enableRetinaIcons||(m.style.clip="rect(-".concat(c,"px, -").concat(o+this.width,"px, -").concat(c+this.height,", -").concat(o,")"));var h=document.createElement("div");h.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),(null===(s=this.sums)||void 0===s?void 0:s.text)&&(h.innerText="".concat(null===(r=this.sums)||void 0===r?void 0:r.text)),(null===(a=this.sums)||void 0===a?void 0:a.html)&&(h.innerHTML="".concat(null===(n=this.sums)||void 0===n?void 0:n.html)),this.div.innerHTML="",this.div.appendChild(m),this.div.appendChild(h),this.div.title=l,this.div.style.display=""}this.visible=!0},e.prototype.useStyle=function(e){this.sums=e;var t=this.cluster.getClusterer().getStyles(),s=t[Math.min(t.length-1,Math.max(0,e.index-1))];s&&(this.url=s.url,this.height=s.height,this.width=s.width,s.className&&(this.className="".concat(this.clusterClassName," ").concat(s.className)),this.anchorText=s.anchorText||[0,0],this.anchorIcon=s.anchorIcon||[this.height/2,this.width/2],this.textColor=s.textColor||"black",this.textSize=s.textSize||11,this.textDecoration=s.textDecoration||"none",this.fontWeight=s.fontWeight||"bold",this.fontStyle=s.fontStyle||"normal",this.fontFamily=s.fontFamily||"Arial,sans-serif",this.backgroundPosition=s.backgroundPosition||"0 0")},e.prototype.setCenter=function(e){this.center=e},e.prototype.getPosFromLatLng=function(e){var t=this.getProjection().fromLatLngToDivPixel(e);return null!==t&&(t.x-=this.anchorIcon[1],t.y-=this.anchorIcon[0]),t},e}(),eP=function(){function e(e){this.markerClusterer=e,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new eL(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return e.prototype.getSize=function(){return this.markers.length},e.prototype.getMarkers=function(){return this.markers},e.prototype.getCenter=function(){return this.center},e.prototype.getMap=function(){return this.map},e.prototype.getClusterer=function(){return this.markerClusterer},e.prototype.getBounds=function(){for(var e=new google.maps.LatLngBounds(this.center,this.center),t=this.getMarkers(),s=0;s<t.length;s++){var r=t[s].getPosition();r&&e.extend(r)}return e},e.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},e.prototype.addMarker=function(e){if(this.isMarkerAlreadyAdded(e))return!1;if(this.center){if(this.averageCenter){var t=e.getPosition();if(t){var s=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(s-1)+t.lat())/s,(this.center.lng()*(s-1)+t.lng())/s),this.calculateBounds()}}}else{var r,t=e.getPosition();t&&(this.center=t,this.calculateBounds())}e.isAdded=!0,this.markers.push(e);var a=this.markers.length,n=this.markerClusterer.getMaxZoom(),l=null===(r=this.map)||void 0===r?void 0:r.getZoom();if(null!==n&&void 0!==l&&l>n)e.getMap()!==this.map&&e.setMap(this.map);else if(a<this.minClusterSize)e.getMap()!==this.map&&e.setMap(this.map);else if(a===this.minClusterSize)for(var i=0,o=this.markers;i<o.length;i++)o[i].setMap(null);else e.setMap(null);return!0},e.prototype.isMarkerInClusterBounds=function(e){if(null!==this.bounds){var t=e.getPosition();if(t)return this.bounds.contains(t)}return!1},e.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},e.prototype.updateIcon=function(){var e,t=this.markers.length,s=this.markerClusterer.getMaxZoom(),r=null===(e=this.map)||void 0===e?void 0:e.getZoom();if(null!==s&&void 0!==r&&r>s||t<this.minClusterSize){this.clusterIcon.hide();return}this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show()},e.prototype.isMarkerAlreadyAdded=function(e){if(this.markers.includes)return this.markers.includes(e);for(var t=0;t<this.markers.length;t++)if(e===this.markers[t])return!0;return!1},e}();function eM(e,t){var s=e.length,r=s.toString().length;return{text:s.toString(),index:Math.min(r,t),title:""}}var eE=[53,56,66,78,90],eT=function(){function e(t,s,r){void 0===s&&(s=[]),void 0===r&&(r={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend=this.extend.bind(this),this.extend(e,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=r.gridSize||60,this.minClusterSize=r.minimumClusterSize||2,this.maxZoom=r.maxZoom||null,this.styles=r.styles||[],this.title=r.title||"",this.zoomOnClick=!0,void 0!==r.zoomOnClick&&(this.zoomOnClick=r.zoomOnClick),this.averageCenter=!1,void 0!==r.averageCenter&&(this.averageCenter=r.averageCenter),this.ignoreHidden=!1,void 0!==r.ignoreHidden&&(this.ignoreHidden=r.ignoreHidden),this.enableRetinaIcons=!1,void 0!==r.enableRetinaIcons&&(this.enableRetinaIcons=r.enableRetinaIcons),this.imagePath=r.imagePath||"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",this.imageExtension=r.imageExtension||"png",this.imageSizes=r.imageSizes||eE,this.calculator=r.calculator||eM,this.batchSize=r.batchSize||2e3,this.batchSizeIE=r.batchSizeIE||500,this.clusterClass=r.clusterClass||"cluster",-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(s,!0),this.setMap(t)}return e.prototype.onZoomChanged=function(){var e,t;this.resetViewport(!1),((null===(e=this.getMap())||void 0===e?void 0:e.getZoom())===(this.get("minZoom")||0)||(null===(t=this.getMap())||void 0===t?void 0:t.getZoom())===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")},e.prototype.onIdle=function(){this.redraw()},e.prototype.onAdd=function(){var e=this.getMap();this.activeMap=e,this.ready=!0,this.repaint(),null!==e&&(this.listeners=[google.maps.event.addListener(e,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(e,"idle",this.onIdle)])},e.prototype.onRemove=function(){for(var e=0,t=this.markers;e<t.length;e++){var s=t[e];s.getMap()!==this.activeMap&&s.setMap(this.activeMap)}for(var r=0,a=this.clusters;r<a.length;r++)a[r].remove();this.clusters=[];for(var n=0,l=this.listeners;n<l.length;n++){var i=l[n];google.maps.event.removeListener(i)}this.listeners=[],this.activeMap=null,this.ready=!1},e.prototype.draw=function(){},e.prototype.getMap=function(){return null},e.prototype.getPanes=function(){return null},e.prototype.getProjection=function(){return{fromContainerPixelToLatLng:function(){return null},fromDivPixelToLatLng:function(){return null},fromLatLngToContainerPixel:function(){return null},fromLatLngToDivPixel:function(){return null},getVisibleRegion:function(){return null},getWorldWidth:function(){return 0}}},e.prototype.setMap=function(){},e.prototype.addListener=function(){return{remove:function(){}}},e.prototype.bindTo=function(){},e.prototype.get=function(){},e.prototype.notify=function(){},e.prototype.set=function(){},e.prototype.setValues=function(){},e.prototype.unbind=function(){},e.prototype.unbindAll=function(){},e.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var e=0;e<this.imageSizes.length;e++)this.styles.push({url:"".concat(this.imagePath+(e+1),".").concat(this.imageExtension),height:this.imageSizes[e]||0,width:this.imageSizes[e]||0})},e.prototype.fitMapToMarkers=function(){for(var e=this.getMarkers(),t=new google.maps.LatLngBounds,s=0;s<e.length;s++){var r=e[s].getPosition();r&&t.extend(r)}var a=this.getMap();null!==a&&"fitBounds"in a&&a.fitBounds(t)},e.prototype.getGridSize=function(){return this.gridSize},e.prototype.setGridSize=function(e){this.gridSize=e},e.prototype.getMinimumClusterSize=function(){return this.minClusterSize},e.prototype.setMinimumClusterSize=function(e){this.minClusterSize=e},e.prototype.getMaxZoom=function(){return this.maxZoom},e.prototype.setMaxZoom=function(e){this.maxZoom=e},e.prototype.getStyles=function(){return this.styles},e.prototype.setStyles=function(e){this.styles=e},e.prototype.getTitle=function(){return this.title},e.prototype.setTitle=function(e){this.title=e},e.prototype.getZoomOnClick=function(){return this.zoomOnClick},e.prototype.setZoomOnClick=function(e){this.zoomOnClick=e},e.prototype.getAverageCenter=function(){return this.averageCenter},e.prototype.setAverageCenter=function(e){this.averageCenter=e},e.prototype.getIgnoreHidden=function(){return this.ignoreHidden},e.prototype.setIgnoreHidden=function(e){this.ignoreHidden=e},e.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},e.prototype.setEnableRetinaIcons=function(e){this.enableRetinaIcons=e},e.prototype.getImageExtension=function(){return this.imageExtension},e.prototype.setImageExtension=function(e){this.imageExtension=e},e.prototype.getImagePath=function(){return this.imagePath},e.prototype.setImagePath=function(e){this.imagePath=e},e.prototype.getImageSizes=function(){return this.imageSizes},e.prototype.setImageSizes=function(e){this.imageSizes=e},e.prototype.getCalculator=function(){return this.calculator},e.prototype.setCalculator=function(e){this.calculator=e},e.prototype.getBatchSizeIE=function(){return this.batchSizeIE},e.prototype.setBatchSizeIE=function(e){this.batchSizeIE=e},e.prototype.getClusterClass=function(){return this.clusterClass},e.prototype.setClusterClass=function(e){this.clusterClass=e},e.prototype.getMarkers=function(){return this.markers},e.prototype.getTotalMarkers=function(){return this.markers.length},e.prototype.getClusters=function(){return this.clusters},e.prototype.getTotalClusters=function(){return this.clusters.length},e.prototype.addMarker=function(e,t){this.pushMarkerTo(e),t||this.redraw()},e.prototype.addMarkers=function(e,t){for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var r=e[s];r&&this.pushMarkerTo(r)}t||this.redraw()},e.prototype.pushMarkerTo=function(e){var t=this;e.getDraggable()&&google.maps.event.addListener(e,"dragend",function(){t.ready&&(e.isAdded=!1,t.repaint())}),e.isAdded=!1,this.markers.push(e)},e.prototype.removeMarker_=function(e){var t=-1;if(this.markers.indexOf)t=this.markers.indexOf(e);else for(var s=0;s<this.markers.length;s++)if(e===this.markers[s]){t=s;break}return -1!==t&&(e.setMap(null),this.markers.splice(t,1),!0)},e.prototype.removeMarker=function(e,t){var s=this.removeMarker_(e);return!t&&s&&this.repaint(),s},e.prototype.removeMarkers=function(e,t){for(var s=!1,r=0;r<e.length;r++){var a=e[r];s=s||this.removeMarker_(a)}return!t&&s&&this.repaint(),s},e.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},e.prototype.repaint=function(){var e=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout(function(){for(var t=0;t<e.length;t++)e[t].remove()},0)},e.prototype.getExtendedBounds=function(e){var t=this.getProjection(),s=t.fromLatLngToDivPixel(new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()));null!==s&&(s.x+=this.gridSize,s.y-=this.gridSize);var r=t.fromLatLngToDivPixel(new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()));if(null!==r&&(r.x-=this.gridSize,r.y+=this.gridSize),null!==s){var a=t.fromDivPixelToLatLng(s);null!==a&&e.extend(a)}if(null!==r){var n=t.fromDivPixelToLatLng(r);null!==n&&e.extend(n)}return e},e.prototype.redraw=function(){this.createClusters(0)},e.prototype.resetViewport=function(e){for(var t=0,s=this.clusters;t<s.length;t++)s[t].remove();this.clusters=[];for(var r=0,a=this.markers;r<a.length;r++){var n=a[r];n.isAdded=!1,e&&n.setMap(null)}},e.prototype.distanceBetweenPoints=function(e,t){var s=(t.lat()-e.lat())*Math.PI/180,r=(t.lng()-e.lng())*Math.PI/180,a=Math.sin(s/2)*Math.sin(s/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2);return 2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))*6371},e.prototype.isMarkerInBounds=function(e,t){var s=e.getPosition();return!!s&&t.contains(s)},e.prototype.addToClosestCluster=function(e){for(var t,s=4e4,r=null,a=0,n=this.clusters;a<n.length;a++){var l=(t=n[a]).getCenter(),i=e.getPosition();if(l&&i){var o=this.distanceBetweenPoints(l,i);o<s&&(s=o,r=t)}}r&&r.isMarkerInClusterBounds(e)?r.addMarker(e):((t=new eP(this)).addMarker(e),this.clusters.push(t))},e.prototype.createClusters=function(e){var t=this;if(this.ready){0===e&&(google.maps.event.trigger(this,"clusteringbegin",this),null!==this.timerRefStatic&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var s=this.getMap(),r=null!==s&&("getBounds"in s)?s.getBounds():null,a=((null==s?void 0:s.getZoom())||0)>3?new google.maps.LatLngBounds(null==r?void 0:r.getSouthWest(),null==r?void 0:r.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),n=this.getExtendedBounds(a),l=Math.min(e+this.batchSize,this.markers.length),i=e;i<l;i++){var o=this.markers[i];o&&!o.isAdded&&this.isMarkerInBounds(o,n)&&(!this.ignoreHidden||this.ignoreHidden&&o.getVisible())&&this.addToClosestCluster(o)}if(l<this.markers.length)this.timerRefStatic=window.setTimeout(function(){t.createClusters(l)},0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(var c=0,d=this.clusters;c<d.length;c++)d[c].updateIcon()}}},e.prototype.extend=function(e,t){return(function(e){for(var t in e.prototype)this.prototype[t]=e.prototype[t];return this}).apply(e,[t])},e}();function eO(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}var ez={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},eA={averageCenter(e,t){e.setAverageCenter(t)},batchSizeIE(e,t){e.setBatchSizeIE(t)},calculator(e,t){e.setCalculator(t)},clusterClass(e,t){e.setClusterClass(t)},enableRetinaIcons(e,t){e.setEnableRetinaIcons(t)},gridSize(e,t){e.setGridSize(t)},ignoreHidden(e,t){e.setIgnoreHidden(t)},imageExtension(e,t){e.setImageExtension(t)},imagePath(e,t){e.setImagePath(t)},imageSizes(e,t){e.setImageSizes(t)},maxZoom(e,t){e.setMaxZoom(t)},minimumClusterSize(e,t){e.setMinimumClusterSize(t)},styles(e,t){e.setStyles(t)},title(e,t){e.setTitle(t)},zoomOnClick(e,t){e.setZoomOnClick(t)}},eR={};(0,h.memo)(function(e){var{children:t,options:s,averageCenter:r,batchSizeIE:a,calculator:n,clusterClass:l,enableRetinaIcons:i,gridSize:o,ignoreHidden:c,imageExtension:d,imagePath:m,imageSizes:u,maxZoom:p,minimumClusterSize:x,styles:g,title:f,zoomOnClick:j,onClick:v,onClusteringBegin:b,onClusteringEnd:y,onMouseOver:N,onMouseOut:C,onLoad:w,onUnmount:k}=e,[S,L]=(0,h.useState)(null),P=(0,h.useContext)(Z),[M,E]=(0,h.useState)(null),[T,O]=(0,h.useState)(null),[z,A]=(0,h.useState)(null),[D,I]=(0,h.useState)(null),[F,B]=(0,h.useState)(null);return(0,h.useEffect)(()=>{S&&C&&(null!==D&&google.maps.event.removeListener(D),I(google.maps.event.addListener(S,ez.onMouseOut,C)))},[C]),(0,h.useEffect)(()=>{S&&N&&(null!==F&&google.maps.event.removeListener(F),B(google.maps.event.addListener(S,ez.onMouseOver,N)))},[N]),(0,h.useEffect)(()=>{S&&v&&(null!==M&&google.maps.event.removeListener(M),E(google.maps.event.addListener(S,ez.onClick,v)))},[v]),(0,h.useEffect)(()=>{S&&b&&(null!==T&&google.maps.event.removeListener(T),O(google.maps.event.addListener(S,ez.onClusteringBegin,b)))},[b]),(0,h.useEffect)(()=>{S&&y&&(null!==z&&google.maps.event.removeListener(z),O(google.maps.event.addListener(S,ez.onClusteringEnd,y)))},[y]),(0,h.useEffect)(()=>{void 0!==r&&null!==S&&eA.averageCenter(S,r)},[S,r]),(0,h.useEffect)(()=>{void 0!==a&&null!==S&&eA.batchSizeIE(S,a)},[S,a]),(0,h.useEffect)(()=>{void 0!==n&&null!==S&&eA.calculator(S,n)},[S,n]),(0,h.useEffect)(()=>{void 0!==l&&null!==S&&eA.clusterClass(S,l)},[S,l]),(0,h.useEffect)(()=>{void 0!==i&&null!==S&&eA.enableRetinaIcons(S,i)},[S,i]),(0,h.useEffect)(()=>{void 0!==o&&null!==S&&eA.gridSize(S,o)},[S,o]),(0,h.useEffect)(()=>{void 0!==c&&null!==S&&eA.ignoreHidden(S,c)},[S,c]),(0,h.useEffect)(()=>{void 0!==d&&null!==S&&eA.imageExtension(S,d)},[S,d]),(0,h.useEffect)(()=>{void 0!==m&&null!==S&&eA.imagePath(S,m)},[S,m]),(0,h.useEffect)(()=>{void 0!==u&&null!==S&&eA.imageSizes(S,u)},[S,u]),(0,h.useEffect)(()=>{void 0!==p&&null!==S&&eA.maxZoom(S,p)},[S,p]),(0,h.useEffect)(()=>{void 0!==x&&null!==S&&eA.minimumClusterSize(S,x)},[S,x]),(0,h.useEffect)(()=>{void 0!==g&&null!==S&&eA.styles(S,g)},[S,g]),(0,h.useEffect)(()=>{void 0!==f&&null!==S&&eA.title(S,f)},[S,f]),(0,h.useEffect)(()=>{void 0!==j&&null!==S&&eA.zoomOnClick(S,j)},[S,j]),(0,h.useEffect)(()=>{if(P){var e=new eT(P,[],function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?eO(Object(s),!0).forEach(function(t){R(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):eO(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}({},s||eR));return r&&eA.averageCenter(e,r),a&&eA.batchSizeIE(e,a),n&&eA.calculator(e,n),l&&eA.clusterClass(e,l),i&&eA.enableRetinaIcons(e,i),o&&eA.gridSize(e,o),c&&eA.ignoreHidden(e,c),d&&eA.imageExtension(e,d),m&&eA.imagePath(e,m),u&&eA.imageSizes(e,u),p&&eA.maxZoom(e,p),x&&eA.minimumClusterSize(e,x),g&&eA.styles(e,g),f&&eA.title(e,f),j&&eA.zoomOnClick(e,j),C&&I(google.maps.event.addListener(e,ez.onMouseOut,C)),N&&B(google.maps.event.addListener(e,ez.onMouseOver,N)),v&&E(google.maps.event.addListener(e,ez.onClick,v)),b&&O(google.maps.event.addListener(e,ez.onClusteringBegin,b)),y&&A(google.maps.event.addListener(e,ez.onClusteringEnd,y)),L(e),w&&w(e),()=>{null!==D&&google.maps.event.removeListener(D),null!==F&&google.maps.event.removeListener(F),null!==M&&google.maps.event.removeListener(M),null!==T&&google.maps.event.removeListener(T),null!==z&&google.maps.event.removeListener(z),k&&k(e)}}},[]),null!==S&&t(S)||null});class eD extends h.PureComponent{constructor(){super(...arguments),R(this,"registeredEvents",[]),R(this,"state",{markerClusterer:null}),R(this,"setClustererCallback",()=>{null!==this.state.markerClusterer&&this.props.onLoad&&this.props.onLoad(this.state.markerClusterer)})}componentDidMount(){if(this.context){var e=new eT(this.context,[],this.props.options);this.registeredEvents=$({updaterMap:eA,eventMap:ez,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({markerClusterer:e}),this.setClustererCallback)}}componentDidUpdate(e){this.state.markerClusterer&&(B(this.registeredEvents),this.registeredEvents=$({updaterMap:eA,eventMap:ez,prevProps:e,nextProps:this.props,instance:this.state.markerClusterer}))}componentWillUnmount(){null!==this.state.markerClusterer&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),B(this.registeredEvents),this.state.markerClusterer.setMap(null))}render(){return null!==this.state.markerClusterer?this.props.children(this.state.markerClusterer):null}}function eI(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}R(eD,"contextType",Z);var eZ=function(){function e(t){void 0===t&&(t={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(e,google.maps.OverlayView),this.content=t.content||"",this.disableAutoPan=t.disableAutoPan||!1,this.maxWidth=t.maxWidth||0,this.pixelOffset=t.pixelOffset||new google.maps.Size(0,0),this.position=t.position||new google.maps.LatLng(0,0),this.zIndex=t.zIndex||null,this.boxClass=t.boxClass||"infoBox",this.boxStyle=t.boxStyle||{},this.closeBoxMargin=t.closeBoxMargin||"2px",this.closeBoxURL=t.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",""===t.closeBoxURL&&(this.closeBoxURL=""),this.infoBoxClearance=t.infoBoxClearance||new google.maps.Size(1,1),void 0===t.visible&&(void 0===t.isHidden?t.visible=!0:t.visible=!t.isHidden),this.isHidden=!t.visible,this.alignBottom=t.alignBottom||!1,this.pane=t.pane||"floatPane",this.enableEventPropagation=t.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return e.prototype.createInfoBoxDiv=function(){var e=this;if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),"string"==typeof this.content?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var t=this.getPanes();if(null!==t&&t[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(0!==this.maxWidth&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var s=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-s.left-s.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var r=0,a=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"];r<a.length;r++){var n=a[r];this.eventListeners.push(google.maps.event.addListener(this.div,n,eI))}this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",function(){e.div&&(e.div.style.cursor="default")}))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",function(t){t.returnValue=!1,t.preventDefault&&t.preventDefault(),e.enableEventPropagation||eI(t)}),google.maps.event.trigger(this,"domready")}},e.prototype.getCloseBoxImg=function(){var e="";return""!==this.closeBoxURL&&(e='<img alt="" aria-hidden="true" src=\''+this.closeBoxURL+"' align=right style=' position: relative; cursor: pointer; margin: "+this.closeBoxMargin+";'>"),e},e.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&""!==this.closeBoxURL?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},e.prototype.closeClickHandler=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},e.prototype.getCloseClickHandler=function(){return this.closeClickHandler},e.prototype.panBox=function(e){if(this.div&&!e){var t=this.getMap();if(t instanceof google.maps.Map){var s=0,r=0,a=t.getBounds();a&&!a.contains(this.position)&&t.setCenter(this.position);var n=t.getDiv(),l=n.offsetWidth,i=n.offsetHeight,o=this.pixelOffset.width,c=this.pixelOffset.height,d=this.div.offsetWidth,m=this.div.offsetHeight,h=this.infoBoxClearance.width,u=this.infoBoxClearance.height,p=this.getProjection().fromLatLngToContainerPixel(this.position);null!==p&&(p.x<-o+h?s=p.x+o-h:p.x+d+o+h>l&&(s=p.x+d+o+h-l),this.alignBottom?p.y<-c+u+m?r=p.y+c-u-m:p.y+c+u>i&&(r=p.y+c+u-i):p.y<-c+u?r=p.y+c-u:p.y+m+c+u>i&&(r=p.y+m+c+u-i)),0===s&&0===r||t.panBy(s,r)}}},e.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var e=this.boxStyle;for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(this.div.style[t]=e[t]);if(this.div.style.webkitTransform="translateZ(0)",void 0!==this.div.style.opacity&&""!==this.div.style.opacity){var s=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+100*s+')"',this.div.style.filter="alpha(opacity="+100*s+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",null!==this.zIndex&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},e.prototype.getBoxWidths=function(){var e={top:0,bottom:0,left:0,right:0};if(!this.div)return e;if(document.defaultView){var t=this.div.ownerDocument,s=t&&t.defaultView?t.defaultView.getComputedStyle(this.div,""):null;s&&(e.top=parseInt(s.borderTopWidth||"",10)||0,e.bottom=parseInt(s.borderBottomWidth||"",10)||0,e.left=parseInt(s.borderLeftWidth||"",10)||0,e.right=parseInt(s.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var r=this.div.currentStyle;r&&(e.top=parseInt(r.borderTopWidth||"",10)||0,e.bottom=parseInt(r.borderBottomWidth||"",10)||0,e.left=parseInt(r.borderLeftWidth||"",10)||0,e.right=parseInt(r.borderRightWidth||"",10)||0)}return e},e.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},e.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var e=this.getProjection().fromLatLngToDivPixel(this.position);null!==e&&(this.div.style.left=e.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(e.y+this.pixelOffset.height)+"px":this.div.style.top=e.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},e.prototype.setOptions=function(e){void 0===e&&(e={}),void 0!==e.boxClass&&(this.boxClass=e.boxClass,this.setBoxStyle()),void 0!==e.boxStyle&&(this.boxStyle=e.boxStyle,this.setBoxStyle()),void 0!==e.content&&this.setContent(e.content),void 0!==e.disableAutoPan&&(this.disableAutoPan=e.disableAutoPan),void 0!==e.maxWidth&&(this.maxWidth=e.maxWidth),void 0!==e.pixelOffset&&(this.pixelOffset=e.pixelOffset),void 0!==e.alignBottom&&(this.alignBottom=e.alignBottom),void 0!==e.position&&this.setPosition(e.position),void 0!==e.zIndex&&this.setZIndex(e.zIndex),void 0!==e.closeBoxMargin&&(this.closeBoxMargin=e.closeBoxMargin),void 0!==e.closeBoxURL&&(this.closeBoxURL=e.closeBoxURL),void 0!==e.infoBoxClearance&&(this.infoBoxClearance=e.infoBoxClearance),void 0!==e.isHidden&&(this.isHidden=e.isHidden),void 0!==e.visible&&(this.isHidden=!e.visible),void 0!==e.enableEventPropagation&&(this.enableEventPropagation=e.enableEventPropagation),this.div&&this.draw()},e.prototype.setContent=function(e){this.content=e,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),"string"==typeof e?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px","string"==typeof e?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},e.prototype.setPosition=function(e){this.position=e,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},e.prototype.setVisible=function(e){this.isHidden=!e,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},e.prototype.setZIndex=function(e){this.zIndex=e,this.div&&(this.div.style.zIndex=e+""),google.maps.event.trigger(this,"zindex_changed")},e.prototype.getContent=function(){return this.content},e.prototype.getPosition=function(){return this.position},e.prototype.getZIndex=function(){return this.zIndex},e.prototype.getVisible=function(){return null!=this.getMap()&&!this.isHidden},e.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},e.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},e.prototype.open=function(e,t){var s=this;t&&(this.position=t.getPosition(),this.moveListener=google.maps.event.addListener(t,"position_changed",function(){var e=t.getPosition();s.setPosition(e)}),this.mapListener=google.maps.event.addListener(t,"map_changed",function(){s.setMap(t.map)})),this.setMap(e),this.div&&this.panBox()},e.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var e=0,t=this.eventListeners;e<t.length;e++){var s=t[e];google.maps.event.removeListener(s)}this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},e.prototype.extend=function(e,t){return(function(e){for(var t in e.prototype)Object.prototype.hasOwnProperty.call(this,t)||(this.prototype[t]=e.prototype[t]);return this}).apply(e,[t])},e}(),eF=["position"],eB=["position"];function e$(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function eU(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?e$(Object(s),!0).forEach(function(t){R(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):e$(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var e_={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},eW={options(e,t){e.setOptions(t)},position(e,t){t instanceof google.maps.LatLng?e.setPosition(t):e.setPosition(new google.maps.LatLng(t.lat,t.lng))},visible(e,t){e.setVisible(t)},zIndex(e,t){e.setZIndex(t)}},eY={};(0,h.memo)(function(e){var{children:t,anchor:s,options:r,position:a,zIndex:n,onCloseClick:l,onDomReady:i,onContentChanged:o,onPositionChanged:c,onZindexChanged:d,onLoad:m,onUnmount:u}=e,p=(0,h.useContext)(Z),[x,g]=(0,h.useState)(null),[f,j]=(0,h.useState)(null),[v,b]=(0,h.useState)(null),[y,N]=(0,h.useState)(null),[C,w]=(0,h.useState)(null),[k,S]=(0,h.useState)(null),L=(0,h.useRef)(null);return(0,h.useEffect)(()=>{p&&null!==x&&(x.close(),s?x.open(p,s):x.getPosition()&&x.open(p))},[p,x,s]),(0,h.useEffect)(()=>{r&&null!==x&&x.setOptions(r)},[x,r]),(0,h.useEffect)(()=>{if(a&&null!==x){var e=a instanceof google.maps.LatLng?a:new google.maps.LatLng(a.lat,a.lng);x.setPosition(e)}},[a]),(0,h.useEffect)(()=>{"number"==typeof n&&null!==x&&x.setZIndex(n)},[n]),(0,h.useEffect)(()=>{x&&l&&(null!==f&&google.maps.event.removeListener(f),j(google.maps.event.addListener(x,"closeclick",l)))},[l]),(0,h.useEffect)(()=>{x&&i&&(null!==v&&google.maps.event.removeListener(v),b(google.maps.event.addListener(x,"domready",i)))},[i]),(0,h.useEffect)(()=>{x&&o&&(null!==y&&google.maps.event.removeListener(y),N(google.maps.event.addListener(x,"content_changed",o)))},[o]),(0,h.useEffect)(()=>{x&&c&&(null!==C&&google.maps.event.removeListener(C),w(google.maps.event.addListener(x,"position_changed",c)))},[c]),(0,h.useEffect)(()=>{x&&d&&(null!==k&&google.maps.event.removeListener(k),S(google.maps.event.addListener(x,"zindex_changed",d)))},[d]),(0,h.useEffect)(()=>{if(p){var e,t=r||eY,{position:a}=t,n=es(t,eF);!a||a instanceof google.maps.LatLng||(e=new google.maps.LatLng(a.lat,a.lng));var h=new eZ(eU(eU({},n),e?{position:e}:{}));L.current=document.createElement("div"),g(h),l&&j(google.maps.event.addListener(h,"closeclick",l)),i&&b(google.maps.event.addListener(h,"domready",i)),o&&N(google.maps.event.addListener(h,"content_changed",o)),c&&w(google.maps.event.addListener(h,"position_changed",c)),d&&S(google.maps.event.addListener(h,"zindex_changed",d)),h.setContent(L.current),s?h.open(p,s):h.getPosition()?h.open(p):I(!1,"You must provide either an anchor or a position prop for <InfoBox>."),m&&m(h)}return()=>{null!==x&&(f&&google.maps.event.removeListener(f),y&&google.maps.event.removeListener(y),v&&google.maps.event.removeListener(v),C&&google.maps.event.removeListener(C),k&&google.maps.event.removeListener(k),u&&u(x),x.close())}},[]),L.current?(0,z.createPortal)(h.Children.only(t),L.current):null});class eV extends h.PureComponent{constructor(){super(...arguments),R(this,"registeredEvents",[]),R(this,"containerElement",null),R(this,"state",{infoBox:null}),R(this,"open",(e,t)=>{t?null!==this.context&&e.open(this.context,t):e.getPosition()?null!==this.context&&e.open(this.context):I(!1,"You must provide either an anchor or a position prop for <InfoBox>.")}),R(this,"setInfoBoxCallback",()=>{null!==this.state.infoBox&&null!==this.containerElement&&(this.state.infoBox.setContent(this.containerElement),this.open(this.state.infoBox,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoBox))})}componentDidMount(){var e,t=this.props.options||{},{position:s}=t,r=es(t,eB);!s||s instanceof google.maps.LatLng||(e=new google.maps.LatLng(s.lat,s.lng));var a=new eZ(eU(eU({},r),e?{position:e}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=$({updaterMap:eW,eventMap:e_,prevProps:{},nextProps:this.props,instance:a}),this.setState({infoBox:a},this.setInfoBoxCallback)}componentDidUpdate(e){var{infoBox:t}=this.state;null!==t&&(B(this.registeredEvents),this.registeredEvents=$({updaterMap:eW,eventMap:e_,prevProps:e,nextProps:this.props,instance:t}))}componentWillUnmount(){var{onUnmount:e}=this.props,{infoBox:t}=this.state;null!==t&&(e&&e(t),B(this.registeredEvents),t.close())}render(){return this.containerElement?(0,z.createPortal)(h.Children.only(this.props.children),this.containerElement):null}}R(eV,"contextType",Z);var eH=D(c?o:(c=1,o=function e(t,s){if(t===s)return!0;if(t&&s&&"object"==typeof t&&"object"==typeof s){if(t.constructor!==s.constructor)return!1;if(Array.isArray(t)){if((r=t.length)!=s.length)return!1;for(a=r;0!=a--;)if(!e(t[a],s[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===s.source&&t.flags===s.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===s.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===s.toString();if((r=(n=Object.keys(t)).length)!==Object.keys(s).length)return!1;for(a=r;0!=a--;)if(!Object.prototype.hasOwnProperty.call(s,n[a]))return!1;for(a=r;0!=a--;){var r,a,n,l=n[a];if(!e(t[l],s[l]))return!1}return!0}return t!=t&&s!=s})),eG=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class eJ{static from(e){if(!(e instanceof ArrayBuffer))throw Error("Data must be an instance of ArrayBuffer.");var[t,s]=new Uint8Array(e,0,2);if(219!==t)throw Error("Data does not appear to be in a KDBush format.");var r=s>>4;if(1!==r)throw Error("Got v".concat(r," data when expected v").concat(1,"."));var a=eG[15&s];if(!a)throw Error("Unrecognized array type.");var[n]=new Uint16Array(e,2,1),[l]=new Uint32Array(e,4,1);return new eJ(l,n,a,e)}constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,r=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=s,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;var a=eG.indexOf(this.ArrayType),n=2*e*this.ArrayType.BYTES_PER_ELEMENT,l=e*this.IndexArrayType.BYTES_PER_ELEMENT,i=(8-l%8)%8;if(a<0)throw Error("Unexpected typed array class: ".concat(s,"."));r&&r instanceof ArrayBuffer?(this.data=r,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+l+i,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+n+l+i),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+l+i,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+a]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){var s=this._pos>>1;return this.ids[s]=s,this.coords[this._pos++]=e,this.coords[this._pos++]=t,s}finish(){var e=this._pos>>1;if(e!==this.numItems)throw Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return function e(t,s,r,a,n,l){if(!(n-a<=r)){var i=a+n>>1;(function e(t,s,r,a,n,l){for(;n>a;){if(n-a>600){var i=n-a+1,o=r-a+1,c=Math.log(i),d=.5*Math.exp(2*c/3),m=.5*Math.sqrt(c*d*(i-d)/i)*(o-i/2<0?-1:1),h=Math.max(a,Math.floor(r-o*d/i+m)),u=Math.min(n,Math.floor(r+(i-o)*d/i+m));e(t,s,r,h,u,l)}var p=s[2*r+l],x=a,g=n;for(eX(t,s,a,r),s[2*n+l]>p&&eX(t,s,a,n);x<g;){for(eX(t,s,x,g),x++,g--;s[2*x+l]<p;)x++;for(;s[2*g+l]>p;)g--}s[2*a+l]===p?eX(t,s,a,g):eX(t,s,++g,n),g<=r&&(a=g+1),r<=g&&(n=g-1)}})(t,s,i,a,n,l),e(t,s,r,a,i-1,1-l),e(t,s,r,i+1,n,1-l)}}(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,s,r){if(!this._finished)throw Error("Data not yet indexed - call index.finish().");for(var{ids:a,coords:n,nodeSize:l}=this,i=[0,a.length-1,0],o=[];i.length;){var c=i.pop()||0,d=i.pop()||0,m=i.pop()||0;if(d-m<=l){for(var h=m;h<=d;h++){var u=n[2*h],p=n[2*h+1];u>=e&&u<=s&&p>=t&&p<=r&&o.push(a[h])}continue}var x=m+d>>1,g=n[2*x],f=n[2*x+1];g>=e&&g<=s&&f>=t&&f<=r&&o.push(a[x]),(0===c?e<=g:t<=f)&&(i.push(m),i.push(x-1),i.push(1-c)),(0===c?s>=g:r>=f)&&(i.push(x+1),i.push(d),i.push(1-c))}return o}within(e,t,s){if(!this._finished)throw Error("Data not yet indexed - call index.finish().");for(var{ids:r,coords:a,nodeSize:n}=this,l=[0,r.length-1,0],i=[],o=s*s;l.length;){var c=l.pop()||0,d=l.pop()||0,m=l.pop()||0;if(d-m<=n){for(var h=m;h<=d;h++)eK(a[2*h],a[2*h+1],e,t)<=o&&i.push(r[h]);continue}var u=m+d>>1,p=a[2*u],x=a[2*u+1];eK(p,x,e,t)<=o&&i.push(r[u]),(0===c?e-s<=p:t-s<=x)&&(l.push(m),l.push(u-1),l.push(1-c)),(0===c?e+s>=p:t+s>=x)&&(l.push(u+1),l.push(d),l.push(1-c))}return i}}function eX(e,t,s,r){eq(e,s,r),eq(t,2*s,2*r),eq(t,2*s+1,2*r+1)}function eq(e,t,s){var r=e[t];e[t]=e[s],e[s]=r}function eK(e,t,s,r){var a=e-s,n=t-r;return a*a+n*n}var eQ={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},e0=Math.fround||(r=new Float32Array(1),e=>(r[0]=+e,r[0]));class e1{constructor(e){this.options=Object.assign(Object.create(eQ),e),this.trees=Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){var{log:t,minZoom:s,maxZoom:r}=this.options;t&&console.time("total time");var a="prepare ".concat(e.length," points");t&&console.time(a),this.points=e;for(var n=[],l=0;l<e.length;l++){var i=e[l];if(i.geometry){var[o,c]=i.geometry.coordinates,d=e0(e5(o)),m=e0(e6(c));n.push(d,m,1/0,l,-1,1),this.options.reduce&&n.push(0)}}var h=this.trees[r+1]=this._createTree(n);t&&console.timeEnd(a);for(var u=r;u>=s;u--){var p=+Date.now();h=this.trees[u]=this._createTree(this._cluster(h,u)),t&&console.log("z%d: %d clusters in %dms",u,h.numItems,+Date.now()-p)}return t&&console.timeEnd("total time"),this}getClusters(e,t){var s=((e[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,e[1])),a=180===e[2]?180:((e[2]+180)%360+360)%360-180,n=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)s=-180,a=180;else if(s>a){var l=this.getClusters([s,r,180,n],t),i=this.getClusters([-180,r,a,n],t);return l.concat(i)}var o=this.trees[this._limitZoom(t)],c=o.range(e5(s),e6(n),e5(a),e6(r)),d=o.data,m=[];for(var h of c){var u=this.stride*h;m.push(d[u+5]>1?e2(d,u,this.clusterProps):this.points[d[u+3]])}return m}getChildren(e){var t=this._getOriginId(e),s=this._getOriginZoom(e),r="No cluster with the specified id.",a=this.trees[s];if(!a)throw Error(r);var n=a.data;if(t*this.stride>=n.length)throw Error(r);var l=this.options.radius/(this.options.extent*Math.pow(2,s-1)),i=n[t*this.stride],o=n[t*this.stride+1],c=a.within(i,o,l),d=[];for(var m of c){var h=m*this.stride;n[h+4]===e&&d.push(n[h+5]>1?e2(n,h,this.clusterProps):this.points[n[h+3]])}if(0===d.length)throw Error(r);return d}getLeaves(e,t,s){t=t||10,s=s||0;var r=[];return this._appendLeaves(r,e,t,s,0),r}getTile(e,t,s){var r=this.trees[this._limitZoom(e)],a=Math.pow(2,e),{extent:n,radius:l}=this.options,i=l/n,o=(s-i)/a,c=(s+1+i)/a,d={features:[]};return this._addTileFeatures(r.range((t-i)/a,o,(t+1+i)/a,c),r.data,t,s,a,d),0===t&&this._addTileFeatures(r.range(1-i/a,o,1,c),r.data,a,s,a,d),t===a-1&&this._addTileFeatures(r.range(0,o,i/a,c),r.data,-1,s,a,d),d.features.length?d:null}getClusterExpansionZoom(e){for(var t=this._getOriginZoom(e)-1;t<=this.options.maxZoom;){var s=this.getChildren(e);if(t++,1!==s.length)break;e=s[0].properties.cluster_id}return t}_appendLeaves(e,t,s,r,a){for(var n of this.getChildren(t)){var l=n.properties;if(l&&l.cluster?a+l.point_count<=r?a+=l.point_count:a=this._appendLeaves(e,l.cluster_id,s,r,a):a<r?a++:e.push(n),e.length===s)break}return a}_createTree(e){for(var t=new eJ(e.length/this.stride|0,this.options.nodeSize,Float32Array),s=0;s<e.length;s+=this.stride)t.add(e[s],e[s+1]);return t.finish(),t.data=e,t}_addTileFeatures(e,t,s,r,a,n){for(var l of e){var i=l*this.stride,o=t[i+5]>1,c=void 0,d=void 0,m=void 0;if(o)c=e4(t,i,this.clusterProps),d=t[i],m=t[i+1];else{var h=this.points[t[i+3]];c=h.properties;var[u,p]=h.geometry.coordinates;d=e5(u),m=e6(p)}var x={type:1,geometry:[[Math.round(this.options.extent*(d*a-s)),Math.round(this.options.extent*(m*a-r))]],tags:c},g=void 0;void 0!==(g=o||this.options.generateId?t[i+3]:this.points[t[i+3]].id)&&(x.id=g),n.features.push(x)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){for(var{radius:s,extent:r,reduce:a,minPoints:n}=this.options,l=s/(r*Math.pow(2,t)),i=e.data,o=[],c=this.stride,d=0;d<i.length;d+=c)if(!(i[d+2]<=t)){i[d+2]=t;var m=i[d],h=i[d+1],u=e.within(i[d],i[d+1],l),p=i[d+5],x=p;for(var g of u){var f=g*c;i[f+2]>t&&(x+=i[f+5])}if(x>p&&x>=n){var j=m*p,v=h*p,b=void 0,y=-1,N=((d/c|0)<<5)+(t+1)+this.points.length;for(var C of u){var w=C*c;if(!(i[w+2]<=t)){i[w+2]=t;var k=i[w+5];j+=i[w]*k,v+=i[w+1]*k,i[w+4]=N,a&&(b||(b=this._map(i,d,!0),y=this.clusterProps.length,this.clusterProps.push(b)),a(b,this._map(i,w)))}}i[d+4]=N,o.push(j/x,v/x,1/0,N,-1,x),a&&o.push(y)}else{for(var S=0;S<c;S++)o.push(i[d+S]);if(x>1)for(var L of u){var P=L*c;if(!(i[P+2]<=t)){i[P+2]=t;for(var M=0;M<c;M++)o.push(i[P+M])}}}}return o}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,s){if(e[t+5]>1){var r=this.clusterProps[e[t+6]];return s?Object.assign({},r):r}var a=this.points[e[t+3]].properties,n=this.options.map(a);return s&&n===a?Object.assign({},n):n}}function e2(e,t,s){return{type:"Feature",id:e[t+3],properties:e4(e,t,s),geometry:{type:"Point",coordinates:[(e[t]-.5)*360,360*Math.atan(Math.exp((180-360*e[t+1])*Math.PI/180))/Math.PI-90]}}}function e4(e,t,s){var r=e[t+5],a=r>=1e4?"".concat(Math.round(r/1e3),"k"):r>=1e3?"".concat(Math.round(r/100)/10,"k"):r,n=e[t+6];return Object.assign(-1===n?{}:Object.assign({},s[n]),{cluster:!0,cluster_id:e[t+3],point_count:r,point_count_abbreviated:a})}function e5(e){return e/360+.5}function e6(e){var t=Math.sin(e*Math.PI/180),s=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return s<0?0:s>1?1:s}function e3(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)0>t.indexOf(r[a])&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(s[r[a]]=e[r[a]]);return s}class e8{static isAdvancedMarkerAvailable(e){return google.maps.marker&&!0===e.getMapCapabilities().isAdvancedMarkersAvailable}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,t){this.isAdvancedMarker(e)?e.map=t:e.setMap(t)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return!!this.isAdvancedMarker(e)||e.getVisible()}}class e7{constructor(e){var{markers:t,position:s}=e;this.markers=t,s&&(s instanceof google.maps.LatLng?this._position=s:this._position=new google.maps.LatLng(s))}get bounds(){if(0!==this.markers.length||this._position){var e=new google.maps.LatLngBounds(this._position,this._position);for(var t of this.markers)e.extend(e8.getPosition(t));return e}}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(e=>e8.getVisible(e)).length}push(e){this.markers.push(e)}delete(){this.marker&&(e8.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}var e9=(e,t,s,r)=>{var a=te(e.getBounds(),t,r);return s.filter(e=>a.contains(e8.getPosition(e)))},te=(e,t,s)=>{var{northEast:r,southWest:a}=tt(e,t);return tr(ts({northEast:r,southWest:a},s),t)},tt=(e,t)=>({northEast:t.fromLatLngToDivPixel(e.getNorthEast()),southWest:t.fromLatLngToDivPixel(e.getSouthWest())}),ts=(e,t)=>{var{northEast:s,southWest:r}=e;return s.x+=t,s.y-=t,r.x-=t,r.y+=t,{northEast:s,southWest:r}},tr=(e,t)=>{var{northEast:s,southWest:r}=e,a=t.fromDivPixelToLatLng(r),n=t.fromDivPixelToLatLng(s);return new google.maps.LatLngBounds(a,n)};class ta{constructor(e){var{maxZoom:t=16}=e;this.maxZoom=t}noop(e){var{markers:t}=e;return tn(t)}}var tn=e=>e.map(e=>new e7({position:e8.getPosition(e),markers:[e]}));class tl extends ta{constructor(e){var{maxZoom:t,radius:s=60}=e,r=e3(e,["maxZoom","radius"]);super({maxZoom:t}),this.state={zoom:-1},this.superCluster=new e1(Object.assign({maxZoom:this.maxZoom,radius:s},r))}calculate(e){var t=!1,s={zoom:e.map.getZoom()};if(!eH(e.markers,this.markers)){t=!0,this.markers=[...e.markers];var r=this.markers.map(e=>{var t=e8.getPosition(e);return{type:"Feature",geometry:{type:"Point",coordinates:[t.lng(),t.lat()]},properties:{marker:e}}});this.superCluster.load(r)}return!t&&(this.state.zoom<=this.maxZoom||s.zoom<=this.maxZoom)&&(t=!eH(this.state,s)),this.state=s,t&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:t}}cluster(e){var{map:t}=e;return this.superCluster.getClusters([-180,-90,180,90],Math.round(t.getZoom())).map(e=>this.transformCluster(e))}transformCluster(e){var{geometry:{coordinates:[t,s]},properties:r}=e;if(r.cluster)return new e7({markers:this.superCluster.getLeaves(r.cluster_id,1/0).map(e=>e.properties.marker),position:{lat:s,lng:t}});var a=r.marker;return new e7({markers:[a],position:e8.getPosition(a)})}}class ti{constructor(e,t){this.markers={sum:e.length};var s=t.map(e=>e.count),r=s.reduce((e,t)=>e+t,0);this.clusters={count:t.length,markers:{mean:r/t.length,sum:r,min:Math.min(...s),max:Math.max(...s)}}}}class to{render(e,t,s){var{count:r,position:a}=e,n=r>Math.max(10,t.clusters.markers.mean)?"#ff0000":"#0000ff",l='<svg fill="'.concat(n,'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">\n<circle cx="120" cy="120" opacity=".6" r="70" />\n<circle cx="120" cy="120" opacity=".3" r="90" />\n<circle cx="120" cy="120" opacity=".2" r="110" />\n<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">').concat(r,"</text>\n</svg>"),i="Cluster of ".concat(r," markers"),o=Number(google.maps.Marker.MAX_ZINDEX)+r;if(e8.isAdvancedMarkerAvailable(s)){var c=new DOMParser().parseFromString(l,"image/svg+xml").documentElement;return c.setAttribute("transform","translate(0 25)"),new google.maps.marker.AdvancedMarkerElement({map:s,position:a,zIndex:o,title:i,content:c})}var d={position:a,zIndex:o,title:i,icon:{url:"data:image/svg+xml;base64,".concat(btoa(l)),anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(d)}}class tc{constructor(){!function(e,t){for(var s in t.prototype)e.prototype[s]=t.prototype[s]}(tc,google.maps.OverlayView)}}!function(e){e.CLUSTERING_BEGIN="clusteringbegin",e.CLUSTERING_END="clusteringend",e.CLUSTER_CLICK="click"}(d||(d={}));var td=(e,t,s)=>{s.fitBounds(t.bounds)};class tm extends tc{constructor(e){var{map:t,markers:s=[],algorithmOptions:r={},algorithm:a=new tl(r),renderer:n=new to,onClusterClick:l=td}=e;super(),this.markers=[...s],this.clusters=[],this.algorithm=a,this.renderer=n,this.onClusterClick=l,t&&this.setMap(t)}addMarker(e,t){!this.markers.includes(e)&&(this.markers.push(e),t||this.render())}addMarkers(e,t){e.forEach(e=>{this.addMarker(e,!0)}),t||this.render()}removeMarker(e,t){var s=this.markers.indexOf(e);return -1!==s&&(e8.setMap(e,null),this.markers.splice(s,1),t||this.render(),!0)}removeMarkers(e,t){var s=!1;return e.forEach(e=>{s=this.removeMarker(e,!0)||s}),s&&!t&&this.render(),s}clearMarkers(e){this.markers.length=0,e||this.render()}render(){var e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,d.CLUSTERING_BEGIN,this);var{clusters:t,changed:s}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(s||void 0==s){var r=new Set;for(var a of t)1==a.markers.length&&r.add(a.markers[0]);var n=[];for(var l of this.clusters)null!=l.marker&&(1==l.markers.length?r.has(l.marker)||e8.setMap(l.marker,null):n.push(l.marker));this.clusters=t,this.renderClusters(),requestAnimationFrame(()=>n.forEach(e=>e8.setMap(e,null)))}google.maps.event.trigger(this,d.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(e=>e8.setMap(e,null)),this.clusters.forEach(e=>e.delete()),this.clusters=[]}renderClusters(){var e=new ti(this.markers,this.clusters),t=this.getMap();this.clusters.forEach(s=>{1===s.markers.length?s.marker=s.markers[0]:(s.marker=this.renderer.render(s,e,t),s.markers.forEach(e=>e8.setMap(e,null)),this.onClusterClick&&s.marker.addListener("click",e=>{google.maps.event.trigger(this,d.CLUSTER_CLICK,s),this.onClusterClick(e,s,t)})),e8.setMap(s.marker,t)})}}function th(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function tu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?th(Object(s),!0).forEach(function(t){R(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):th(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}(0,h.memo)(function(e){var{children:t,options:s}=e,r=function(e){var t,s=(I(!!h.useContext,"useGoogleMap is React hook and requires React version 16.8+"),I(!!(t=(0,h.useContext)(Z)),"useGoogleMap needs a GoogleMap available up in the tree"),t),[r,a]=(0,h.useState)(null);return(0,h.useEffect)(()=>{s&&null===r&&a(new tm(tu(tu({},e),{},{map:s})))},[s]),r}(s);return null!==r?t(r):null});var tp={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},tx={options(e,t){e.setOptions(t)},position(e,t){e.setPosition(t)},zIndex(e,t){e.setZIndex(t)}},tg=(0,h.memo)(function(e){var{children:t,anchor:s,options:r,position:a,zIndex:n,onCloseClick:l,onDomReady:i,onContentChanged:o,onPositionChanged:c,onZindexChanged:d,onLoad:m,onUnmount:u}=e,p=(0,h.useContext)(Z),[x,g]=(0,h.useState)(null),[f,j]=(0,h.useState)(null),[v,b]=(0,h.useState)(null),[y,N]=(0,h.useState)(null),[C,w]=(0,h.useState)(null),[k,S]=(0,h.useState)(null),L=(0,h.useRef)(null);return(0,h.useEffect)(()=>{null!==x&&(x.close(),s?x.open(p,s):x.getPosition()&&x.open(p))},[p,x,s]),(0,h.useEffect)(()=>{r&&null!==x&&x.setOptions(r)},[x,r]),(0,h.useEffect)(()=>{a&&null!==x&&x.setPosition(a)},[a]),(0,h.useEffect)(()=>{"number"==typeof n&&null!==x&&x.setZIndex(n)},[n]),(0,h.useEffect)(()=>{x&&l&&(null!==f&&google.maps.event.removeListener(f),j(google.maps.event.addListener(x,"closeclick",l)))},[l]),(0,h.useEffect)(()=>{x&&i&&(null!==v&&google.maps.event.removeListener(v),b(google.maps.event.addListener(x,"domready",i)))},[i]),(0,h.useEffect)(()=>{x&&o&&(null!==y&&google.maps.event.removeListener(y),N(google.maps.event.addListener(x,"content_changed",o)))},[o]),(0,h.useEffect)(()=>{x&&c&&(null!==C&&google.maps.event.removeListener(C),w(google.maps.event.addListener(x,"position_changed",c)))},[c]),(0,h.useEffect)(()=>{x&&d&&(null!==k&&google.maps.event.removeListener(k),S(google.maps.event.addListener(x,"zindex_changed",d)))},[d]),(0,h.useEffect)(()=>{var e=new google.maps.InfoWindow(r);return g(e),L.current=document.createElement("div"),l&&j(google.maps.event.addListener(e,"closeclick",l)),i&&b(google.maps.event.addListener(e,"domready",i)),o&&N(google.maps.event.addListener(e,"content_changed",o)),c&&w(google.maps.event.addListener(e,"position_changed",c)),d&&S(google.maps.event.addListener(e,"zindex_changed",d)),e.setContent(L.current),a&&e.setPosition(a),n&&e.setZIndex(n),s?e.open(p,s):e.getPosition()?e.open(p):I(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),m&&m(e),()=>{f&&google.maps.event.removeListener(f),y&&google.maps.event.removeListener(y),v&&google.maps.event.removeListener(v),C&&google.maps.event.removeListener(C),k&&google.maps.event.removeListener(k),u&&u(e),e.close()}},[]),L.current?(0,z.createPortal)(h.Children.only(t),L.current):null});class tf extends h.PureComponent{constructor(){super(...arguments),R(this,"registeredEvents",[]),R(this,"containerElement",null),R(this,"state",{infoWindow:null}),R(this,"open",(e,t)=>{t?e.open(this.context,t):e.getPosition()?e.open(this.context):I(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")}),R(this,"setInfoWindowCallback",()=>{null!==this.state.infoWindow&&null!==this.containerElement&&(this.state.infoWindow.setContent(this.containerElement),this.open(this.state.infoWindow,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoWindow))})}componentDidMount(){var e=new google.maps.InfoWindow(this.props.options);this.containerElement=document.createElement("div"),this.registeredEvents=$({updaterMap:tx,eventMap:tp,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({infoWindow:e}),this.setInfoWindowCallback)}componentDidUpdate(e){null!==this.state.infoWindow&&(B(this.registeredEvents),this.registeredEvents=$({updaterMap:tx,eventMap:tp,prevProps:e,nextProps:this.props,instance:this.state.infoWindow}))}componentWillUnmount(){null!==this.state.infoWindow&&(B(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())}render(){return this.containerElement?(0,z.createPortal)(h.Children.only(this.props.children),this.containerElement):null}}function tj(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function tv(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?tj(Object(s),!0).forEach(function(t){R(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):tj(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}R(tf,"contextType",Z);var tb={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},ty={draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},path(e,t){e.setPath(t)},visible(e,t){e.setVisible(t)}},tN={},tC=(0,h.memo)(function(e){var{options:t,draggable:s,editable:r,visible:a,path:n,onDblClick:l,onDragEnd:i,onDragStart:o,onMouseDown:c,onMouseMove:d,onMouseOut:m,onMouseOver:u,onMouseUp:p,onRightClick:x,onClick:g,onDrag:f,onLoad:j,onUnmount:v}=e,b=(0,h.useContext)(Z),[y,N]=(0,h.useState)(null),[C,w]=(0,h.useState)(null),[k,S]=(0,h.useState)(null),[L,P]=(0,h.useState)(null),[M,E]=(0,h.useState)(null),[T,O]=(0,h.useState)(null),[z,A]=(0,h.useState)(null),[R,D]=(0,h.useState)(null),[I,F]=(0,h.useState)(null),[B,$]=(0,h.useState)(null),[U,_]=(0,h.useState)(null),[W,Y]=(0,h.useState)(null);return(0,h.useEffect)(()=>{null!==y&&y.setMap(b)},[b]),(0,h.useEffect)(()=>{void 0!==t&&null!==y&&y.setOptions(t)},[y,t]),(0,h.useEffect)(()=>{void 0!==s&&null!==y&&y.setDraggable(s)},[y,s]),(0,h.useEffect)(()=>{void 0!==r&&null!==y&&y.setEditable(r)},[y,r]),(0,h.useEffect)(()=>{void 0!==a&&null!==y&&y.setVisible(a)},[y,a]),(0,h.useEffect)(()=>{void 0!==n&&null!==y&&y.setPath(n)},[y,n]),(0,h.useEffect)(()=>{y&&l&&(null!==C&&google.maps.event.removeListener(C),w(google.maps.event.addListener(y,"dblclick",l)))},[l]),(0,h.useEffect)(()=>{y&&i&&(null!==k&&google.maps.event.removeListener(k),S(google.maps.event.addListener(y,"dragend",i)))},[i]),(0,h.useEffect)(()=>{y&&o&&(null!==L&&google.maps.event.removeListener(L),P(google.maps.event.addListener(y,"dragstart",o)))},[o]),(0,h.useEffect)(()=>{y&&c&&(null!==M&&google.maps.event.removeListener(M),E(google.maps.event.addListener(y,"mousedown",c)))},[c]),(0,h.useEffect)(()=>{y&&d&&(null!==T&&google.maps.event.removeListener(T),O(google.maps.event.addListener(y,"mousemove",d)))},[d]),(0,h.useEffect)(()=>{y&&m&&(null!==z&&google.maps.event.removeListener(z),A(google.maps.event.addListener(y,"mouseout",m)))},[m]),(0,h.useEffect)(()=>{y&&u&&(null!==R&&google.maps.event.removeListener(R),D(google.maps.event.addListener(y,"mouseover",u)))},[u]),(0,h.useEffect)(()=>{y&&p&&(null!==I&&google.maps.event.removeListener(I),F(google.maps.event.addListener(y,"mouseup",p)))},[p]),(0,h.useEffect)(()=>{y&&x&&(null!==B&&google.maps.event.removeListener(B),$(google.maps.event.addListener(y,"rightclick",x)))},[x]),(0,h.useEffect)(()=>{y&&g&&(null!==U&&google.maps.event.removeListener(U),_(google.maps.event.addListener(y,"click",g)))},[g]),(0,h.useEffect)(()=>{y&&f&&(null!==W&&google.maps.event.removeListener(W),Y(google.maps.event.addListener(y,"drag",f)))},[f]),(0,h.useEffect)(()=>{var e=new google.maps.Polyline(tv(tv({},t||tN),{},{map:b}));return n&&e.setPath(n),void 0!==a&&e.setVisible(a),void 0!==r&&e.setEditable(r),void 0!==s&&e.setDraggable(s),l&&w(google.maps.event.addListener(e,"dblclick",l)),i&&S(google.maps.event.addListener(e,"dragend",i)),o&&P(google.maps.event.addListener(e,"dragstart",o)),c&&E(google.maps.event.addListener(e,"mousedown",c)),d&&O(google.maps.event.addListener(e,"mousemove",d)),m&&A(google.maps.event.addListener(e,"mouseout",m)),u&&D(google.maps.event.addListener(e,"mouseover",u)),p&&F(google.maps.event.addListener(e,"mouseup",p)),x&&$(google.maps.event.addListener(e,"rightclick",x)),g&&_(google.maps.event.addListener(e,"click",g)),f&&Y(google.maps.event.addListener(e,"drag",f)),N(e),j&&j(e),()=>{null!==C&&google.maps.event.removeListener(C),null!==k&&google.maps.event.removeListener(k),null!==L&&google.maps.event.removeListener(L),null!==M&&google.maps.event.removeListener(M),null!==T&&google.maps.event.removeListener(T),null!==z&&google.maps.event.removeListener(z),null!==R&&google.maps.event.removeListener(R),null!==I&&google.maps.event.removeListener(I),null!==B&&google.maps.event.removeListener(B),null!==U&&google.maps.event.removeListener(U),v&&v(e),e.setMap(null)}},[]),null});class tw extends h.PureComponent{constructor(){super(...arguments),R(this,"registeredEvents",[]),R(this,"state",{polyline:null}),R(this,"setPolylineCallback",()=>{null!==this.state.polyline&&this.props.onLoad&&this.props.onLoad(this.state.polyline)})}componentDidMount(){var e=new google.maps.Polyline(tv(tv({},this.props.options),{},{map:this.context}));this.registeredEvents=$({updaterMap:ty,eventMap:tb,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{polyline:e}},this.setPolylineCallback)}componentDidUpdate(e){null!==this.state.polyline&&(B(this.registeredEvents),this.registeredEvents=$({updaterMap:ty,eventMap:tb,prevProps:e,nextProps:this.props,instance:this.state.polyline}))}componentWillUnmount(){null!==this.state.polyline&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),B(this.registeredEvents),this.state.polyline.setMap(null))}render(){return null}}function tk(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function tS(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?tk(Object(s),!0).forEach(function(t){R(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):tk(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}R(tw,"contextType",Z);var tL={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},tP={draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},path(e,t){e.setPath(t)},paths(e,t){e.setPaths(t)},visible(e,t){e.setVisible(t)}},tM=(0,h.memo)(function(e){var{options:t,draggable:s,editable:r,visible:a,path:n,paths:l,onDblClick:i,onDragEnd:o,onDragStart:c,onMouseDown:d,onMouseMove:m,onMouseOut:u,onMouseOver:p,onMouseUp:x,onRightClick:g,onClick:f,onDrag:j,onLoad:v,onUnmount:b,onEdit:y}=e,N=(0,h.useContext)(Z),[C,w]=(0,h.useState)(null),[k,S]=(0,h.useState)(null),[L,P]=(0,h.useState)(null),[M,E]=(0,h.useState)(null),[T,O]=(0,h.useState)(null),[z,A]=(0,h.useState)(null),[R,D]=(0,h.useState)(null),[I,F]=(0,h.useState)(null),[B,$]=(0,h.useState)(null),[U,_]=(0,h.useState)(null),[W,Y]=(0,h.useState)(null),[V,H]=(0,h.useState)(null);return(0,h.useEffect)(()=>{null!==C&&C.setMap(N)},[N]),(0,h.useEffect)(()=>{void 0!==t&&null!==C&&C.setOptions(t)},[C,t]),(0,h.useEffect)(()=>{void 0!==s&&null!==C&&C.setDraggable(s)},[C,s]),(0,h.useEffect)(()=>{void 0!==r&&null!==C&&C.setEditable(r)},[C,r]),(0,h.useEffect)(()=>{void 0!==a&&null!==C&&C.setVisible(a)},[C,a]),(0,h.useEffect)(()=>{void 0!==n&&null!==C&&C.setPath(n)},[C,n]),(0,h.useEffect)(()=>{void 0!==l&&null!==C&&C.setPaths(l)},[C,l]),(0,h.useEffect)(()=>{C&&"function"==typeof i&&(null!==k&&google.maps.event.removeListener(k),S(google.maps.event.addListener(C,"dblclick",i)))},[i]),(0,h.useEffect)(()=>{C&&(google.maps.event.addListener(C.getPath(),"insert_at",()=>{null==y||y(C)}),google.maps.event.addListener(C.getPath(),"set_at",()=>{null==y||y(C)}),google.maps.event.addListener(C.getPath(),"remove_at",()=>{null==y||y(C)}))},[C,y]),(0,h.useEffect)(()=>{C&&"function"==typeof o&&(null!==L&&google.maps.event.removeListener(L),P(google.maps.event.addListener(C,"dragend",o)))},[o]),(0,h.useEffect)(()=>{C&&"function"==typeof c&&(null!==M&&google.maps.event.removeListener(M),E(google.maps.event.addListener(C,"dragstart",c)))},[c]),(0,h.useEffect)(()=>{C&&"function"==typeof d&&(null!==T&&google.maps.event.removeListener(T),O(google.maps.event.addListener(C,"mousedown",d)))},[d]),(0,h.useEffect)(()=>{C&&"function"==typeof m&&(null!==z&&google.maps.event.removeListener(z),A(google.maps.event.addListener(C,"mousemove",m)))},[m]),(0,h.useEffect)(()=>{C&&"function"==typeof u&&(null!==R&&google.maps.event.removeListener(R),D(google.maps.event.addListener(C,"mouseout",u)))},[u]),(0,h.useEffect)(()=>{C&&"function"==typeof p&&(null!==I&&google.maps.event.removeListener(I),F(google.maps.event.addListener(C,"mouseover",p)))},[p]),(0,h.useEffect)(()=>{C&&"function"==typeof x&&(null!==B&&google.maps.event.removeListener(B),$(google.maps.event.addListener(C,"mouseup",x)))},[x]),(0,h.useEffect)(()=>{C&&"function"==typeof g&&(null!==U&&google.maps.event.removeListener(U),_(google.maps.event.addListener(C,"rightclick",g)))},[g]),(0,h.useEffect)(()=>{C&&"function"==typeof f&&(null!==W&&google.maps.event.removeListener(W),Y(google.maps.event.addListener(C,"click",f)))},[f]),(0,h.useEffect)(()=>{C&&"function"==typeof j&&(null!==V&&google.maps.event.removeListener(V),H(google.maps.event.addListener(C,"drag",j)))},[j]),(0,h.useEffect)(()=>{var e=new google.maps.Polygon(tS(tS({},t),{},{map:N}));return n&&e.setPath(n),l&&e.setPaths(l),void 0!==a&&e.setVisible(a),void 0!==r&&e.setEditable(r),void 0!==s&&e.setDraggable(s),i&&S(google.maps.event.addListener(e,"dblclick",i)),o&&P(google.maps.event.addListener(e,"dragend",o)),c&&E(google.maps.event.addListener(e,"dragstart",c)),d&&O(google.maps.event.addListener(e,"mousedown",d)),m&&A(google.maps.event.addListener(e,"mousemove",m)),u&&D(google.maps.event.addListener(e,"mouseout",u)),p&&F(google.maps.event.addListener(e,"mouseover",p)),x&&$(google.maps.event.addListener(e,"mouseup",x)),g&&_(google.maps.event.addListener(e,"rightclick",g)),f&&Y(google.maps.event.addListener(e,"click",f)),j&&H(google.maps.event.addListener(e,"drag",j)),w(e),v&&v(e),()=>{null!==k&&google.maps.event.removeListener(k),null!==L&&google.maps.event.removeListener(L),null!==M&&google.maps.event.removeListener(M),null!==T&&google.maps.event.removeListener(T),null!==z&&google.maps.event.removeListener(z),null!==R&&google.maps.event.removeListener(R),null!==I&&google.maps.event.removeListener(I),null!==B&&google.maps.event.removeListener(B),null!==U&&google.maps.event.removeListener(U),null!==W&&google.maps.event.removeListener(W),b&&b(e),e.setMap(null)}},[]),null});class tE extends h.PureComponent{constructor(){super(...arguments),R(this,"registeredEvents",[])}componentDidMount(){var e=this.props.options||{};this.polygon=new google.maps.Polygon(e),this.polygon.setMap(this.context),this.registeredEvents=$({updaterMap:tP,eventMap:tL,prevProps:{},nextProps:this.props,instance:this.polygon}),this.props.onLoad&&this.props.onLoad(this.polygon)}componentDidUpdate(e){this.polygon&&(B(this.registeredEvents),this.registeredEvents=$({updaterMap:tP,eventMap:tL,prevProps:e,nextProps:this.props,instance:this.polygon}))}componentWillUnmount(){this.polygon&&(this.props.onUnmount&&this.props.onUnmount(this.polygon),B(this.registeredEvents),this.polygon&&this.polygon.setMap(null))}render(){return null}}function tT(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function tO(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?tT(Object(s),!0).forEach(function(t){R(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):tT(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}R(tE,"contextType",Z);var tz={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},tA={bounds(e,t){e.setBounds(t)},draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},visible(e,t){e.setVisible(t)}};(0,h.memo)(function(e){var{options:t,bounds:s,draggable:r,editable:a,visible:n,onDblClick:l,onDragEnd:i,onDragStart:o,onMouseDown:c,onMouseMove:d,onMouseOut:m,onMouseOver:u,onMouseUp:p,onRightClick:x,onClick:g,onDrag:f,onBoundsChanged:j,onLoad:v,onUnmount:b}=e,y=(0,h.useContext)(Z),[N,C]=(0,h.useState)(null),[w,k]=(0,h.useState)(null),[S,L]=(0,h.useState)(null),[P,M]=(0,h.useState)(null),[E,T]=(0,h.useState)(null),[O,z]=(0,h.useState)(null),[A,R]=(0,h.useState)(null),[D,I]=(0,h.useState)(null),[F,B]=(0,h.useState)(null),[$,U]=(0,h.useState)(null),[_,W]=(0,h.useState)(null),[Y,V]=(0,h.useState)(null),[H,G]=(0,h.useState)(null);return(0,h.useEffect)(()=>{null!==N&&N.setMap(y)},[y]),(0,h.useEffect)(()=>{void 0!==t&&null!==N&&N.setOptions(t)},[N,t]),(0,h.useEffect)(()=>{void 0!==r&&null!==N&&N.setDraggable(r)},[N,r]),(0,h.useEffect)(()=>{void 0!==a&&null!==N&&N.setEditable(a)},[N,a]),(0,h.useEffect)(()=>{void 0!==n&&null!==N&&N.setVisible(n)},[N,n]),(0,h.useEffect)(()=>{void 0!==s&&null!==N&&N.setBounds(s)},[N,s]),(0,h.useEffect)(()=>{N&&l&&(null!==w&&google.maps.event.removeListener(w),k(google.maps.event.addListener(N,"dblclick",l)))},[l]),(0,h.useEffect)(()=>{N&&i&&(null!==S&&google.maps.event.removeListener(S),L(google.maps.event.addListener(N,"dragend",i)))},[i]),(0,h.useEffect)(()=>{N&&o&&(null!==P&&google.maps.event.removeListener(P),M(google.maps.event.addListener(N,"dragstart",o)))},[o]),(0,h.useEffect)(()=>{N&&c&&(null!==E&&google.maps.event.removeListener(E),T(google.maps.event.addListener(N,"mousedown",c)))},[c]),(0,h.useEffect)(()=>{N&&d&&(null!==O&&google.maps.event.removeListener(O),z(google.maps.event.addListener(N,"mousemove",d)))},[d]),(0,h.useEffect)(()=>{N&&m&&(null!==A&&google.maps.event.removeListener(A),R(google.maps.event.addListener(N,"mouseout",m)))},[m]),(0,h.useEffect)(()=>{N&&u&&(null!==D&&google.maps.event.removeListener(D),I(google.maps.event.addListener(N,"mouseover",u)))},[u]),(0,h.useEffect)(()=>{N&&p&&(null!==F&&google.maps.event.removeListener(F),B(google.maps.event.addListener(N,"mouseup",p)))},[p]),(0,h.useEffect)(()=>{N&&x&&(null!==$&&google.maps.event.removeListener($),U(google.maps.event.addListener(N,"rightclick",x)))},[x]),(0,h.useEffect)(()=>{N&&g&&(null!==_&&google.maps.event.removeListener(_),W(google.maps.event.addListener(N,"click",g)))},[g]),(0,h.useEffect)(()=>{N&&f&&(null!==Y&&google.maps.event.removeListener(Y),V(google.maps.event.addListener(N,"drag",f)))},[f]),(0,h.useEffect)(()=>{N&&j&&(null!==H&&google.maps.event.removeListener(H),G(google.maps.event.addListener(N,"bounds_changed",j)))},[j]),(0,h.useEffect)(()=>{var e=new google.maps.Rectangle(tO(tO({},t),{},{map:y}));return void 0!==n&&e.setVisible(n),void 0!==a&&e.setEditable(a),void 0!==r&&e.setDraggable(r),void 0!==s&&e.setBounds(s),l&&k(google.maps.event.addListener(e,"dblclick",l)),i&&L(google.maps.event.addListener(e,"dragend",i)),o&&M(google.maps.event.addListener(e,"dragstart",o)),c&&T(google.maps.event.addListener(e,"mousedown",c)),d&&z(google.maps.event.addListener(e,"mousemove",d)),m&&R(google.maps.event.addListener(e,"mouseout",m)),u&&I(google.maps.event.addListener(e,"mouseover",u)),p&&B(google.maps.event.addListener(e,"mouseup",p)),x&&U(google.maps.event.addListener(e,"rightclick",x)),g&&W(google.maps.event.addListener(e,"click",g)),f&&V(google.maps.event.addListener(e,"drag",f)),j&&G(google.maps.event.addListener(e,"bounds_changed",j)),C(e),v&&v(e),()=>{null!==w&&google.maps.event.removeListener(w),null!==S&&google.maps.event.removeListener(S),null!==P&&google.maps.event.removeListener(P),null!==E&&google.maps.event.removeListener(E),null!==O&&google.maps.event.removeListener(O),null!==A&&google.maps.event.removeListener(A),null!==D&&google.maps.event.removeListener(D),null!==F&&google.maps.event.removeListener(F),null!==$&&google.maps.event.removeListener($),null!==_&&google.maps.event.removeListener(_),null!==Y&&google.maps.event.removeListener(Y),null!==H&&google.maps.event.removeListener(H),b&&b(e),e.setMap(null)}},[]),null});class tR extends h.PureComponent{constructor(){super(...arguments),R(this,"registeredEvents",[]),R(this,"state",{rectangle:null}),R(this,"setRectangleCallback",()=>{null!==this.state.rectangle&&this.props.onLoad&&this.props.onLoad(this.state.rectangle)})}componentDidMount(){var e=new google.maps.Rectangle(tO(tO({},this.props.options),{},{map:this.context}));this.registeredEvents=$({updaterMap:tA,eventMap:tz,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{rectangle:e}},this.setRectangleCallback)}componentDidUpdate(e){null!==this.state.rectangle&&(B(this.registeredEvents),this.registeredEvents=$({updaterMap:tA,eventMap:tz,prevProps:e,nextProps:this.props,instance:this.state.rectangle}))}componentWillUnmount(){null!==this.state.rectangle&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),B(this.registeredEvents),this.state.rectangle.setMap(null))}render(){return null}}function tD(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function tI(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?tD(Object(s),!0).forEach(function(t){R(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):tD(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}R(tR,"contextType",Z);var tZ={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},tF={center(e,t){e.setCenter(t)},draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},radius(e,t){e.setRadius(t)},visible(e,t){e.setVisible(t)}},tB={};(0,h.memo)(function(e){var{options:t,center:s,radius:r,draggable:a,editable:n,visible:l,onDblClick:i,onDragEnd:o,onDragStart:c,onMouseDown:d,onMouseMove:m,onMouseOut:u,onMouseOver:p,onMouseUp:x,onRightClick:g,onClick:f,onDrag:j,onCenterChanged:v,onRadiusChanged:b,onLoad:y,onUnmount:N}=e,C=(0,h.useContext)(Z),[w,k]=(0,h.useState)(null),[S,L]=(0,h.useState)(null),[P,M]=(0,h.useState)(null),[E,T]=(0,h.useState)(null),[O,z]=(0,h.useState)(null),[A,R]=(0,h.useState)(null),[D,I]=(0,h.useState)(null),[F,B]=(0,h.useState)(null),[$,U]=(0,h.useState)(null),[_,W]=(0,h.useState)(null),[Y,V]=(0,h.useState)(null),[H,G]=(0,h.useState)(null),[J,X]=(0,h.useState)(null),[q,K]=(0,h.useState)(null);return(0,h.useEffect)(()=>{null!==w&&w.setMap(C)},[C]),(0,h.useEffect)(()=>{void 0!==t&&null!==w&&w.setOptions(t)},[w,t]),(0,h.useEffect)(()=>{void 0!==a&&null!==w&&w.setDraggable(a)},[w,a]),(0,h.useEffect)(()=>{void 0!==n&&null!==w&&w.setEditable(n)},[w,n]),(0,h.useEffect)(()=>{void 0!==l&&null!==w&&w.setVisible(l)},[w,l]),(0,h.useEffect)(()=>{"number"==typeof r&&null!==w&&w.setRadius(r)},[w,r]),(0,h.useEffect)(()=>{void 0!==s&&null!==w&&w.setCenter(s)},[w,s]),(0,h.useEffect)(()=>{w&&i&&(null!==S&&google.maps.event.removeListener(S),L(google.maps.event.addListener(w,"dblclick",i)))},[i]),(0,h.useEffect)(()=>{w&&o&&(null!==P&&google.maps.event.removeListener(P),M(google.maps.event.addListener(w,"dragend",o)))},[o]),(0,h.useEffect)(()=>{w&&c&&(null!==E&&google.maps.event.removeListener(E),T(google.maps.event.addListener(w,"dragstart",c)))},[c]),(0,h.useEffect)(()=>{w&&d&&(null!==O&&google.maps.event.removeListener(O),z(google.maps.event.addListener(w,"mousedown",d)))},[d]),(0,h.useEffect)(()=>{w&&m&&(null!==A&&google.maps.event.removeListener(A),R(google.maps.event.addListener(w,"mousemove",m)))},[m]),(0,h.useEffect)(()=>{w&&u&&(null!==D&&google.maps.event.removeListener(D),I(google.maps.event.addListener(w,"mouseout",u)))},[u]),(0,h.useEffect)(()=>{w&&p&&(null!==F&&google.maps.event.removeListener(F),B(google.maps.event.addListener(w,"mouseover",p)))},[p]),(0,h.useEffect)(()=>{w&&x&&(null!==$&&google.maps.event.removeListener($),U(google.maps.event.addListener(w,"mouseup",x)))},[x]),(0,h.useEffect)(()=>{w&&g&&(null!==_&&google.maps.event.removeListener(_),W(google.maps.event.addListener(w,"rightclick",g)))},[g]),(0,h.useEffect)(()=>{w&&f&&(null!==Y&&google.maps.event.removeListener(Y),V(google.maps.event.addListener(w,"click",f)))},[f]),(0,h.useEffect)(()=>{w&&j&&(null!==H&&google.maps.event.removeListener(H),G(google.maps.event.addListener(w,"drag",j)))},[j]),(0,h.useEffect)(()=>{w&&v&&(null!==J&&google.maps.event.removeListener(J),X(google.maps.event.addListener(w,"center_changed",v)))},[f]),(0,h.useEffect)(()=>{w&&b&&(null!==q&&google.maps.event.removeListener(q),K(google.maps.event.addListener(w,"radius_changed",b)))},[b]),(0,h.useEffect)(()=>{var e=new google.maps.Circle(tI(tI({},t||tB),{},{map:C}));return"number"==typeof r&&e.setRadius(r),void 0!==s&&e.setCenter(s),"number"==typeof r&&e.setRadius(r),void 0!==l&&e.setVisible(l),void 0!==n&&e.setEditable(n),void 0!==a&&e.setDraggable(a),i&&L(google.maps.event.addListener(e,"dblclick",i)),o&&M(google.maps.event.addListener(e,"dragend",o)),c&&T(google.maps.event.addListener(e,"dragstart",c)),d&&z(google.maps.event.addListener(e,"mousedown",d)),m&&R(google.maps.event.addListener(e,"mousemove",m)),u&&I(google.maps.event.addListener(e,"mouseout",u)),p&&B(google.maps.event.addListener(e,"mouseover",p)),x&&U(google.maps.event.addListener(e,"mouseup",x)),g&&W(google.maps.event.addListener(e,"rightclick",g)),f&&V(google.maps.event.addListener(e,"click",f)),j&&G(google.maps.event.addListener(e,"drag",j)),v&&X(google.maps.event.addListener(e,"center_changed",v)),b&&K(google.maps.event.addListener(e,"radius_changed",b)),k(e),y&&y(e),()=>{null!==S&&google.maps.event.removeListener(S),null!==P&&google.maps.event.removeListener(P),null!==E&&google.maps.event.removeListener(E),null!==O&&google.maps.event.removeListener(O),null!==A&&google.maps.event.removeListener(A),null!==D&&google.maps.event.removeListener(D),null!==F&&google.maps.event.removeListener(F),null!==$&&google.maps.event.removeListener($),null!==_&&google.maps.event.removeListener(_),null!==Y&&google.maps.event.removeListener(Y),null!==J&&google.maps.event.removeListener(J),null!==q&&google.maps.event.removeListener(q),N&&N(e),e.setMap(null)}},[]),null});class t$ extends h.PureComponent{constructor(){super(...arguments),R(this,"registeredEvents",[]),R(this,"state",{circle:null}),R(this,"setCircleCallback",()=>{null!==this.state.circle&&this.props.onLoad&&this.props.onLoad(this.state.circle)})}componentDidMount(){var e=new google.maps.Circle(tI(tI({},this.props.options),{},{map:this.context}));this.registeredEvents=$({updaterMap:tF,eventMap:tZ,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{circle:e}},this.setCircleCallback)}componentDidUpdate(e){null!==this.state.circle&&(B(this.registeredEvents),this.registeredEvents=$({updaterMap:tF,eventMap:tZ,prevProps:e,nextProps:this.props,instance:this.state.circle}))}componentWillUnmount(){if(null!==this.state.circle){var e;this.props.onUnmount&&this.props.onUnmount(this.state.circle),B(this.registeredEvents),null===(e=this.state.circle)||void 0===e||e.setMap(null)}}render(){return null}}function tU(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function t_(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?tU(Object(s),!0).forEach(function(t){R(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):tU(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}R(t$,"contextType",Z);var tW={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},tY={add(e,t){e.add(t)},addgeojson(e,t,s){e.addGeoJson(t,s)},contains(e,t){e.contains(t)},foreach(e,t){e.forEach(t)},loadgeojson(e,t,s,r){e.loadGeoJson(t,s,r)},overridestyle(e,t,s){e.overrideStyle(t,s)},remove(e,t){e.remove(t)},revertstyle(e,t){e.revertStyle(t)},controlposition(e,t){e.setControlPosition(t)},controls(e,t){e.setControls(t)},drawingmode(e,t){e.setDrawingMode(t)},map(e,t){e.setMap(t)},style(e,t){e.setStyle(t)},togeojson(e,t){e.toGeoJson(t)}};(0,h.memo)(function(e){var{options:t,onClick:s,onDblClick:r,onMouseDown:a,onMouseMove:n,onMouseOut:l,onMouseOver:i,onMouseUp:o,onRightClick:c,onAddFeature:d,onRemoveFeature:m,onRemoveProperty:u,onSetGeometry:p,onSetProperty:x,onLoad:g,onUnmount:f}=e,j=(0,h.useContext)(Z),[v,b]=(0,h.useState)(null),[y,N]=(0,h.useState)(null),[C,w]=(0,h.useState)(null),[k,S]=(0,h.useState)(null),[L,P]=(0,h.useState)(null),[M,E]=(0,h.useState)(null),[T,O]=(0,h.useState)(null),[z,A]=(0,h.useState)(null),[R,D]=(0,h.useState)(null),[I,F]=(0,h.useState)(null),[B,$]=(0,h.useState)(null),[U,_]=(0,h.useState)(null),[W,Y]=(0,h.useState)(null),[V,H]=(0,h.useState)(null);return(0,h.useEffect)(()=>{null!==v&&v.setMap(j)},[j]),(0,h.useEffect)(()=>{v&&r&&(null!==y&&google.maps.event.removeListener(y),N(google.maps.event.addListener(v,"dblclick",r)))},[r]),(0,h.useEffect)(()=>{v&&a&&(null!==C&&google.maps.event.removeListener(C),w(google.maps.event.addListener(v,"mousedown",a)))},[a]),(0,h.useEffect)(()=>{v&&n&&(null!==k&&google.maps.event.removeListener(k),S(google.maps.event.addListener(v,"mousemove",n)))},[n]),(0,h.useEffect)(()=>{v&&l&&(null!==L&&google.maps.event.removeListener(L),P(google.maps.event.addListener(v,"mouseout",l)))},[l]),(0,h.useEffect)(()=>{v&&i&&(null!==M&&google.maps.event.removeListener(M),E(google.maps.event.addListener(v,"mouseover",i)))},[i]),(0,h.useEffect)(()=>{v&&o&&(null!==T&&google.maps.event.removeListener(T),O(google.maps.event.addListener(v,"mouseup",o)))},[o]),(0,h.useEffect)(()=>{v&&c&&(null!==z&&google.maps.event.removeListener(z),A(google.maps.event.addListener(v,"rightclick",c)))},[c]),(0,h.useEffect)(()=>{v&&s&&(null!==R&&google.maps.event.removeListener(R),D(google.maps.event.addListener(v,"click",s)))},[s]),(0,h.useEffect)(()=>{v&&d&&(null!==I&&google.maps.event.removeListener(I),F(google.maps.event.addListener(v,"addfeature",d)))},[d]),(0,h.useEffect)(()=>{v&&m&&(null!==B&&google.maps.event.removeListener(B),$(google.maps.event.addListener(v,"removefeature",m)))},[m]),(0,h.useEffect)(()=>{v&&u&&(null!==U&&google.maps.event.removeListener(U),_(google.maps.event.addListener(v,"removeproperty",u)))},[u]),(0,h.useEffect)(()=>{v&&p&&(null!==W&&google.maps.event.removeListener(W),Y(google.maps.event.addListener(v,"setgeometry",p)))},[p]),(0,h.useEffect)(()=>{v&&x&&(null!==V&&google.maps.event.removeListener(V),H(google.maps.event.addListener(v,"setproperty",x)))},[x]),(0,h.useEffect)(()=>{if(null!==j){var e=new google.maps.Data(t_(t_({},t),{},{map:j}));r&&N(google.maps.event.addListener(e,"dblclick",r)),a&&w(google.maps.event.addListener(e,"mousedown",a)),n&&S(google.maps.event.addListener(e,"mousemove",n)),l&&P(google.maps.event.addListener(e,"mouseout",l)),i&&E(google.maps.event.addListener(e,"mouseover",i)),o&&O(google.maps.event.addListener(e,"mouseup",o)),c&&A(google.maps.event.addListener(e,"rightclick",c)),s&&D(google.maps.event.addListener(e,"click",s)),d&&F(google.maps.event.addListener(e,"addfeature",d)),m&&$(google.maps.event.addListener(e,"removefeature",m)),u&&_(google.maps.event.addListener(e,"removeproperty",u)),p&&Y(google.maps.event.addListener(e,"setgeometry",p)),x&&H(google.maps.event.addListener(e,"setproperty",x)),b(e),g&&g(e)}return()=>{v&&(null!==y&&google.maps.event.removeListener(y),null!==C&&google.maps.event.removeListener(C),null!==k&&google.maps.event.removeListener(k),null!==L&&google.maps.event.removeListener(L),null!==M&&google.maps.event.removeListener(M),null!==T&&google.maps.event.removeListener(T),null!==z&&google.maps.event.removeListener(z),null!==R&&google.maps.event.removeListener(R),null!==I&&google.maps.event.removeListener(I),null!==B&&google.maps.event.removeListener(B),null!==U&&google.maps.event.removeListener(U),null!==W&&google.maps.event.removeListener(W),null!==V&&google.maps.event.removeListener(V),f&&f(v),v.setMap(null))}},[]),null});class tV extends h.PureComponent{constructor(){super(...arguments),R(this,"registeredEvents",[]),R(this,"state",{data:null}),R(this,"setDataCallback",()=>{null!==this.state.data&&this.props.onLoad&&this.props.onLoad(this.state.data)})}componentDidMount(){if(null!==this.context){var e=new google.maps.Data(t_(t_({},this.props.options),{},{map:this.context}));this.registeredEvents=$({updaterMap:tY,eventMap:tW,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({data:e}),this.setDataCallback)}}componentDidUpdate(e){null!==this.state.data&&(B(this.registeredEvents),this.registeredEvents=$({updaterMap:tY,eventMap:tW,prevProps:e,nextProps:this.props,instance:this.state.data}))}componentWillUnmount(){null!==this.state.data&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),B(this.registeredEvents),this.state.data&&this.state.data.setMap(null))}render(){return null}}function tH(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function tG(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?tH(Object(s),!0).forEach(function(t){R(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):tH(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}R(tV,"contextType",Z);var tJ={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},tX={options(e,t){e.setOptions(t)},url(e,t){e.setUrl(t)},zIndex(e,t){e.setZIndex(t)}};class tq extends h.PureComponent{constructor(){super(...arguments),R(this,"registeredEvents",[]),R(this,"state",{kmlLayer:null}),R(this,"setKmlLayerCallback",()=>{null!==this.state.kmlLayer&&this.props.onLoad&&this.props.onLoad(this.state.kmlLayer)})}componentDidMount(){var e=new google.maps.KmlLayer(tG(tG({},this.props.options),{},{map:this.context}));this.registeredEvents=$({updaterMap:tX,eventMap:tJ,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{kmlLayer:e}},this.setKmlLayerCallback)}componentDidUpdate(e){null!==this.state.kmlLayer&&(B(this.registeredEvents),this.registeredEvents=$({updaterMap:tX,eventMap:tJ,prevProps:e,nextProps:this.props,instance:this.state.kmlLayer}))}componentWillUnmount(){null!==this.state.kmlLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),B(this.registeredEvents),this.state.kmlLayer.setMap(null))}render(){return null}}function tK(e,t){return"function"==typeof t?t(e.offsetWidth,e.offsetHeight):{x:0,y:0}}function tQ(e,t,s,r){var a,n,l,i,o,c,d;return void 0!==s?(n=s instanceof(a=google.maps.LatLngBounds)?s:(c=s,new a(new google.maps.LatLng(c.ne.lat,c.ne.lng),new google.maps.LatLng(c.sw.lat,c.sw.lng))),l=e&&e.fromLatLngToDivPixel(n.getNorthEast()),i=e&&e.fromLatLngToDivPixel(n.getSouthWest()),l&&i?{left:"".concat(i.x+t.x,"px"),top:"".concat(l.y+t.y,"px"),width:"".concat(l.x-i.x-t.x,"px"),height:"".concat(i.y-l.y-t.y,"px")}:{left:"-9999px",top:"-9999px"}):function(e,t,s){var r=e&&e.fromLatLngToDivPixel(s);if(r){var{x:a,y:n}=r;return{left:"".concat(a+t.x,"px"),top:"".concat(n+t.y,"px")}}return{left:"-9999px",top:"-9999px"}}(e,t,r instanceof(o=google.maps.LatLng)?r:new o((d=r).lat,d.lng))}function t0(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function t1(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function t2(e){return e?(e instanceof google.maps.LatLng?e:new google.maps.LatLng(e.lat,e.lng))+"":""}function t4(e){return e?(e instanceof google.maps.LatLngBounds?e:new google.maps.LatLngBounds(new google.maps.LatLng(e.south,e.east),new google.maps.LatLng(e.north,e.west)))+"":""}R(tq,"contextType",Z),(0,h.memo)(function(e){var{position:t,bounds:s,mapPaneName:r,zIndex:a,onLoad:n,onUnmount:l,getPixelPositionOffset:i,children:o}=e,c=(0,h.useContext)(Z),d=(0,h.useMemo)(()=>{var e=document.createElement("div");return e.style.position="absolute",e},[]),m=(0,h.useMemo)(()=>(function(e,t,s,r,a){class n extends google.maps.OverlayView{constructor(e,t,s,r){super(),this.container=e,this.pane=t,this.position=s,this.bounds=r}onAdd(){var e,t=null===(e=this.getPanes())||void 0===e?void 0:e[this.pane];null==t||t.appendChild(this.container)}draw(){for(var[e,t]of Object.entries(tQ(this.getProjection(),function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?t0(Object(s),!0).forEach(function(t){R(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):t0(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}({},this.container?tK(this.container,a):{x:0,y:0}),this.bounds,this.position)))this.container.style[e]=t}onRemove(){null!==this.container.parentNode&&this.container.parentNode.removeChild(this.container)}}return new n(e,t,s,r)})(d,r,t,s,i),[d,r,t,s]);return(0,h.useEffect)(()=>(null==n||n(m),null==m||m.setMap(c),()=>{null==l||l(m),null==m||m.setMap(null)}),[c,m]),(0,h.useEffect)(()=>{d.style.zIndex="".concat(a)},[a,d]),z.createPortal(o,d)});class t5 extends h.PureComponent{constructor(e){super(e),R(this,"state",{paneEl:null,containerStyle:{position:"absolute"}}),R(this,"updatePane",()=>{var e=this.props.mapPaneName,t=this.overlayView.getPanes();I(!!e,"OverlayView requires props.mapPaneName but got %s",e),t?this.setState({paneEl:t[e]}):this.setState({paneEl:null})}),R(this,"onAdd",()=>{var e,t;this.updatePane(),null===(e=(t=this.props).onLoad)||void 0===e||e.call(t,this.overlayView)}),R(this,"onPositionElement",()=>{var e,t,s,r,a=tQ(this.overlayView.getProjection(),function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?t1(Object(s),!0).forEach(function(t){R(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):t1(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}({x:0,y:0},this.containerRef.current?tK(this.containerRef.current,this.props.getPixelPositionOffset):{}),this.props.bounds,this.props.position);!function(e,t){return e.left===t.left&&e.top===t.top&&e.width===t.height&&e.height===t.height}(a,{left:this.state.containerStyle.left,top:this.state.containerStyle.top,width:this.state.containerStyle.width,height:this.state.containerStyle.height})&&this.setState({containerStyle:{top:null!==(e=a.top)&&void 0!==e?e:0,left:null!==(t=a.left)&&void 0!==t?t:0,width:null!==(s=a.width)&&void 0!==s?s:0,height:null!==(r=a.height)&&void 0!==r?r:0,position:"absolute"}})}),R(this,"draw",()=>{this.onPositionElement()}),R(this,"onRemove",()=>{var e,t;this.setState(()=>({paneEl:null})),null===(e=(t=this.props).onUnmount)||void 0===e||e.call(t,this.overlayView)}),this.containerRef=(0,h.createRef)();var t=new google.maps.OverlayView;t.onAdd=this.onAdd,t.draw=this.draw,t.onRemove=this.onRemove,this.overlayView=t}componentDidMount(){this.overlayView.setMap(this.context)}componentDidUpdate(e){var t=t2(e.position),s=t2(this.props.position),r=t4(e.bounds),a=t4(this.props.bounds);(t!==s||r!==a)&&this.overlayView.draw(),e.mapPaneName!==this.props.mapPaneName&&this.updatePane()}componentWillUnmount(){this.overlayView.setMap(null)}render(){var e=this.state.paneEl;return e?z.createPortal((0,m.jsx)("div",{ref:this.containerRef,style:this.state.containerStyle,children:h.Children.only(this.props.children)}),e):null}}function t6(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function t3(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?t6(Object(s),!0).forEach(function(t){R(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):t6(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}R(t5,"FLOAT_PANE","floatPane"),R(t5,"MAP_PANE","mapPane"),R(t5,"MARKER_LAYER","markerLayer"),R(t5,"OVERLAY_LAYER","overlayLayer"),R(t5,"OVERLAY_MOUSE_TARGET","overlayMouseTarget"),R(t5,"contextType",Z);var t8={onDblClick:"dblclick",onClick:"click"},t7={opacity(e,t){e.setOpacity(t)}};(0,h.memo)(function(e){var{url:t,bounds:s,options:r,visible:a}=e,n=(0,h.useContext)(Z),l=new google.maps.LatLngBounds(new google.maps.LatLng(s.south,s.west),new google.maps.LatLng(s.north,s.east)),i=(0,h.useMemo)(()=>new google.maps.GroundOverlay(t,l,r),[]);return(0,h.useEffect)(()=>{null!==i&&i.setMap(n)},[n]),(0,h.useEffect)(()=>{void 0!==t&&null!==i&&(i.set("url",t),i.setMap(n))},[i,t]),(0,h.useEffect)(()=>{void 0!==a&&null!==i&&i.setOpacity(a?1:0)},[i,a]),(0,h.useEffect)(()=>{var e=new google.maps.LatLngBounds(new google.maps.LatLng(s.south,s.west),new google.maps.LatLng(s.north,s.east));void 0!==s&&null!==i&&(i.set("bounds",e),i.setMap(n))},[i,s]),null});class t9 extends h.PureComponent{constructor(){super(...arguments),R(this,"registeredEvents",[]),R(this,"state",{groundOverlay:null}),R(this,"setGroundOverlayCallback",()=>{null!==this.state.groundOverlay&&this.props.onLoad&&this.props.onLoad(this.state.groundOverlay)})}componentDidMount(){I(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var e=new google.maps.GroundOverlay(this.props.url,this.props.bounds,t3(t3({},this.props.options),{},{map:this.context}));this.registeredEvents=$({updaterMap:t7,eventMap:t8,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{groundOverlay:e}},this.setGroundOverlayCallback)}componentDidUpdate(e){null!==this.state.groundOverlay&&(B(this.registeredEvents),this.registeredEvents=$({updaterMap:t7,eventMap:t8,prevProps:e,nextProps:this.props,instance:this.state.groundOverlay}))}componentWillUnmount(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))}render(){return null}}function se(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function st(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?se(Object(s),!0).forEach(function(t){R(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):se(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}R(t9,"defaultProps",{onLoad:function(){}}),R(t9,"contextType",Z);var ss={},sr={data(e,t){e.setData(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)}};(0,h.memo)(function(e){var{data:t,onLoad:s,onUnmount:r,options:a}=e,n=(0,h.useContext)(Z),[l,i]=(0,h.useState)(null);return(0,h.useEffect)(()=>{google.maps.visualization||I(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)},[]),(0,h.useEffect)(()=>{I(!!t,"data property is required in HeatmapLayer %s",t)},[t]),(0,h.useEffect)(()=>{null!==l&&l.setMap(n)},[n]),(0,h.useEffect)(()=>{a&&null!==l&&l.setOptions(a)},[l,a]),(0,h.useEffect)(()=>{var e=new google.maps.visualization.HeatmapLayer(st(st({},a),{},{data:t,map:n}));return i(e),s&&s(e),()=>{null!==l&&(r&&r(l),l.setMap(null))}},[]),null});class sa extends h.PureComponent{constructor(){super(...arguments),R(this,"registeredEvents",[]),R(this,"state",{heatmapLayer:null}),R(this,"setHeatmapLayerCallback",()=>{null!==this.state.heatmapLayer&&this.props.onLoad&&this.props.onLoad(this.state.heatmapLayer)})}componentDidMount(){I(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),I(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var e=new google.maps.visualization.HeatmapLayer(st(st({},this.props.options),{},{data:this.props.data,map:this.context}));this.registeredEvents=$({updaterMap:sr,eventMap:ss,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{heatmapLayer:e}},this.setHeatmapLayerCallback)}componentDidUpdate(e){B(this.registeredEvents),this.registeredEvents=$({updaterMap:sr,eventMap:ss,prevProps:e,nextProps:this.props,instance:this.state.heatmapLayer})}componentWillUnmount(){null!==this.state.heatmapLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),B(this.registeredEvents),this.state.heatmapLayer.setMap(null))}render(){return null}}R(sa,"contextType",Z);var sn={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},sl={register(e,t,s){e.registerPanoProvider(t,s)},links(e,t){e.setLinks(t)},motionTracking(e,t){e.setMotionTracking(t)},options(e,t){e.setOptions(t)},pano(e,t){e.setPano(t)},position(e,t){e.setPosition(t)},pov(e,t){e.setPov(t)},visible(e,t){e.setVisible(t)},zoom(e,t){e.setZoom(t)}};class si extends h.PureComponent{constructor(){super(...arguments),R(this,"registeredEvents",[]),R(this,"state",{streetViewPanorama:null}),R(this,"setStreetViewPanoramaCallback",()=>{null!==this.state.streetViewPanorama&&this.props.onLoad&&this.props.onLoad(this.state.streetViewPanorama)})}componentDidMount(){var e,t,s=null!==(e=null===(t=this.context)||void 0===t?void 0:t.getStreetView())&&void 0!==e?e:null;this.registeredEvents=$({updaterMap:sl,eventMap:sn,prevProps:{},nextProps:this.props,instance:s}),this.setState(()=>({streetViewPanorama:s}),this.setStreetViewPanoramaCallback)}componentDidUpdate(e){null!==this.state.streetViewPanorama&&(B(this.registeredEvents),this.registeredEvents=$({updaterMap:sl,eventMap:sn,prevProps:e,nextProps:this.props,instance:this.state.streetViewPanorama}))}componentWillUnmount(){null!==this.state.streetViewPanorama&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),B(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))}render(){return null}}R(si,"contextType",Z);class so extends h.PureComponent{constructor(){super(...arguments),R(this,"state",{streetViewService:null}),R(this,"setStreetViewServiceCallback",()=>{null!==this.state.streetViewService&&this.props.onLoad&&this.props.onLoad(this.state.streetViewService)})}componentDidMount(){var e=new google.maps.StreetViewService;this.setState(function(){return{streetViewService:e}},this.setStreetViewServiceCallback)}componentWillUnmount(){null!==this.state.streetViewService&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)}render(){return null}}R(so,"contextType",Z);var sc={onDirectionsChanged:"directions_changed"},sd={directions(e,t){e.setDirections(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},panel(e,t){e.setPanel(t)},routeIndex(e,t){e.setRouteIndex(t)}};class sm extends h.PureComponent{constructor(){super(...arguments),R(this,"registeredEvents",[]),R(this,"state",{directionsRenderer:null}),R(this,"setDirectionsRendererCallback",()=>{null!==this.state.directionsRenderer&&(this.state.directionsRenderer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.directionsRenderer))})}componentDidMount(){var e=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=$({updaterMap:sd,eventMap:sc,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{directionsRenderer:e}},this.setDirectionsRendererCallback)}componentDidUpdate(e){null!==this.state.directionsRenderer&&(B(this.registeredEvents),this.registeredEvents=$({updaterMap:sd,eventMap:sc,prevProps:e,nextProps:this.props,instance:this.state.directionsRenderer}))}componentWillUnmount(){null!==this.state.directionsRenderer&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),B(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))}render(){return null}}R(sm,"contextType",Z);var sh={onPlacesChanged:"places_changed"},su={bounds(e,t){e.setBounds(t)}};class sp extends h.PureComponent{constructor(){super(...arguments),R(this,"registeredEvents",[]),R(this,"containerElement",(0,h.createRef)()),R(this,"state",{searchBox:null}),R(this,"setSearchBoxCallback",()=>{null!==this.state.searchBox&&this.props.onLoad&&this.props.onLoad(this.state.searchBox)})}componentDidMount(){if(I(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),null!==this.containerElement&&null!==this.containerElement.current){var e=this.containerElement.current.querySelector("input");if(null!==e){var t=new google.maps.places.SearchBox(e,this.props.options);this.registeredEvents=$({updaterMap:su,eventMap:sh,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{searchBox:t}},this.setSearchBoxCallback)}}}componentDidUpdate(e){null!==this.state.searchBox&&(B(this.registeredEvents),this.registeredEvents=$({updaterMap:su,eventMap:sh,prevProps:e,nextProps:this.props,instance:this.state.searchBox}))}componentWillUnmount(){null!==this.state.searchBox&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),B(this.registeredEvents))}render(){return(0,m.jsx)("div",{ref:this.containerElement,children:h.Children.only(this.props.children)})}}R(sp,"contextType",Z);var sx={onPlaceChanged:"place_changed"},sg={bounds(e,t){e.setBounds(t)},restrictions(e,t){e.setComponentRestrictions(t)},fields(e,t){e.setFields(t)},options(e,t){e.setOptions(t)},types(e,t){e.setTypes(t)}};class sf extends h.PureComponent{constructor(){super(...arguments),R(this,"registeredEvents",[]),R(this,"containerElement",(0,h.createRef)()),R(this,"state",{autocomplete:null}),R(this,"setAutocompleteCallback",()=>{null!==this.state.autocomplete&&this.props.onLoad&&this.props.onLoad(this.state.autocomplete)})}componentDidMount(){I(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var e,t=null===(e=this.containerElement.current)||void 0===e?void 0:e.querySelector("input");if(t){var s=new google.maps.places.Autocomplete(t,this.props.options);this.registeredEvents=$({updaterMap:sg,eventMap:sx,prevProps:{},nextProps:this.props,instance:s}),this.setState(()=>({autocomplete:s}),this.setAutocompleteCallback)}}componentDidUpdate(e){B(this.registeredEvents),this.registeredEvents=$({updaterMap:sg,eventMap:sx,prevProps:e,nextProps:this.props,instance:this.state.autocomplete})}componentWillUnmount(){null!==this.state.autocomplete&&B(this.registeredEvents)}render(){return(0,m.jsx)("div",{ref:this.containerElement,className:this.props.className,children:h.Children.only(this.props.children)})}}R(sf,"defaultProps",{className:""}),R(sf,"contextType",Z);let sj=["places","geometry"];function sv({children:e}){let{isLoaded:t,loadError:s}=er({googleMapsApiKey:"AIzaSyAKMtorawPHrpVNqAZlv5vUpfMSDif57MQ",libraries:sj});return s?m.jsx(g.Zb,{className:"p-6",children:(0,m.jsxs)("div",{className:"text-center text-red-600",children:[m.jsx("p",{className:"font-semibold mb-2",children:"Error loading Google Maps"}),m.jsx("p",{className:"text-sm",children:"Please check your internet connection and try refreshing the page."})]})}):t?m.jsx(m.Fragment,{children:e}):m.jsx(g.Zb,{className:"p-6",children:(0,m.jsxs)("div",{className:"text-center",children:[m.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"}),m.jsx("p",{className:"text-muted-foreground",children:"Loading maps..."})]})})}var sb=s(54432);let sy=(0,v.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var sN=s(77863);let sC={width:"100%",height:"600px"},sw={lat:33.4484,lng:-112.074},sk={disableDefaultUI:!1,zoomControl:!0,streetViewControl:!1,mapTypeControl:!0,fullscreenControl:!0,styles:[{featureType:"administrative",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",stylers:[{visibility:"off"}]}]};function sS({territoryData:e,areaFilter:t}){let[s,r]=(0,h.useState)(null),[a,n]=(0,h.useState)(!1),[l,i]=(0,h.useState)([]),[o,c]=(0,h.useState)(!0),[d,u]=(0,h.useState)([]),[p,x]=(0,h.useState)(null),[j,v]=(0,h.useState)(""),[y,N]=(0,h.useState)(null),C=(0,h.useRef)(null),S=(0,h.useMemo)(()=>{let t={};return l?.length>0?l.forEach(e=>{t[e.zipCode]=e.center}):e?.forEach(e=>{if(e?.zip){let s=Math.abs(e.zip.toString().split("").reduce((e,t)=>(e=(e<<5)-e+t.charCodeAt(0))&e,0))/2147483647;t[e.zip]={lat:33.2+s%1*(33.7-33.2),lng:-112.4+1.618*s%1*(-111.6- -112.4)}}}),t},[e,l]),L=(e,t=!1)=>{let s={West:{fill:"#3B82F6",stroke:"#2563EB"},Central:{fill:"#10B981",stroke:"#059669"},East:{fill:"#F59E0B",stroke:"#D97706"},Tucson:{fill:"#A855F7",stroke:"#9333EA"}}[e]||{fill:"#6B7280",stroke:"#4B5563"};return{fillColor:s.fill,fillOpacity:t?.6:.35,strokeColor:t?"#DC2626":s.stroke,strokeOpacity:t?1:.8,strokeWeight:t?4:2,clickable:!0,draggable:!1,editable:!1,geodesic:!1,zIndex:t?100:1}},P=e=>({path:google?.maps?.SymbolPath?.CIRCLE||0,scale:8,fillColor:({West:"#3B82F6",Central:"#10B981",East:"#F59E0B",Tucson:"#A855F7"})[e]||"#6B7280",fillOpacity:.9,strokeWeight:2,strokeColor:"#FFFFFF"}),M=(0,h.useCallback)(e=>{r(e)},[]),T=(0,h.useCallback)(()=>{r(null)},[]),O=(0,h.useCallback)(()=>{let t=j.trim();if(!t||!C.current)return;let s=e.find(e=>e.zip===t);if(s){let e=S[t];e&&(C.current.panTo(e),C.current.setZoom(13),N(t),r(s))}else alert(`ZIP code ${t} not found in territory data.`)},[j,e,S]),z=(0,h.useCallback)(()=>{v(""),N(null),r(null),C.current&&(C.current.panTo(sw),C.current.setZoom(10))},[]),A=(0,h.useCallback)(e=>{"Enter"===e.key&&O()},[O]);return(0,m.jsxs)("div",{className:"relative",children:[m.jsx(g.Zb,{className:"mb-4 bg-white/90 backdrop-blur-sm border-0 shadow-md",children:m.jsx(g.aY,{className:"p-4",children:(0,m.jsxs)("div",{className:"flex items-center gap-3",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium text-slate-700",children:[m.jsx(E,{className:"h-4 w-4"}),m.jsx("span",{children:"Search ZIP Code:"})]}),(0,m.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[m.jsx(sb.I,{type:"text",placeholder:"Enter 5-digit ZIP code...",value:j,onChange:e=>v(e.target.value),onKeyPress:A,className:"max-w-xs",maxLength:5}),(0,m.jsxs)(f.z,{onClick:O,size:"sm",className:"gap-2",children:[m.jsx(E,{className:"h-4 w-4"}),"Search"]}),(j||y)&&(0,m.jsxs)(f.z,{onClick:z,size:"sm",variant:"outline",className:"gap-2",children:[m.jsx(sy,{className:"h-4 w-4"}),"Clear"]})]}),y&&(0,m.jsxs)("div",{className:"text-sm text-slate-600 bg-blue-50 px-3 py-1.5 rounded-md border border-blue-200",children:["Viewing: ",(0,m.jsxs)("span",{className:"font-semibold text-blue-700",children:["ZIP ",y]})]})]})})}),(0,m.jsxs)(W,{mapContainerStyle:sC,center:sw,zoom:8,options:sk,onLoad:e=>{C.current=e,n(!0)},children:[a&&l?.map(s=>{if(!t[s.area]||!s.paths?.length)return null;let r=y===s.zipCode.toString();return m.jsx(tM,{paths:s.paths,options:L(s.area,r),onClick:()=>{let t=e.find(e=>parseInt(e.zip)===s.zipCode);t&&M(t)}},`polygon-${s.zipCode}`)}),a&&e?.map(e=>{let t=S?.[e?.zip];return t&&e?.zip?m.jsx(ek,{position:t,icon:P(e?.area||""),onClick:()=>M(e),title:`ZIP ${e.zip} - ${e?.area||""} Area`},`marker-${e.zip}`):null}),d.filter(e=>!1!==t[e.area]).map(e=>{let t="NEXT YEAR"===e.category;return m.jsx(ek,{position:{lat:e.lat,lng:e.lng},icon:{path:"M 0,-24 L 6,-8 L 24,-8 L 10,4 L 16,20 L 0,8 L -16,20 L -10,4 L -24,-8 L -6,-8 Z",fillColor:t?"#DC2626":"#F97316",fillOpacity:1,strokeColor:"#FFFFFF",strokeWeight:2,scale:t?.7:.6,anchor:new google.maps.Point(0,0)},onClick:()=>x(e),title:e.label,zIndex:1e3},`office-${e.zipCode}-${e.category}`)}),s&&S?.[s?.zip]&&m.jsx(tg,{position:S[s.zip],onCloseClick:T,children:(0,m.jsxs)("div",{className:"p-3 min-w-0 max-w-xs",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[m.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:s?.area==="West"?"#3B82F6":s?.area==="Central"?"#10B981":s?.area==="East"?"#F59E0B":s?.area==="Tucson"?"#A855F7":"#6B7280"}}),(0,m.jsxs)("h3",{className:"font-semibold text-slate-900",children:["ZIP ",s?.zip||"N/A"]})]}),(0,m.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx(k,{className:"h-4 w-4 text-slate-500"}),m.jsx("span",{className:"text-slate-600",children:s?.area?(0,sN.G)(s.area):"N/A"})]}),(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx(w,{className:"h-4 w-4 text-slate-500"}),(0,m.jsxs)("span",{className:"text-slate-600",children:[s?.accounts||0," Active Accounts"]})]})]})]})}),p&&m.jsx(tg,{position:{lat:p.lat,lng:p.lng},onCloseClick:()=>x(null),children:(0,m.jsxs)("div",{className:"p-3 min-w-0 max-w-xs",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[m.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:"NEXT YEAR"===p.category?"#DC2626":"#F97316"}}),m.jsx("h3",{className:"font-semibold text-slate-900",children:p.label})]}),(0,m.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx(k,{className:"h-4 w-4 text-slate-500"}),m.jsx("span",{className:"text-slate-600",children:p.fullName||(0,sN.G)(p.area)})]}),(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx(b,{className:"h-4 w-4 text-slate-500"}),(0,m.jsxs)("span",{className:"text-slate-600",children:["ZIP ",p.zipCode]})]}),m.jsx("div",{className:"mt-3 pt-3 border-t border-slate-200",children:m.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded ${"NEXT YEAR"===p.category?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:p.category})})]})]})})]}),(o||!a)&&m.jsx("div",{className:"absolute inset-0 bg-slate-100/90 flex items-center justify-center",children:(0,m.jsxs)("div",{className:"text-center",children:[m.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"}),m.jsx("p",{className:"text-slate-600",children:a?"Loading territory boundaries...":"Initializing map..."})]})})]})}let sL={width:"100%",height:"600px"},sP=e=>"miami"===e?{lat:25.7617,lng:-80.1918}:"dallas"===e?{lat:32.7767,lng:-96.797}:"orlando"===e?{lat:28.5383,lng:-81.3792}:"jacksonville"===e?{lat:30.3322,lng:-81.6557}:"portCharlotte"===e?{lat:26.9762,lng:-82.0909}:{lat:33.4484,lng:-112.074};function sM({densityMode:e,areaFilter:t,location:s,accountType:r="residential"}){let[a,n]=(0,h.useState)([]),[l,i]=(0,h.useState)([]),[o,c]=(0,h.useState)(null),[d,u]=(0,h.useState)(!1),[p,x]=(0,h.useState)([]),[g,f]=(0,h.useState)(null),j=(0,h.useRef)(null),v=t=>{if("active"===e){let e=t.activeCount;return"miami"===s&&"commercial"===r?0===e?"#f0fdf4":e<=2?"#d1fae5":e<=4?"#a7f3d0":e<=6?"#6ee7b7":e<=9?"#34d399":e<=12?"#10b981":e<=15?"#059669":e<=18?"#047857":"#065f46":"miami"===s?0===e?"#f0fdf4":e<=10?"#d1fae5":e<=20?"#a7f3d0":e<=35?"#6ee7b7":e<=50?"#34d399":e<=75?"#10b981":e<=100?"#059669":e<=125?"#047857":"#065f46":"dallas"===s&&"commercial"===r?0===e?"#f0fdf4":1===e?"#6ee7b7":"#10b981":"dallas"===s?0===e?"#f0fdf4":e<=5?"#d1fae5":e<=10?"#a7f3d0":e<=20?"#6ee7b7":e<=30?"#34d399":e<=40?"#10b981":e<=50?"#059669":"#047857":"orlando"===s&&"commercial"===r?0===e?"#f0fdf4":e<=2?"#d1fae5":e<=4?"#6ee7b7":e<=6?"#34d399":e<=9?"#10b981":"#059669":"orlando"===s?0===e?"#f0fdf4":e<=10?"#d1fae5":e<=20?"#a7f3d0":e<=35?"#6ee7b7":e<=50?"#34d399":e<=70?"#10b981":e<=90?"#059669":"#047857":"jacksonville"===s&&"commercial"===r?0===e?"#f0fdf4":1===e?"#6ee7b7":"#10b981":"jacksonville"===s?0===e?"#f0fdf4":e<=10?"#d1fae5":e<=25?"#a7f3d0":e<=40?"#6ee7b7":e<=60?"#34d399":e<=80?"#10b981":e<=110?"#059669":"#047857":0===e?"#f0fdf4":e<=5?"#d1fae5":e<=15?"#86efac":e<=30?"#22c55e":e<=50?"#16a34a":"#15803d"}if("terminated"===e){let e=t.terminatedCount;return"miami"===s&&"commercial"===r?0===e?"#fef2f2":e<=3?"#fecaca":e<=6?"#fca5a5":e<=9?"#f87171":e<=12?"#ef4444":e<=15?"#dc2626":e<=18?"#b91c1c":e<=21?"#991b1b":"#7f1d1d":"miami"===s?0===e?"#fef2f2":e<=15?"#fecaca":e<=30?"#fca5a5":e<=50?"#f87171":e<=75?"#ef4444":e<=100?"#dc2626":e<=150?"#b91c1c":e<=200?"#991b1b":"#7f1d1d":"dallas"===s&&"commercial"===r?0===e?"#fef2f2":e<=2?"#fecaca":e<=4?"#fca5a5":e<=6?"#f87171":e<=8?"#ef4444":"#dc2626":"dallas"===s?0===e?"#fef2f2":e<=20?"#fecaca":e<=40?"#fca5a5":e<=60?"#f87171":e<=80?"#ef4444":e<=100?"#dc2626":e<=150?"#b91c1c":"#991b1b":"orlando"===s&&"commercial"===r?0===e?"#fef2f2":e<=5?"#fecaca":e<=10?"#fca5a5":e<=15?"#f87171":e<=20?"#ef4444":e<=30?"#dc2626":"#b91c1c":"orlando"===s?0===e?"#fef2f2":e<=10?"#fecaca":e<=20?"#fca5a5":e<=30?"#f87171":e<=50?"#ef4444":e<=75?"#dc2626":e<=100?"#b91c1c":"#991b1b":"jacksonville"===s&&"commercial"===r?"#fef2f2":"jacksonville"===s?0===e?"#fef2f2":e<=5?"#fecaca":e<=10?"#fca5a5":e<=20?"#f87171":e<=30?"#ef4444":e<=50?"#dc2626":"#b91c1c":0===e?"#fef2f2":e<=20?"#fecaca":e<=50?"#fca5a5":e<=100?"#f87171":e<=200?"#dc2626":"#991b1b"}if("lifetime"===e){let e=t.avgCustomerLifetimeMonths||0;return 0===e?"#fef2f2":e<12?"#fbbf24":e<24?"#a3e635":e<36?"#86efac":e<60?"#22c55e":e<120?"#16a34a":"#15803d"}{let e=t.churnRate;return 0===e?"#f0fdf4":e<=50?"#d1fae5":e<=70?"#fef3c7":e<=85?"#fbbf24":e<=95?"#f97316":"#991b1b"}},b=(0,h.useCallback)(e=>{j.current=e,u(!0)},[]);return(0,m.jsxs)(W,{mapContainerStyle:sL,center:sP(s),zoom:9,onLoad:b,options:{disableDefaultUI:!1,zoomControl:!0,streetViewControl:!1,mapTypeControl:!0,fullscreenControl:!0},children:[l.map(e=>{if(e?.geometry){var t;let r=(t=e.geometry,t?.coordinates?"Polygon"===t.type?t.coordinates.map(e=>e.map(([e,t])=>({lat:t,lng:e}))):"MultiPolygon"===t.type?t.coordinates.flatMap(e=>e.map(e=>e.map(([e,t])=>({lat:t,lng:e})))):[]:[]),a=v(e);return m.jsx(tM,{paths:r,options:{fillColor:a,fillOpacity:.7,..."miami"===s||"dallas"===s||"orlando"===s||"jacksonville"===s?{strokeColor:"#1e293b",strokeOpacity:.85,strokeWeight:2}:{strokeColor:"#64748b",strokeOpacity:.5,strokeWeight:1},clickable:!0},onClick:()=>c(e)},e.zipCode)}if("arizona"===s&&e?.center){let t=v(e),s=150*Math.sqrt(e.totalHistorical);return m.jsx(ek,{position:e.center,icon:{path:google.maps.SymbolPath.CIRCLE,fillColor:t,fillOpacity:.7,strokeColor:"#64748b",strokeOpacity:.8,strokeWeight:2,scale:Math.max(s/10,8)},onClick:()=>c(e)},e.zipCode)}return null}),p.filter(e=>!1!==t[e.area]).map(e=>{let t="NEXT YEAR"===e.category;return m.jsx(ek,{position:{lat:e.lat,lng:e.lng},icon:{path:"M 0,-24 L 6,-8 L 24,-8 L 10,4 L 16,20 L 0,8 L -16,20 L -10,4 L -24,-8 L -6,-8 Z",fillColor:t?"#DC2626":"#F97316",fillOpacity:1,strokeColor:"#FFFFFF",strokeWeight:2,scale:t?.7:.6,anchor:new google.maps.Point(0,0)},onClick:()=>f(e),title:e.label,zIndex:1e3},`office-${e.zipCode}-${e.category}`)}),o&&m.jsx(tg,{position:o.center,onCloseClick:()=>c(null),children:(0,m.jsxs)("div",{style:{minWidth:"250px",padding:"8px"},children:[(0,m.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[(0,m.jsxs)("h3",{style:{margin:0,fontSize:"18px",fontWeight:"bold"},children:["ZIP ",o.zipCode]}),"arizona"===s&&o.area&&m.jsx("span",{style:{background:{West:"#3b82f6",Central:"#10b981",East:"#f97316",Tucson:"#a855f7"}[o.area]||"#6b7280",color:"white",padding:"4px 10px",borderRadius:"12px",fontSize:"12px",fontWeight:"600"},children:(0,sN.G)(o.area)}),"miami"===s&&o.city&&m.jsx("span",{style:{background:"#0891b2",color:"white",padding:"4px 10px",borderRadius:"12px",fontSize:"12px",fontWeight:"600"},children:o.city})]}),(0,m.jsxs)("div",{style:{background:"#f9fafb",padding:"12px",borderRadius:"8px",marginBottom:"12px"},children:[(0,m.jsxs)("div",{style:{marginBottom:"8px"},children:[m.jsx("span",{style:{color:"#059669",fontWeight:"600",fontSize:"20px"},children:o.activeCount}),m.jsx("span",{style:{color:"#6b7280",fontSize:"14px",marginLeft:"4px"},children:"Active Accounts"})]}),(0,m.jsxs)("div",{children:[m.jsx("span",{style:{color:"#dc2626",fontWeight:"600",fontSize:"20px"},children:o.terminatedCount}),m.jsx("span",{style:{color:"#6b7280",fontSize:"14px",marginLeft:"4px"},children:"Terminated"})]})]}),(0,m.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",fontSize:"13px"},children:[(0,m.jsxs)("div",{children:[m.jsx("div",{style:{color:"#6b7280",marginBottom:"2px"},children:"Total Historical"}),m.jsx("div",{style:{fontWeight:"600",fontSize:"16px"},children:o.totalHistorical})]}),(0,m.jsxs)("div",{children:[m.jsx("div",{style:{color:"#6b7280",marginBottom:"2px"},children:"Churn Rate"}),(0,m.jsxs)("div",{style:{fontWeight:"600",fontSize:"16px",color:o.churnRate>85?"#dc2626":o.churnRate>75?"#f97316":"#059669"},children:[o.churnRate,"%"]})]}),void 0!==o.avgCustomerLifetimeMonths&&(0,m.jsxs)("div",{style:{gridColumn:"1 / -1",marginTop:"4px"},children:[m.jsx("div",{style:{color:"#6b7280",marginBottom:"2px"},children:"Avg Customer Lifetime"}),(0,m.jsxs)("div",{style:{fontWeight:"600",fontSize:"16px",color:"#059669"},children:[o.avgCustomerLifetimeMonths.toFixed(1)," months",(0,m.jsxs)("span",{style:{color:"#6b7280",fontSize:"13px",marginLeft:"4px"},children:["(",(o.avgCustomerLifetimeMonths/12).toFixed(1)," years)"]})]})]})]})]})}),g&&m.jsx(tg,{position:{lat:g.lat,lng:g.lng},onCloseClick:()=>f(null),children:(0,m.jsxs)("div",{style:{minWidth:"200px",padding:"12px"},children:[(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[m.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"NEXT YEAR"===g.category?"#DC2626":"#F97316"}}),m.jsx("h3",{style:{margin:0,fontSize:"16px",fontWeight:"bold"},children:g.label})]}),(0,m.jsxs)("div",{style:{fontSize:"14px",color:"#64748b",marginBottom:"8px"},children:[m.jsx("div",{style:{marginBottom:"4px"},children:g.fullName||(0,sN.G)(g.area)}),(0,m.jsxs)("div",{style:{marginBottom:"8px"},children:["ZIP ",g.zipCode]})]}),m.jsx("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid #e2e8f0"},children:m.jsx("span",{style:{fontSize:"12px",fontWeight:"600",padding:"4px 8px",borderRadius:"4px",backgroundColor:"NEXT YEAR"===g.category?"#FEE2E2":"#FFEDD5",color:"NEXT YEAR"===g.category?"#B91C1C":"#C2410C"},children:g.category})})]})})]})}let sE={width:"100%",height:"600px"},sT={lat:33.4484,lng:-112.074};function sO({areaFilter:e}){let[t,s]=(0,h.useState)([]),[r,a]=(0,h.useState)([]),[n,l]=(0,h.useState)([]),[i,o]=(0,h.useState)(null),[c,d]=(0,h.useState)(!1),[u,p]=(0,h.useState)([]),[x,g]=(0,h.useState)(null),f=(0,h.useRef)(null),j=(0,h.useCallback)(e=>{f.current=e,d(!0)},[]),v=e=>e>=6e3?"#1a237e":e>=4e3?"#283593":e>=3e3?"#3949ab":e>=2e3?"#5e35b1":e>=1500?"#7e57c2":e>=1e3?"#9575cd":e>=500?"#b39ddb":e>=250?"#d1c4e9":"#e8eaf6",y=n.reduce((e,t)=>(e[t.zip]=t.area,e),{}),N=r.filter(s=>{let r=s?.properties?.ZCTA5CE10;if(!r||!t.find(e=>e.zipCode===r))return!1;let a=y[r];return!a||!1!==e[a]}),C=e=>{let s=t.find(t=>t.zipCode===e),a=n.find(t=>t.zip===e);if(s){let t=r.find(t=>t?.properties?.ZCTA5CE10===e);if(t?.geometry?.coordinates){let r=t.geometry.coordinates[0],n=r.reduce((e,t)=>e+t[1],0),l=r.reduce((e,t)=>e+t[0],0);o({zipCode:e,position:{lat:n/r.length,lng:l/r.length},marketInfo:s,territoryInfo:a})}}};return(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsxs)(W,{mapContainerStyle:sE,center:sT,zoom:9,onLoad:j,options:{styles:[{featureType:"all",elementType:"labels",stylers:[{visibility:"on"}]}],streetViewControl:!1,mapTypeControl:!0,fullscreenControl:!0},children:[N.map((e,s)=>{let r=e?.properties?.ZCTA5CE10,a=t.find(e=>e.zipCode===r);if(!a||!e?.geometry?.coordinates)return null;let n=e.geometry.coordinates[0].map(e=>({lat:e[1],lng:e[0]})),l=v(a.permittedPools);return m.jsx(tM,{paths:n,options:{fillColor:l,fillOpacity:.6,strokeColor:"#1e293b",strokeOpacity:.8,strokeWeight:1,clickable:!0},onClick:()=>C(r)},`${r}-${s}`)}),u.filter(t=>!1!==e[t.area]).map(e=>{let t="NEXT YEAR"===e.category;return m.jsx(ek,{position:{lat:e.lat,lng:e.lng},icon:{path:"M 0,-24 L 6,-8 L 24,-8 L 10,4 L 16,20 L 0,8 L -16,20 L -10,4 L -24,-8 L -6,-8 Z",fillColor:t?"#DC2626":"#F97316",fillOpacity:1,strokeColor:"#FFFFFF",strokeWeight:2,scale:t?.7:.6,anchor:new google.maps.Point(0,0)},onClick:()=>g(e),title:e.label,zIndex:1e3},`office-${e.zipCode}-${e.category}`)}),i&&m.jsx(tg,{position:i.position,onCloseClick:()=>o(null),children:(0,m.jsxs)("div",{className:"p-2 min-w-[200px]",children:[(0,m.jsxs)("h3",{className:"font-bold text-lg mb-2",children:["Zip Code ",i.zipCode]}),i.territoryInfo&&(0,m.jsxs)("p",{className:"text-sm text-slate-600 mb-2",children:["Area: ",m.jsx("span",{className:"font-semibold",children:(0,sN.G)(i.territoryInfo.area)})]}),(0,m.jsxs)("div",{className:"space-y-1",children:[(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-semibold text-blue-700",children:"Permitted Pools:"})," ",i.marketInfo.permittedPools.toLocaleString()]}),i.territoryInfo&&(0,m.jsxs)("p",{className:"text-sm text-slate-500",children:["Current Accounts: ",i.territoryInfo.accounts]}),i.territoryInfo&&i.marketInfo.permittedPools>0&&(0,m.jsxs)("p",{className:"text-sm text-slate-500",children:["Market Penetration: ",(i.territoryInfo.accounts/i.marketInfo.permittedPools*100).toFixed(1),"%"]})]})]})}),x&&m.jsx(tg,{position:{lat:x.lat,lng:x.lng},onCloseClick:()=>g(null),children:(0,m.jsxs)("div",{className:"p-3 min-w-0 max-w-xs",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[m.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:"NEXT YEAR"===x.category?"#DC2626":"#F97316"}}),m.jsx("h3",{className:"font-semibold text-slate-900",children:x.label})]}),(0,m.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx(k,{className:"h-4 w-4 text-slate-500"}),(0,m.jsxs)("span",{className:"text-slate-600",children:[x.area," Territory"]})]}),(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx(b,{className:"h-4 w-4 text-slate-500"}),(0,m.jsxs)("span",{className:"text-slate-600",children:["ZIP ",x.zipCode]})]}),m.jsx("div",{className:"mt-3 pt-3 border-t border-slate-200",children:m.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded ${"NEXT YEAR"===x.category?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:x.category})})]})]})})]}),!c&&m.jsx("div",{className:"absolute inset-0 bg-white/80 flex items-center justify-center",children:(0,m.jsxs)("div",{className:"text-center",children:[m.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-blue-500 border-t-transparent rounded-full mx-auto mb-2"}),m.jsx("p",{className:"text-sm text-slate-600",children:"Rendering map..."})]})})]})}var sz=s(15940);let sA=(0,v.Z)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),sR=(0,v.Z)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),sD=(0,v.Z)("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),sI={width:"100%",height:"800px"},sZ={lat:33.4484,lng:-111.9269},sF={styles:[{featureType:"all",elementType:"labels.text.fill",stylers:[{color:"#7c93a3"},{lightness:"-10"}]},{featureType:"administrative.province",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"geometry",stylers:[{lightness:"0"},{saturation:"0"},{color:"#f5f5f2"},{gamma:"1"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#c9c9c9"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#C6E2FF"}]}],disableDefaultUI:!1,zoomControl:!0,mapTypeControl:!1,scaleControl:!0,streetViewControl:!1,rotateControl:!1,fullscreenControl:!0};function sB({areaFilter:e,onToggleArea:t,onResetFilters:s}){let[r,a]=(0,h.useState)([]),[n,l]=(0,h.useState)([]),[i,o]=(0,h.useState)(null),[c,d]=(0,h.useState)(null),[u,p]=(0,h.useState)([]),[x,j]=(0,h.useState)([]),[v,y]=(0,h.useState)("none"),N=(0,h.useMemo)(()=>r.filter(t=>{let s=t.Territory;return("APS of Glendale"!==s||!!e.West)&&("APS of Scottsdale"!==s||!!e.Central)&&("APS of Chandler"!==s||!!e.East)&&("APS of Tucson"!==s||!!e.Tucson)}),[r,e]),C=(0,h.useCallback)(e=>e>=200?"#047857":e>=180?"#059669":e>=170?"#10b981":e>=165?"#34d399":e>=160?"#fbbf24":e>=155?"#f59e0b":"#dc2626",[]),k=(0,h.useCallback)(e=>{switch(e){case"APS of Glendale":return"#3b82f6";case"APS of Scottsdale":return"#10b981";case"APS of Chandler":return"#f97316";case"APS of Tucson":return"#ec4899";default:return"#6b7280"}},[]),S=e=>"Polygon"===e.type?e.coordinates.map(e=>e.map(e=>({lat:e[1],lng:e[0]}))):"MultiPolygon"===e.type?e.coordinates.flatMap(e=>e.map(e=>e.map(e=>({lat:e[1],lng:e[0]})))):[],M=(0,h.useMemo)(()=>{let e=[];return N.forEach(t=>{let s=n.find(e=>e.properties?.ZCTA5CE20===t.ZIP||e.properties?.ZCTA5CE10===t.ZIP||e.properties?.ZIP===t.ZIP||e.properties?.GEOID20===t.ZIP||e.properties?.GEOID10===t.ZIP);if(s&&s.geometry){let r=S(s.geometry),a=C(t.Avg_Monthly_Price);e.push({paths:r,zipData:t,options:{fillColor:a,fillOpacity:.5,strokeColor:"#1e293b",strokeOpacity:.8,strokeWeight:1.5,clickable:!0}})}}),e},[N,n,C]),E=(0,h.useCallback)((e,t)=>{let s=Array.isArray(t[0])?t.flat():t,r=s.reduce((e,t)=>({lat:e.lat+t.lat/s.length,lng:e.lng+t.lng/s.length}),{lat:0,lng:0});o(e),d(r),j(u.filter(t=>t.zipCode===e.ZIP)),y("none")},[u]),T=(0,h.useMemo)(()=>"none"===v?x:[...x].sort((e,t)=>{let s=e.monthlyPrice||0,r=t.monthlyPrice||0;return"asc"===v?s-r:r-s}),[x,v]),z=(0,h.useMemo)(()=>{let e={};return N.forEach(t=>{e[t.Territory]||(e[t.Territory]={accounts:0,revenue:0,avgPrice:0}),e[t.Territory].accounts+=t.Account_Count,e[t.Territory].revenue+=t.Total_Monthly_Revenue}),Object.keys(e).forEach(t=>{e[t].avgPrice=e[t].revenue/e[t].accounts}),e},[N]);return(0,m.jsxs)("div",{className:"space-y-6",children:[m.jsx(g.Zb,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg",children:m.jsx(g.aY,{className:"p-4",children:(0,m.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx(O,{className:"h-4 w-4 text-slate-600"}),m.jsx("span",{className:"font-medium text-slate-900",children:"Filter by Territory:"})]}),(0,m.jsxs)("div",{className:"flex flex-wrap gap-2",children:[m.jsx(f.z,{variant:e.West?"default":"outline",size:"sm",onClick:()=>t("West"),className:e.West?"bg-blue-600 hover:bg-blue-700":"",children:(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-600"}),m.jsx("span",{children:"APS of Glendale"})]})}),m.jsx(f.z,{variant:e.Central?"default":"outline",size:"sm",onClick:()=>t("Central"),className:e.Central?"bg-green-600 hover:bg-green-700":"",children:(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-full bg-green-600"}),m.jsx("span",{children:"APS of Scottsdale"})]})}),m.jsx(f.z,{variant:e.East?"default":"outline",size:"sm",onClick:()=>t("East"),className:e.East?"bg-orange-600 hover:bg-orange-700":"",children:(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-600"}),m.jsx("span",{children:"APS of Chandler"})]})}),m.jsx(f.z,{variant:e.Tucson?"default":"outline",size:"sm",onClick:()=>t("Tucson"),className:e.Tucson?"bg-pink-600 hover:bg-pink-700":"",children:(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-full bg-pink-600"}),m.jsx("span",{children:"APS of Tucson"})]})}),m.jsx(f.z,{variant:"outline",size:"sm",onClick:s,className:"ml-2",children:"Show All"})]})]})})}),m.jsx(g.Zb,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg",children:m.jsx(g.aY,{className:"p-6",children:(0,m.jsxs)("div",{className:"space-y-6",children:[(0,m.jsxs)("div",{children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold text-slate-900 mb-3 flex items-center gap-2",children:[m.jsx(P,{className:"h-5 w-5 text-green-600"}),"Average Monthly Revenue per ZIP Code"]}),(0,m.jsxs)("div",{className:"grid grid-cols-7 gap-2 text-sm",children:[(0,m.jsxs)("div",{className:"flex flex-col items-center",children:[m.jsx("div",{className:"w-full h-8 rounded",style:{backgroundColor:"#dc2626"}}),m.jsx("span",{className:"mt-1 text-xs text-slate-600",children:"< $155"})]}),(0,m.jsxs)("div",{className:"flex flex-col items-center",children:[m.jsx("div",{className:"w-full h-8 rounded",style:{backgroundColor:"#f59e0b"}}),m.jsx("span",{className:"mt-1 text-xs text-slate-600",children:"$155-160"})]}),(0,m.jsxs)("div",{className:"flex flex-col items-center",children:[m.jsx("div",{className:"w-full h-8 rounded",style:{backgroundColor:"#fbbf24"}}),m.jsx("span",{className:"mt-1 text-xs text-slate-600",children:"$160-165"})]}),(0,m.jsxs)("div",{className:"flex flex-col items-center",children:[m.jsx("div",{className:"w-full h-8 rounded",style:{backgroundColor:"#34d399"}}),m.jsx("span",{className:"mt-1 text-xs text-slate-600",children:"$165-170"})]}),(0,m.jsxs)("div",{className:"flex flex-col items-center",children:[m.jsx("div",{className:"w-full h-8 rounded",style:{backgroundColor:"#10b981"}}),m.jsx("span",{className:"mt-1 text-xs text-slate-600",children:"$170-180"})]}),(0,m.jsxs)("div",{className:"flex flex-col items-center",children:[m.jsx("div",{className:"w-full h-8 rounded",style:{backgroundColor:"#059669"}}),m.jsx("span",{className:"mt-1 text-xs text-slate-600",children:"$180-200"})]}),(0,m.jsxs)("div",{className:"flex flex-col items-center",children:[m.jsx("div",{className:"w-full h-8 rounded",style:{backgroundColor:"#047857"}}),m.jsx("span",{className:"mt-1 text-xs text-slate-600",children:"> $200"})]})]})]}),(0,m.jsxs)("div",{children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold text-slate-900 mb-3 flex items-center gap-2",children:[m.jsx(L,{className:"h-5 w-5 text-blue-600"}),"Revenue by Territory"]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Object.entries(z).map(([e,t])=>(0,m.jsxs)("div",{className:"bg-slate-50 p-4 rounded-lg",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:k(e)}}),m.jsx("span",{className:"font-medium text-slate-900 text-sm",children:e})]}),(0,m.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx(w,{className:"h-3 w-3 text-slate-500"}),(0,m.jsxs)("span",{className:"text-slate-600",children:[t.accounts," accounts"]})]}),(0,m.jsxs)("div",{className:"text-lg font-bold text-slate-900",children:["$",t.revenue.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),"/mo"]}),(0,m.jsxs)("div",{className:"text-xs text-slate-600",children:["Avg: $",t.avgPrice.toFixed(2),"/account"]})]})]},e))})]})]})})}),m.jsx(g.Zb,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg",children:m.jsx(g.aY,{className:"p-0",children:(0,m.jsxs)(W,{mapContainerStyle:sI,center:sZ,zoom:9,options:sF,children:[M.map((e,t)=>m.jsx(tM,{paths:e.paths,options:e.options,onClick:()=>E(e.zipData,e.paths)},`revenue-${t}`)),i&&c&&m.jsx(tg,{position:c,onCloseClick:()=>o(null),children:(0,m.jsxs)("div",{className:"p-2",children:[(0,m.jsxs)("h3",{className:"font-bold text-lg mb-2",children:["ZIP Code ",i.ZIP]}),(0,m.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:k(i.Territory)}}),m.jsx("span",{className:"font-medium",children:i.Territory})]}),(0,m.jsxs)("div",{className:"border-t pt-2 mt-2",children:[(0,m.jsxs)("div",{className:"font-semibold",children:["Accounts: ",i.Account_Count]}),(0,m.jsxs)("div",{className:"text-slate-600",children:["Avg Monthly: $",i.Avg_Monthly_Price.toFixed(2)]}),(0,m.jsxs)("div",{className:"text-slate-600",children:["Total Monthly: $",i.Total_Monthly_Revenue.toFixed(2)]}),(0,m.jsxs)("div",{className:"text-slate-600",children:["Total Yearly: $",i.Total_Yearly_Revenue.toFixed(2)]})]})]})]})})]})})}),i&&x.length>0&&(0,m.jsxs)(g.Zb,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg",children:[m.jsx(g.Ol,{children:(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsxs)(g.ll,{className:"flex items-center gap-2",children:[m.jsx(b,{className:"h-5 w-5 text-blue-600"}),"Accounts in ZIP Code ",i.ZIP," - ",i.Territory,(0,m.jsxs)("span",{className:"text-sm font-normal text-slate-600 ml-2",children:["(",x.length," account",1!==x.length?"s":"",")"]})]}),(0,m.jsxs)(f.z,{variant:"outline",size:"sm",onClick:()=>{y(e=>"none"===e?"asc":"asc"===e?"desc":"none")},className:"flex items-center gap-2",children:["asc"===v?m.jsx(sA,{className:"h-4 w-4"}):"desc"===v?m.jsx(sR,{className:"h-4 w-4"}):m.jsx(sD,{className:"h-4 w-4"}),(0,m.jsxs)("span",{children:["none"===v&&"Sort by Price","asc"===v&&"Price: Low to High","desc"===v&&"Price: High to Low"]})]})]})}),m.jsx(g.aY,{children:m.jsx("div",{className:"rounded-lg border overflow-hidden",children:m.jsx("div",{className:"overflow-x-auto max-h-96 overflow-y-auto",children:(0,m.jsxs)(sz.iA,{children:[m.jsx(sz.xD,{className:"bg-slate-50 sticky top-0 z-10",children:(0,m.jsxs)(sz.SC,{children:[m.jsx(sz.ss,{className:"font-semibold",children:"Customer"}),m.jsx(sz.ss,{className:"font-semibold",children:"Address"}),m.jsx(sz.ss,{className:"font-semibold",children:"City"}),m.jsx(sz.ss,{className:"font-semibold",children:"Territory"}),m.jsx(sz.ss,{className:"font-semibold",children:"Technician"}),m.jsx(sz.ss,{className:"font-semibold",children:"Service Days"}),m.jsx(sz.ss,{className:"font-semibold text-right",children:"Monthly Price"}),m.jsx(sz.ss,{className:"font-semibold text-right",children:"Yearly Price"})]})}),m.jsx(sz.RM,{children:T.map(e=>(0,m.jsxs)(sz.SC,{className:"hover:bg-slate-50",children:[m.jsx(sz.pj,{className:"font-medium",children:(0,m.jsxs)("div",{className:"flex flex-col",children:[m.jsx("span",{children:e.customerName}),m.jsx("span",{className:"text-xs text-slate-500",children:e.customerNumber})]})}),m.jsx(sz.pj,{children:e.address}),m.jsx(sz.pj,{children:e.city}),m.jsx(sz.pj,{children:(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:k(e.newTerritory||e.territory)}}),m.jsx("span",{className:"text-sm",children:e.newTerritory||e.territory})]})}),m.jsx(sz.pj,{children:e.technician}),m.jsx(sz.pj,{children:m.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:e.daysOfService})}),m.jsx(sz.pj,{className:"text-right font-medium",children:e.monthlyPrice&&e.monthlyPrice>0?`$${e.monthlyPrice.toFixed(2)}`:"-"}),m.jsx(sz.pj,{className:"text-right font-medium",children:e.yearlyPrice&&e.yearlyPrice>0?`$${e.yearlyPrice.toFixed(2)}`:"-"})]},e.customerNumber))})]})})})})]})]})}function s$(){let[e,t]=(0,h.useState)([]),[s,r]=(0,h.useState)([]),[a,n]=(0,h.useState)(null),[l,i]=(0,h.useState)(null),[o,c]=(0,h.useState)("all"),[d,u]=(0,h.useState)([]),[p,x]=(0,h.useState)(null),f={West:e.filter(e=>"West"===e.troyAssignment).length,Central:e.filter(e=>"Central"===e.troyAssignment).length,East:e.filter(e=>"East"===e.troyAssignment).length,Commercial:e.filter(e=>"Commercial"===e.troyAssignment).length,Tucson:e.filter(e=>"Tucson"===e.troyAssignment).length};return(0,m.jsxs)("div",{className:"flex h-full",children:[(0,m.jsxs)("div",{className:"w-80 bg-white border-r overflow-y-auto",children:[(0,m.jsxs)("div",{className:"p-4 border-b bg-gray-50",children:[m.jsx("h2",{className:"text-xl font-bold mb-2",children:"Employee Locations"}),m.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Showing home addresses with Troy's branch assignments"}),(0,m.jsxs)("div",{className:"space-y-2",children:[(0,m.jsxs)("button",{onClick:()=>c("all"),className:`w-full px-3 py-2 text-left rounded ${"all"===o?"bg-gray-700 text-white":"bg-gray-100 hover:bg-gray-200"}`,children:["All Employees (",e.length,")"]}),(0,m.jsxs)("button",{onClick:()=>c("West"),className:`w-full px-3 py-2 text-left rounded flex items-center justify-between ${"West"===o?"bg-blue-600 text-white":"bg-blue-50 hover:bg-blue-100"}`,children:[m.jsx("span",{children:"West Branch"}),m.jsx(j.C,{variant:"secondary",children:f.West})]}),(0,m.jsxs)("button",{onClick:()=>c("Central"),className:`w-full px-3 py-2 text-left rounded flex items-center justify-between ${"Central"===o?"bg-green-600 text-white":"bg-green-50 hover:bg-green-100"}`,children:[m.jsx("span",{children:"Central Branch"}),m.jsx(j.C,{variant:"secondary",children:f.Central})]}),(0,m.jsxs)("button",{onClick:()=>c("East"),className:`w-full px-3 py-2 text-left rounded flex items-center justify-between ${"East"===o?"bg-purple-600 text-white":"bg-purple-50 hover:bg-purple-100"}`,children:[m.jsx("span",{children:"East Branch"}),m.jsx(j.C,{variant:"secondary",children:f.East})]}),(0,m.jsxs)("button",{onClick:()=>c("Commercial"),className:`w-full px-3 py-2 text-left rounded flex items-center justify-between ${"Commercial"===o?"bg-amber-600 text-white":"bg-amber-50 hover:bg-amber-100"}`,children:[m.jsx("span",{children:"Commercial Branch"}),m.jsx(j.C,{variant:"secondary",children:f.Commercial})]}),(0,m.jsxs)("button",{onClick:()=>c("Tucson"),className:`w-full px-3 py-2 text-left rounded flex items-center justify-between ${"Tucson"===o?"bg-pink-600 text-white":"bg-pink-50 hover:bg-pink-100"}`,children:[m.jsx("span",{children:"Tucson Branch"}),m.jsx(j.C,{variant:"secondary",children:f.Tucson})]})]})]}),(0,m.jsxs)("div",{className:"p-4",children:[m.jsx("h3",{className:"font-semibold mb-3",children:"Legend"}),(0,m.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-500"}),m.jsx("span",{children:"West Branch"})]}),(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-4 h-4 rounded-full bg-green-500"}),m.jsx("span",{children:"Central Branch"})]}),(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-4 h-4 rounded-full bg-purple-500"}),m.jsx("span",{children:"East Branch"})]}),(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-4 h-4 rounded-full bg-amber-500"}),m.jsx("span",{children:"Commercial Branch"})]}),(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-4 h-4 rounded-full bg-pink-500"}),m.jsx("span",{children:"Tucson Branch"})]}),(0,m.jsxs)("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t",children:[m.jsx("div",{className:"text-red-500 text-xl",children:""}),m.jsx("span",{children:"2026 Office Location"})]}),(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"text-orange-500 text-xl",children:""}),m.jsx("span",{children:"Future Office Location"})]})]}),l&&(0,m.jsxs)(g.Zb,{className:"mt-4 p-4",children:[m.jsx("h3",{className:"font-semibold mb-2",children:"Selected Employee"}),m.jsx("p",{className:"text-sm font-medium",children:l.name}),m.jsx("p",{className:"text-xs text-gray-600",children:l.title}),m.jsx("p",{className:"text-xs text-gray-600 mt-1",children:l.city}),(0,m.jsxs)("div",{className:"mt-3 space-y-1",children:[(0,m.jsxs)("p",{className:"text-xs",children:[m.jsx("span",{className:"font-medium",children:"Troy's Assignment:"})," ",l.troyAssignment||"N/A"]}),(0,m.jsxs)("p",{className:"text-xs",children:[m.jsx("span",{className:"font-medium",children:"Manager:"})," ",l.manager]}),l.troyAssignment!==l.recommendedOffice&&(0,m.jsxs)("p",{className:"text-xs text-gray-500 italic",children:["(Previous rec.: ",l.recommendedOffice,")"]})]})]})]})]}),m.jsx("div",{className:"flex-1 relative",children:m.jsx("div",{id:"employee-map",className:"w-full h-full"})})]})}let sU={width:"100%",height:"600px"},s_={lat:33.4484,lng:-112.074};function sW({areaFilter:e}){let[t,s]=(0,h.useState)([]),[r,a]=(0,h.useState)([]),[n,l]=(0,h.useState)([]),[i,o]=(0,h.useState)(null),[c,d]=(0,h.useState)(!1),[u,p]=(0,h.useState)([]),[x,g]=(0,h.useState)(null),f=(0,h.useRef)(null),j=e=>({West:"#3b82f6",Central:"#10b981",East:"#f97316",Tucson:"#ec4899",Commercial:"#9333ea"})[e]||"#6b7280",v=(0,h.useCallback)(e=>{f.current=e,d(!0)},[]);return(0,m.jsxs)(W,{mapContainerStyle:sU,center:s_,zoom:9,onLoad:v,options:{disableDefaultUI:!1,zoomControl:!0,streetViewControl:!1,mapTypeControl:!0,fullscreenControl:!0},children:[r.filter(e=>e.show).map(e=>{let t=j(e.area);return e.zips.map(s=>{var r;if(!s?.geometry)return null;let a=(r=s.geometry,r?.coordinates?"Polygon"===r.type?r.coordinates.map(e=>e.map(([e,t])=>({lat:t,lng:e}))):"MultiPolygon"===r.type?r.coordinates.flatMap(e=>e.map(e=>e.map(([e,t])=>({lat:t,lng:e})))):[]:[]);return m.jsx(tM,{paths:a,options:{fillColor:t,fillOpacity:.15,strokeColor:t,strokeOpacity:.15,strokeWeight:.5,clickable:!1,zIndex:1}},`territory-${e.area}-${s.zip}`)})}),t.filter(t=>!!e.Commercial).map(e=>{let t=j(e.closestOffice);return m.jsx(ek,{position:{lat:e.latitude,lng:e.longitude},icon:{path:google.maps.SymbolPath.CIRCLE,fillColor:t,fillOpacity:.9,strokeColor:"#FFFFFF",strokeWeight:2,scale:7},onClick:()=>o(e),title:e.accountName,zIndex:100},e.customerNumber)}),u.filter(e=>"NEXT YEAR"===e.category).map(e=>{let t="Tucson"===e.area?"#ec4899":"West"===e.area?"#3b82f6":"Central"===e.area?"#10b981":"East"===e.area?"#f97316":"#DC2626";return m.jsx(ek,{position:{lat:e.lat,lng:e.lng},icon:{path:"M 0,-24 L 6,-8 L 24,-8 L 10,4 L 16,20 L 0,8 L -16,20 L -10,4 L -24,-8 L -6,-8 Z",fillColor:t,fillOpacity:1,strokeColor:"#FFFFFF",strokeWeight:2,scale:.7,anchor:new google.maps.Point(0,0)},onClick:()=>g(e),title:e.label,zIndex:1e3},`office-${e.zipCode}-${e.category}`)}),i&&m.jsx(tg,{position:{lat:i.latitude,lng:i.longitude},onCloseClick:()=>o(null),children:(0,m.jsxs)("div",{style:{minWidth:"300px",maxWidth:"400px",padding:"12px"},children:[(0,m.jsxs)("div",{style:{marginBottom:"12px"},children:[m.jsx("h3",{style:{margin:0,fontSize:"16px",fontWeight:"bold",marginBottom:"4px"},children:i.accountName}),(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"8px"},children:[m.jsx("span",{style:{background:j(i.closestOffice),color:"white",padding:"4px 10px",borderRadius:"12px",fontSize:"11px",fontWeight:"600"},children:i.closestOffice}),(0,m.jsxs)("span",{style:{fontSize:"12px",color:"#6b7280"},children:[i.distanceToClosest.toFixed(1)," mi"]})]})]}),(0,m.jsxs)("div",{style:{background:"#f9fafb",padding:"10px",borderRadius:"6px",marginBottom:"10px"},children:[m.jsx("div",{style:{fontSize:"13px",color:"#374151",marginBottom:"4px"},children:m.jsx("strong",{children:"\uD83D\uDCCD Address:"})}),(0,m.jsxs)("div",{style:{fontSize:"12px",color:"#6b7280"},children:[i.address,m.jsx("br",{}),i.city,", ",i.state," ",i.zip]})]}),(0,m.jsxs)("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"6px"},children:[m.jsx("strong",{children:"Customer #:"})," ",i.customerNumber]}),(0,m.jsxs)("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"6px"},children:[m.jsx("strong",{children:"Service Days:"}),m.jsx("br",{}),i.daysOfService]}),i.existingTerritory&&(0,m.jsxs)("div",{style:{marginTop:"10px",paddingTop:"10px",borderTop:"1px solid #e2e8f0",fontSize:"11px",color:"#9ca3af"},children:["Previous: ",i.existingTerritory]})]})}),x&&m.jsx(tg,{position:{lat:x.lat,lng:x.lng},onCloseClick:()=>g(null),children:(0,m.jsxs)("div",{style:{minWidth:"200px",padding:"12px"},children:[(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[m.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"#DC2626"}}),m.jsx("h3",{style:{margin:0,fontSize:"16px",fontWeight:"bold"},children:x.label})]}),(0,m.jsxs)("div",{style:{fontSize:"14px",color:"#64748b",marginBottom:"8px"},children:[m.jsx("div",{style:{marginBottom:"4px"},children:x.fullName||(0,sN.G)(x.area)}),(0,m.jsxs)("div",{style:{marginBottom:"8px"},children:["ZIP ",x.zipCode]})]}),m.jsx("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid #e2e8f0"},children:m.jsx("span",{style:{fontSize:"12px",fontWeight:"600",padding:"4px 8px",borderRadius:"4px",backgroundColor:"#FEE2E2",color:"#B91C1C"},children:"Opening 2026"})})]})})]})}var sY=s(34474);let sV=(0,v.Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),sH={width:"100%",height:"600px"},sG={lat:33.4484,lng:-112.074},sJ=e=>({West:"#3b82f6",Central:"#10b981",East:"#f97316",Tucson:"#ec4899",Commercial:"#8b5cf6"})[e]||"#6b7280";function sX({areaFilter:e,onAreaChange:t}){let[s,r]=(0,h.useState)([]),[a,n]=(0,h.useState)([]),[l,i]=(0,h.useState)(null),[o,c]=(0,h.useState)(""),[d,u]=(0,h.useState)("all"),[p,x]=(0,h.useState)(null),[f,j]=(0,h.useState)([]),[v,b]=(0,h.useState)(sG),[y,N]=(0,h.useState)(10),C=(0,h.useMemo)(()=>{let e={};return s.forEach(t=>{e[t.technician]=(e[t.technician]||0)+1}),e},[s]),w=(0,h.useMemo)(()=>{let e={};return s.forEach(t=>{e[t.technician]||(e[t.technician]={});let s=t.territory||"Unknown";e[t.technician][s]=(e[t.technician][s]||0)+1}),e},[s]),k=(0,h.useMemo)(()=>s.filter(t=>!!o&&t.technician===o&&("all"===e||t.territory===e)&&("all"===d||(Array.isArray(t.daysOfService)?t.daysOfService.includes(d):(console.warn("Invalid daysOfService for route:",t.customerNumber),!1)))),[s,o,e,d]),S=(0,h.useMemo)(()=>o?["all",...Object.keys(w[o]||{}).sort()]:["all"],[o,w]),L=e=>{try{if(!e||!e.type||!e.coordinates)return[];if("Polygon"===e.type)return e.coordinates.map(e=>e.map(e=>({lat:e[1],lng:e[0]})));if("MultiPolygon"===e.type)return e.coordinates.flatMap(e=>e.map(e=>e.map(e=>({lat:e[1],lng:e[0]}))))}catch(e){console.error("Error converting geometry:",e)}return[]},P=(0,h.useMemo)(()=>{if(!l||!l.features)return console.warn(" No boundary data available"),[];if(!o)return[];try{let e=new Set(k.map(e=>e.zipCode));console.log(` Rendering polygons for ${e.size} unique ZIP codes`);let t=[],s=new Set;return e.forEach(e=>{if(!s.has(e)){s.add(e);try{let s=l.features.find(t=>t.properties?.ZCTA5CE10===e);if(s?.geometry){let r=L(s.geometry);if(r&&r.length>0){let s=k.find(t=>t.zipCode===e),a=s?.territory||"Unknown";r.forEach((s,r)=>{s&&s.length>0&&t.push({key:`${a}-${e}-${r}`,paths:s,territory:a,zip:e})})}}}catch(t){console.error(` Error processing ZIP ${e}:`,t)}}}),console.log(` Generated ${t.length} polygon objects`),t}catch(e){return console.error(" Error in getTerritoryPolygons:",e),[]}},[l,o,k]),M=(0,h.useMemo)(()=>({totalAccounts:k.length,territories:Array.from(new Set(k.map(e=>e.territory))),zips:Array.from(new Set(k.map(e=>e.zipCode)))}),[k]);return"undefined"!=typeof google&&google.maps?(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)(g.Zb,{className:"p-4",children:[(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,m.jsxs)("div",{children:[(0,m.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["Territory (Optional)",o&&S.length>1&&(0,m.jsxs)("span",{className:"text-xs text-muted-foreground ml-2",children:["(",S.length-1," available)"]})]}),(0,m.jsxs)(sY.Ph,{value:e,onValueChange:t,children:[m.jsx(sY.i4,{children:m.jsx(sY.ki,{})}),(0,m.jsxs)(sY.Bw,{children:[m.jsx(sY.Ql,{value:"all",children:"All Territories"}),S.filter(e=>"all"!==e).map(e=>{let t=o&&w[o]?.[e]||0;return(0,m.jsxs)(sY.Ql,{value:e,children:[{West:"APS of Glendale (West)",Central:"APS of Scottsdale (Central)",East:"APS of Chandler (East)",Tucson:"APS of Tucson"}[e]||e,o&&t>0&&(0,m.jsxs)("span",{className:"text-xs text-muted-foreground ml-2",children:["(",t," stops)"]})]},e)})]})]})]}),(0,m.jsxs)("div",{children:[(0,m.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["Select Technician ",m.jsx("span",{className:"text-red-500",children:"*"})," (",f.length,")"]}),(0,m.jsxs)(sY.Ph,{value:o,onValueChange:c,children:[m.jsx(sY.i4,{className:o?"":"border-red-500",children:m.jsx(sY.ki,{placeholder:"Select a technician..."})}),m.jsx(sY.Bw,{className:"max-h-[300px]",children:f.map(e=>{let t=C[e]||0,s=Object.entries(w[e]||{}).sort(([,e],[,t])=>t-e).map(([e,t])=>`${e}: ${t}`).join(", ");return m.jsx(sY.Ql,{value:e,children:(0,m.jsxs)("div",{className:"flex flex-col",children:[(0,m.jsxs)("span",{className:"font-medium",children:[e," (",t," stops)"]}),s&&m.jsx("span",{className:"text-xs text-muted-foreground mt-0.5",children:s})]})},e)})})]})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-2",children:"Day of Service (Optional)"}),(0,m.jsxs)(sY.Ph,{value:d,onValueChange:u,children:[m.jsx(sY.i4,{children:m.jsx(sY.ki,{})}),(0,m.jsxs)(sY.Bw,{children:[m.jsx(sY.Ql,{value:"all",children:"All Days"}),m.jsx(sY.Ql,{value:"Monday",children:"Monday"}),m.jsx(sY.Ql,{value:"Tuesday",children:"Tuesday"}),m.jsx(sY.Ql,{value:"Wednesday",children:"Wednesday"}),m.jsx(sY.Ql,{value:"Thursday",children:"Thursday"}),m.jsx(sY.Ql,{value:"Friday",children:"Friday"})]})]})]})]}),!o&&(0,m.jsxs)("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg flex items-start gap-2",children:[m.jsx(sV,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 shrink-0 mt-0.5"}),(0,m.jsxs)("div",{className:"text-sm text-blue-900 dark:text-blue-100",children:[m.jsx("strong",{children:"Select a technician to view their route"})," - This shows how an individual's route crosses different territories and ZIP codes. The map will zoom to their service area."]})]}),o&&(0,m.jsxs)("div",{className:"mt-4 pt-4 border-t flex flex-wrap gap-4 text-sm",children:[(0,m.jsxs)("div",{children:[m.jsx("span",{className:"text-muted-foreground",children:"Service Stops:"})," ",m.jsx("span",{className:"font-semibold",children:M.totalAccounts})]}),(0,m.jsxs)("div",{children:[m.jsx("span",{className:"text-muted-foreground",children:"Territories Covered:"})," ",m.jsx("span",{className:"font-semibold",children:M.territories.length}),M.territories.length>0&&(0,m.jsxs)("span",{className:"text-xs text-muted-foreground ml-1",children:["(",M.territories.join(", "),")"]})]}),(0,m.jsxs)("div",{children:[m.jsx("span",{className:"text-muted-foreground",children:"ZIP Codes:"})," ",m.jsx("span",{className:"font-semibold",children:M.zips.length})]})]})]}),m.jsx(g.Zb,{className:"p-4",children:(0,m.jsxs)(W,{mapContainerStyle:sH,center:v,zoom:y,options:{mapTypeId:"roadmap",streetViewControl:!1,mapTypeControl:!0},children:[P.map(e=>m.jsx(tE,{paths:e.paths,options:{fillColor:sJ(e.territory),fillOpacity:.1,strokeColor:sJ(e.territory),strokeOpacity:.4,strokeWeight:1}},e.key)),a.filter(t=>"all"===e||t.area===e).map(e=>{let t="NEXT YEAR"===e.category?"#ef4444":"#f97316";return m.jsx(eS,{position:{lat:e.lat,lng:e.lng},icon:{path:"M 0,-24 6,-7 24,-7 10,4 15,22 0,11 -15,22 -10,4 -24,-7 -6,-7 Z",fillColor:t,fillOpacity:1,strokeColor:"#ffffff",strokeWeight:2,scale:.7}},e.zipCode)}),k.filter(e=>{let t=e.latitude&&e.longitude&&!isNaN(e.latitude)&&!isNaN(e.longitude)&&e.latitude>=-90&&e.latitude<=90&&e.longitude>=-180&&e.longitude<=180;return t||console.warn(" Invalid coordinates for:",e.customerNumber,e.latitude,e.longitude),t&&e.customerNumber}).map(e=>m.jsx(eS,{position:{lat:e.latitude,lng:e.longitude},onClick:()=>x(e),icon:{path:google.maps.SymbolPath.CIRCLE,fillColor:sJ(e.territory),fillOpacity:.9,strokeColor:"#ffffff",strokeWeight:1.5,scale:7}},e.customerNumber)),p&&m.jsx(tf,{position:{lat:p.latitude,lng:p.longitude},onCloseClick:()=>x(null),children:(0,m.jsxs)("div",{className:"p-2",children:[m.jsx("h3",{className:"font-semibold text-sm mb-1",children:p.customerName||"Unknown"}),(0,m.jsxs)("div",{className:"text-xs space-y-1",children:[(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Account:"})," ",p.customerNumber||"N/A"]}),(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Address:"})," ",p.address||"N/A"]}),(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Location:"})," ",p.city&&"null"!==p.city?`${p.city}, AZ ${p.zipCode||""}`:`AZ ${p.zipCode||""}`]}),p.newTerritory&&(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"New Territory:"})," ",p.newTerritory]}),(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Technician:"})," ",p.technician||"N/A"]}),(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Days:"})," ",Array.isArray(p.daysOfService)?p.daysOfService.join(", "):"N/A"]}),(p.monthlyPrice||p.yearlyPrice)&&(0,m.jsxs)("div",{className:"border-t pt-1 mt-1",children:[p.monthlyPrice&&p.monthlyPrice>0&&(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Monthly Price:"})," $",p.monthlyPrice.toFixed(2)]}),p.yearlyPrice&&p.yearlyPrice>0&&(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Yearly Price:"})," $",p.yearlyPrice.toFixed(2)]})]})]})]})})]})}),o&&k.length>0&&(0,m.jsxs)(g.Zb,{className:"p-4",children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold mb-4",children:["Account Listing (",k.length," ",1===k.length?"account":"accounts",")"]}),m.jsx("div",{className:"rounded-md border overflow-auto max-h-[600px]",children:(0,m.jsxs)(sz.iA,{children:[m.jsx(sz.xD,{className:"sticky top-0 bg-background z-10",children:(0,m.jsxs)(sz.SC,{children:[m.jsx(sz.ss,{className:"w-[120px]",children:"Account #"}),m.jsx(sz.ss,{className:"min-w-[200px]",children:"Customer Name"}),m.jsx(sz.ss,{className:"min-w-[250px]",children:"Street Address"}),m.jsx(sz.ss,{className:"w-[140px]",children:"City"}),m.jsx(sz.ss,{className:"w-[80px]",children:"State"}),m.jsx(sz.ss,{className:"w-[90px]",children:"ZIP Code"}),m.jsx(sz.ss,{className:"min-w-[150px]",children:"Days of Service"})]})}),m.jsx(sz.RM,{children:k.sort((e,t)=>e.customerNumber.localeCompare(t.customerNumber)).map(e=>(0,m.jsxs)(sz.SC,{className:"hover:bg-muted/50",children:[m.jsx(sz.pj,{className:"font-medium",children:e.customerNumber}),m.jsx(sz.pj,{children:e.customerName||"Unknown"}),m.jsx(sz.pj,{children:e.address||"N/A"}),m.jsx(sz.pj,{children:e.city||"N/A"}),m.jsx(sz.pj,{children:"AZ"}),m.jsx(sz.pj,{children:e.zipCode||"N/A"}),m.jsx(sz.pj,{children:Array.isArray(e.daysOfService)?e.daysOfService.join(", "):"N/A"})]},e.customerNumber))})]})})]})]}):m.jsx(g.Zb,{className:"p-6",children:(0,m.jsxs)("div",{className:"text-center",children:[m.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"}),m.jsx("p",{className:"text-muted-foreground",children:"Loading Google Maps..."})]})})}var sq=s(79635);let sK=(0,v.Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),sQ={width:"100%",height:"400px"},s0=e=>({West:"bg-blue-500",Central:"bg-green-500",East:"bg-orange-500",Tucson:"bg-pink-500",Commercial:"bg-purple-500","JAX - Maint Ponte Vedra":"bg-cyan-500","JAX - Maint Jacksonville":"bg-blue-600","JAX - Maint St. Augustine":"bg-teal-500","JAX - Maint St. Johns":"bg-emerald-500","JAX - Maint Nocatee":"bg-lime-500","JAX - Maint Beaches":"bg-sky-500","JAX - Maint Outskirts":"bg-indigo-500","JAX - Comm Maint":"bg-violet-500"})[e]||"bg-gray-500",s1=e=>({West:"#3b82f6",Central:"#10b981",East:"#f97316",Tucson:"#ec4899",Commercial:"#8b5cf6","JAX - Maint Ponte Vedra":"#06b6d4","JAX - Maint Jacksonville":"#2563eb","JAX - Maint St. Augustine":"#14b8a6","JAX - Maint St. Johns":"#10b981","JAX - Maint Nocatee":"#84cc16","JAX - Maint Beaches":"#0ea5e9","JAX - Maint Outskirts":"#6366f1","JAX - Comm Maint":"#8b5cf6"})[e]||"#6b7280",s2=e=>({West:"APS of Glendale",Central:"APS of Scottsdale",East:"APS of Chandler",Tucson:"APS of Tucson",Commercial:"APS - Commercial"})[e]||e;function s4(){let[e,t]=(0,h.useState)([]),[s,r]=(0,h.useState)(""),[a,n]=(0,h.useState)([]),[l,i]=(0,h.useState)(null),[o,c]=(0,h.useState)(!1),d=e=>{i(e),c(!0)},u=e=>{let t=`https://www.google.com/maps/search/?api=1&query=${e.latitude},${e.longitude}`;window.open(t,"_blank")},p="undefined"!=typeof google&&google.maps;return(0,m.jsxs)("div",{className:"space-y-4",children:[m.jsx(g.Zb,{className:"p-6",children:(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("div",{children:[m.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Customer Territory Lookup"}),m.jsx("p",{className:"text-muted-foreground",children:"Search by customer name, account number, or address to find territory assignments."})]}),(0,m.jsxs)("div",{className:"relative",children:[m.jsx(E,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),m.jsx(sb.I,{type:"text",placeholder:"Search customer name, account number, or address...",value:s,onChange:e=>r(e.target.value),className:"pl-10 text-lg h-12"})]}),s.length>0&&s.length<2&&m.jsx("p",{className:"text-sm text-muted-foreground",children:"Type at least 2 characters to search"}),s.length>=2&&0===a.length&&(0,m.jsxs)("p",{className:"text-sm text-muted-foreground",children:['No customers found matching "',s,'"']}),a.length>0&&(0,m.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Found ",a.length," customer",1!==a.length?"s":"",50===a.length&&" (showing first 50)"]})]})}),a.length>0&&(0,m.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,m.jsxs)(g.Zb,{className:"p-4",children:[m.jsx("h3",{className:"font-semibold mb-3",children:"Search Results"}),m.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:a.map(e=>m.jsx("div",{onClick:()=>d(e),className:`p-3 rounded-lg border cursor-pointer transition-all hover:shadow-md ${l?.accountNumber===e.accountNumber?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:(0,m.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,m.jsxs)("div",{className:"flex-1 min-w-0",children:[m.jsx("div",{className:"font-medium text-sm truncate",children:String(e.customerName||"Unknown")}),m.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:String(e.accountNumber||"N/A")})]}),m.jsx(j.C,{className:`${s0(e.territory)} text-white shrink-0 text-xs`,children:String(e.territory||"Unknown")})]})},e.accountNumber))})]}),l&&(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)(g.Zb,{className:"p-6",children:[m.jsx("h3",{className:"font-semibold mb-4",children:"Customer Details"}),(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground text-sm mb-1",children:[m.jsx(sq.Z,{className:"h-4 w-4"}),m.jsx("span",{children:"Customer Name"})]}),m.jsx("div",{className:"font-medium",children:l.customerName&&"nan"!==l.customerName&&"null"!==l.customerName?String(l.customerName):"Unknown"})]}),(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground text-sm mb-1",children:[m.jsx(sK,{className:"h-4 w-4"}),m.jsx("span",{children:"Account Number"})]}),m.jsx("div",{className:"font-medium",children:String(l.accountNumber||"N/A")})]}),(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground text-sm mb-1",children:[m.jsx(b,{className:"h-4 w-4"}),m.jsx("span",{children:"Address"})]}),m.jsx("div",{className:"font-medium",children:l.address&&"nan"!==l.address&&"null"!==l.address?String(l.address):"Address not available"}),(0,m.jsxs)("div",{className:"text-sm text-muted-foreground mt-1",children:[l.city&&"null"!==l.city?`${l.city}, `:"","AZ ",l.zipCode||"N/A"]})]}),(0,m.jsxs)("div",{children:[m.jsx("div",{className:"text-muted-foreground text-sm mb-2",children:"Assigned Territory"}),m.jsx(j.C,{className:`${s0(l.territory)} text-white text-sm py-2 px-3`,children:s2(String(l.territory||"Unknown"))})]}),(0,m.jsxs)("button",{onClick:()=>u(l),className:"w-full mt-4 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors flex items-center justify-center gap-2",children:[m.jsx(b,{className:"h-4 w-4"}),"Open in Google Maps (New Tab)"]})]})]}),(0,m.jsxs)(g.Zb,{className:"p-4",children:[m.jsx("h3",{className:"font-semibold mb-3",children:"Location Map"}),p?(0,m.jsxs)(W,{mapContainerStyle:sQ,center:{lat:l.latitude,lng:l.longitude},zoom:15,options:{mapTypeId:"hybrid",streetViewControl:!0,mapTypeControl:!0},children:[m.jsx(eS,{position:{lat:l.latitude,lng:l.longitude},onClick:()=>c(!0),icon:{path:google.maps.SymbolPath.CIRCLE,fillColor:s1(l.territory),fillOpacity:.9,strokeColor:"#ffffff",strokeWeight:2,scale:10}}),o&&m.jsx(tf,{position:{lat:l.latitude,lng:l.longitude},onCloseClick:()=>c(!1),children:(0,m.jsxs)("div",{className:"p-2",children:[m.jsx("h4",{className:"font-semibold text-sm mb-1",children:l.customerName&&"nan"!==l.customerName&&"null"!==l.customerName?String(l.customerName):"Unknown"}),(0,m.jsxs)("div",{className:"text-xs space-y-1",children:[(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Account:"})," ",String(l.accountNumber||"N/A")]}),(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Address:"})," ",l.address&&"nan"!==l.address&&"null"!==l.address?String(l.address):"N/A"]}),(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Location:"})," ",l.city&&"null"!==l.city?`${l.city}, AZ ${l.zipCode||""}`:`AZ ${l.zipCode||"N/A"}`]})]})]})})]}):m.jsx("div",{className:"flex items-center justify-center h-[400px] bg-muted rounded-lg",children:(0,m.jsxs)("div",{className:"text-center",children:[m.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"}),m.jsx("p",{className:"text-muted-foreground",children:"Loading map..."})]})})]})]})]})]})}var s5=s(77506);let s6=(0,v.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var s3=s(48051),s8=s(93095),s7=s(82561),s9=s(52067),re=s(53405),rt=s(2566),rs=s(65819),rr=e=>{let{present:t,children:s}=e,r=function(e){var t,s;let[r,a]=h.useState(),n=h.useRef({}),l=h.useRef(e),i=h.useRef("none"),[o,c]=(t=e?"mounted":"unmounted",s={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},h.useReducer((e,t)=>s[e][t]??e,t));return h.useEffect(()=>{let e=ra(n.current);i.current="mounted"===o?e:"none"},[o]),(0,rs.b)(()=>{let t=n.current,s=l.current;if(s!==e){let r=i.current,a=ra(t);e?c("MOUNT"):"none"===a||t?.display==="none"?c("UNMOUNT"):s&&r!==a?c("ANIMATION_OUT"):c("UNMOUNT"),l.current=e}},[e,c]),(0,rs.b)(()=>{if(r){let e=e=>{let t=ra(n.current).includes(e.animationName);e.target===r&&t&&z.flushSync(()=>c("ANIMATION_END"))},t=e=>{e.target===r&&(i.current=ra(n.current))};return r.addEventListener("animationstart",t),r.addEventListener("animationcancel",e),r.addEventListener("animationend",e),()=>{r.removeEventListener("animationstart",t),r.removeEventListener("animationcancel",e),r.removeEventListener("animationend",e)}}c("ANIMATION_END")},[r,c]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:h.useCallback(e=>{e&&(n.current=getComputedStyle(e)),a(e)},[])}}(t),a="function"==typeof s?s({present:r.isPresent}):h.Children.only(s),n=(0,s3.e)(r.ref,function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(s=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(a));return"function"==typeof s||r.isPresent?h.cloneElement(a,{ref:n}):null};function ra(e){return e?.animationName||"none"}rr.displayName="Presence";var rn=s(45226),rl="Checkbox",[ri,ro]=(0,s8.b)(rl),[rc,rd]=ri(rl),rm=h.forwardRef((e,t)=>{let{__scopeCheckbox:s,name:r,checked:a,defaultChecked:n,required:l,disabled:i,value:o="on",onCheckedChange:c,...d}=e,[u,p]=h.useState(null),x=(0,s3.e)(t,e=>p(e)),g=h.useRef(!1),f=!u||!!u.closest("form"),[j=!1,v]=(0,s9.T)({prop:a,defaultProp:n,onChange:c}),b=h.useRef(j);return h.useEffect(()=>{let e=u?.form;if(e){let t=()=>v(b.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[u,v]),(0,m.jsxs)(rc,{scope:s,state:j,disabled:i,children:[(0,m.jsx)(rn.WV.button,{type:"button",role:"checkbox","aria-checked":rx(j)?"mixed":j,"aria-required":l,"data-state":rg(j),"data-disabled":i?"":void 0,disabled:i,value:o,...d,ref:x,onKeyDown:(0,s7.M)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,s7.M)(e.onClick,e=>{v(e=>!!rx(e)||!e),f&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})}),f&&(0,m.jsx)(rp,{control:u,bubbles:!g.current,name:r,value:o,checked:j,required:l,disabled:i,style:{transform:"translateX(-100%)"}})]})});rm.displayName=rl;var rh="CheckboxIndicator",ru=h.forwardRef((e,t)=>{let{__scopeCheckbox:s,forceMount:r,...a}=e,n=rd(rh,s);return(0,m.jsx)(rr,{present:r||rx(n.state)||!0===n.state,children:(0,m.jsx)(rn.WV.span,{"data-state":rg(n.state),"data-disabled":n.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});ru.displayName=rh;var rp=e=>{let{control:t,checked:s,bubbles:r=!0,...a}=e,n=h.useRef(null),l=(0,re.D)(s),i=(0,rt.t)(t);return h.useEffect(()=>{let e=n.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(l!==s&&t){let a=new Event("click",{bubbles:r});e.indeterminate=rx(s),t.call(e,!rx(s)&&s),e.dispatchEvent(a)}},[l,s,r]),(0,m.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:!rx(s)&&s,...a,tabIndex:-1,ref:n,style:{...e.style,...i,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function rx(e){return"indeterminate"===e}function rg(e){return rx(e)?"indeterminate":e?"checked":"unchecked"}var rf=s(32933);let rj=h.forwardRef(({className:e,...t},s)=>m.jsx(rm,{ref:s,className:(0,sN.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:m.jsx(ru,{className:(0,sN.cn)("flex items-center justify-center text-current"),children:m.jsx(rf.Z,{className:"h-4 w-4"})})}));rj.displayName=rm.displayName;let rv={width:"100%",height:"600px"},rb={lat:33.4484,lng:-112.074},ry={mapTypeControl:!1,fullscreenControl:!0,streetViewControl:!1,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],zoomControl:!0};function rN(){let[e,t]=(0,h.useState)(!0),[s,r]=(0,h.useState)(null),[a,n]=(0,h.useState)(null),[l,i]=(0,h.useState)({}),[o,c]=(0,h.useState)("view2"),[d,u]=(0,h.useState)(2025),[p,x]=(0,h.useState)(null),[j,v]=(0,h.useState)(null),[b,y]=(0,h.useState)(!0),[N,C]=(0,h.useState)(!0),[w,k]=(0,h.useState)(!0),[S,L]=(0,h.useState)(!0),[M,E]=(0,h.useState)(!0),[T,O]=(0,h.useState)(!0),[z,A]=(0,h.useState)(!0),[R,D]=(0,h.useState)("total"),[I,Z]=(0,h.useState)("desc"),F=(0,h.useMemo)(()=>{if(!a)return[];let e="view1"===o?a.view1.filter(e=>e.year===d):a.view2;return(e=e.filter(e=>{let t=e.branch||"Unassigned";return("Glendale"!==t||!!S)&&("Scottsdale"!==t||!!M)&&("Chandler"!==t||!!T)&&("Tucson"!==t||!!z)})).map(e=>{let t=b?e.ots:0,s=N?e.repair:0,r=w?e.remodel:0,a=t+s+r;if("view2"===o){let n=e.activeCustomers>0?t/e.activeCustomers:0,l=e.activeCustomers>0?s/e.activeCustomers:0,i=e.activeCustomers>0?r/e.activeCustomers:0,o=e.activeCustomers>0?a/e.activeCustomers:0;return{...e,ots:t,repair:s,remodel:r,total:a,avgOts:n,avgRepair:l,avgRemodel:i,avgTotal:o}}return{...e,ots:t,repair:s,remodel:r,total:a}}).filter(e=>e.total>0)},[a,o,d,b,N,w,S,M,T,z]),B=(e,t)=>{let s,r;if(0===e)return"rgba(200, 200, 200, 0.3)";let a=Math.pow(Math.sqrt(e/t),.6);return a<.33?(s=Math.round(a/.33*255),r=200):a<.67?(s=255,r=Math.round(200-(a-.33)/.34*100)):(s=255,r=Math.round(100*(1-(a-.67)/.33))),`rgba(${s}, ${r}, 0, 0.7)`},$=(0,h.useMemo)(()=>0===F.length?1:Math.max(...F.map(e=>e.total)),[F]),U=(0,h.useMemo)(()=>{let e=[...F];return e.sort((e,t)=>{let s=e[R]||0,r=t[R]||0;return"desc"===I?r-s:s-r}),e},[F,R,I]),_=e=>{R===e?Z("desc"===I?"asc":"desc"):(D(e),Z("desc"))},Y=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),V=(e,t,s)=>{x(e),v({lat:t,lng:s})};if(e)return m.jsx(g.Zb,{className:"w-full",children:(0,m.jsxs)(g.aY,{className:"flex items-center justify-center p-8",children:[m.jsx(s5.Z,{className:"h-8 w-8 animate-spin text-primary"}),m.jsx("span",{className:"ml-2",children:"Loading ancillary sales data..."})]})});if(s)return m.jsx(g.Zb,{className:"w-full",children:m.jsx(g.aY,{className:"p-8",children:m.jsx("div",{className:"text-red-600",children:s})})});let H=p?F.find(e=>e.zip===p):null;return(0,m.jsxs)("div",{className:"space-y-6",children:[(0,m.jsxs)(g.Zb,{children:[m.jsx(g.Ol,{children:(0,m.jsxs)(g.ll,{className:"flex items-center gap-2",children:[m.jsx(P,{className:"h-6 w-6"}),"Ancillary Sales Analysis"]})}),(0,m.jsxs)(g.aY,{children:[(0,m.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,m.jsxs)("div",{className:"flex gap-2",children:[m.jsx(f.z,{variant:"view1"===o?"default":"outline",onClick:()=>c("view1"),children:"By Year"}),m.jsx(f.z,{variant:"view2"===o?"default":"outline",onClick:()=>c("view2"),children:"2025 Analysis"})]}),"view1"===o&&a&&(0,m.jsxs)(sY.Ph,{value:d.toString(),onValueChange:e=>u(parseInt(e)),children:[m.jsx(sY.i4,{className:"w-32",children:m.jsx(sY.ki,{})}),m.jsx(sY.Bw,{children:a.metadata.years.map(e=>m.jsx(sY.Ql,{value:e.toString(),children:e},e))})]})]}),m.jsx("div",{className:"mt-4 text-sm text-muted-foreground",children:"view1"===o?(0,m.jsxs)("p",{children:["Showing total ancillary sales by ZIP code for year ",d,".",m.jsx("br",{}),m.jsx("strong",{children:"OTS"})," = Other Than Service (minor tasks), ",m.jsx("strong",{children:"Repair"})," = Major repairs, ",m.jsx("strong",{children:"Remodel"})," = Major renovations."]}):(0,m.jsxs)("p",{children:["Showing 2025 totals and averages per active customer by ZIP code.",m.jsx("br",{}),"Averages help identify high-value territories for marketing allocation."]})}),(0,m.jsxs)("div",{className:"mt-6 pt-4 border-t",children:[m.jsx("div",{className:"text-sm font-semibold mb-3",children:"Filter by Sale Type:"}),(0,m.jsxs)("div",{className:"flex gap-6",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[m.jsx(rj,{id:"filter-ots",checked:b,onCheckedChange:e=>y(!!e)}),m.jsx("label",{htmlFor:"filter-ots",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:"OTS (Other Than Service)"})]}),(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[m.jsx(rj,{id:"filter-repair",checked:N,onCheckedChange:e=>C(!!e)}),m.jsx("label",{htmlFor:"filter-repair",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:"Repair"})]}),(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[m.jsx(rj,{id:"filter-remodel",checked:w,onCheckedChange:e=>k(!!e)}),m.jsx("label",{htmlFor:"filter-remodel",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:"Remodel"})]})]})]}),(0,m.jsxs)("div",{className:"mt-6 pt-4 border-t",children:[m.jsx("div",{className:"text-sm font-semibold mb-3",children:"Filter by Branch Location:"}),(0,m.jsxs)("div",{className:"flex gap-6",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[m.jsx(rj,{id:"filter-glendale",checked:S,onCheckedChange:e=>L(!!e)}),m.jsx("label",{htmlFor:"filter-glendale",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:"Glendale"})]}),(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[m.jsx(rj,{id:"filter-scottsdale",checked:M,onCheckedChange:e=>E(!!e)}),m.jsx("label",{htmlFor:"filter-scottsdale",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:"Scottsdale"})]}),(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[m.jsx(rj,{id:"filter-chandler",checked:T,onCheckedChange:e=>O(!!e)}),m.jsx("label",{htmlFor:"filter-chandler",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:"Chandler"})]}),(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[m.jsx(rj,{id:"filter-tucson",checked:z,onCheckedChange:e=>A(!!e)}),m.jsx("label",{htmlFor:"filter-tucson",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:"Tucson"})]})]})]})]})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"pt-6",children:[m.jsx("div",{className:"text-2xl font-bold",children:Y(F.reduce((e,t)=>e+t.total,0))}),m.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Sales"})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"pt-6",children:[m.jsx("div",{className:"text-2xl font-bold",children:Y(F.reduce((e,t)=>e+t.ots,0))}),m.jsx("div",{className:"text-sm text-muted-foreground",children:"OTS Sales"})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"pt-6",children:[m.jsx("div",{className:"text-2xl font-bold",children:Y(F.reduce((e,t)=>e+t.repair,0))}),m.jsx("div",{className:"text-sm text-muted-foreground",children:"Repair Sales"})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"pt-6",children:[m.jsx("div",{className:"text-2xl font-bold",children:Y(F.reduce((e,t)=>e+t.remodel,0))}),m.jsx("div",{className:"text-sm text-muted-foreground",children:"Remodel Sales"})]})})]}),(0,m.jsxs)(g.Zb,{children:[m.jsx(g.Ol,{children:m.jsx(g.ll,{children:"view1"===o?`Sales by ZIP Code - ${d}`:"2025 Sales by ZIP Code"})}),m.jsx(g.aY,{children:m.jsx("div",{className:"rounded-lg overflow-hidden border",children:(0,m.jsxs)(W,{mapContainerStyle:rv,center:rb,zoom:8,options:ry,children:[F.map(e=>{let t=l[e.zip];if(!t||!t.geometry)return null;let s=t.geometry.coordinates[0].map(e=>({lat:e[1],lng:e[0]}));return m.jsx(tM,{paths:s,options:{fillColor:B(e.total,$),fillOpacity:.6,strokeColor:"#333",strokeWeight:1,clickable:!0},onClick:()=>{e.latitude&&e.longitude&&V(e.zip,e.latitude,e.longitude)}},e.zip)}),H&&j&&m.jsx(tg,{position:j,onCloseClick:()=>{x(null),v(null)},children:(0,m.jsxs)("div",{className:"p-2",children:[(0,m.jsxs)("h3",{className:"font-bold text-lg",children:["ZIP ",H.zip]}),"view1"===o?(0,m.jsxs)("div",{className:"space-y-1 mt-2",children:[(0,m.jsxs)("div",{className:"text-sm",children:[m.jsx("strong",{children:"Year:"})," ",H.year]}),(0,m.jsxs)("div",{className:"text-sm",children:[m.jsx("strong",{children:"Total:"})," ",Y(H.total)]}),(0,m.jsxs)("div",{className:"text-sm",children:[m.jsx("strong",{children:"OTS:"})," ",Y(H.ots)]}),(0,m.jsxs)("div",{className:"text-sm",children:[m.jsx("strong",{children:"Repair:"})," ",Y(H.repair)]}),(0,m.jsxs)("div",{className:"text-sm",children:[m.jsx("strong",{children:"Remodel:"})," ",Y(H.remodel)]})]}):(0,m.jsxs)("div",{className:"space-y-1 mt-2",children:[(0,m.jsxs)("div",{className:"text-sm",children:[m.jsx("strong",{children:"Active Customers:"})," ",H.activeCustomers]}),(0,m.jsxs)("div",{className:"text-sm",children:[m.jsx("strong",{children:"Total 2025:"})," ",Y(H.total)]}),(0,m.jsxs)("div",{className:"text-sm",children:[m.jsx("strong",{children:"Avg per Customer:"})," ",Y(H.avgTotal)]}),(0,m.jsxs)("div",{className:"text-sm text-muted-foreground mt-2",children:["OTS Avg: ",Y(H.avgOts)]}),(0,m.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Repair Avg: ",Y(H.avgRepair)]}),(0,m.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Remodel Avg: ",Y(H.avgRemodel)]})]})]})})]})})})]}),(0,m.jsxs)(g.Zb,{children:[m.jsx(g.Ol,{children:(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsxs)(g.ll,{children:["view1"===o?`All ZIP Codes - ${d}`:"All ZIP Codes - 2025"," (",U.length," total)"]}),(0,m.jsxs)(f.z,{onClick:()=>{if(0===U.length)return;let e="view1"===o?["ZIP Code","Branch","City","Year","OTS","Repair","Remodel","Total"]:["ZIP Code","Branch","City","Active Customers","OTS","Repair","Remodel","Total","Avg per Customer"],t=U.map(e=>"view1"===o?[e.zip,e.branch||"",e.city||"",e.year,e.ots.toFixed(2),e.repair.toFixed(2),e.remodel.toFixed(2),e.total.toFixed(2)]:[e.zip,e.branch||"",e.city||"",e.activeCustomers,e.ots.toFixed(2),e.repair.toFixed(2),e.remodel.toFixed(2),e.total.toFixed(2),e.avgTotal.toFixed(2)]),s=new Blob([[e.join(","),...t.map(e=>e.join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a"),a=URL.createObjectURL(s);r.setAttribute("href",a);let n="view1"===o?`ancillary-sales-${d}.csv`:"ancillary-sales-2025-analysis.csv";r.setAttribute("download",n),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)},variant:"outline",size:"sm",className:"gap-2",children:[m.jsx(s6,{className:"h-4 w-4"}),"Export CSV"]})]})}),m.jsx(g.aY,{children:m.jsx("div",{className:"rounded-md border max-h-[600px] overflow-auto",children:(0,m.jsxs)(sz.iA,{children:[m.jsx(sz.xD,{className:"sticky top-0 bg-background z-10",children:(0,m.jsxs)(sz.SC,{children:[m.jsx(sz.ss,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>_("zip"),children:(0,m.jsxs)("div",{className:"flex items-center gap-1",children:["ZIP Code","zip"===R&&("desc"===I?m.jsx(sR,{className:"h-4 w-4"}):m.jsx(sA,{className:"h-4 w-4"})),"zip"!==R&&m.jsx(sD,{className:"h-4 w-4 opacity-30"})]})}),m.jsx(sz.ss,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>_("branch"),children:(0,m.jsxs)("div",{className:"flex items-center gap-1",children:["Branch","branch"===R&&("desc"===I?m.jsx(sR,{className:"h-4 w-4"}):m.jsx(sA,{className:"h-4 w-4"})),"branch"!==R&&m.jsx(sD,{className:"h-4 w-4 opacity-30"})]})}),"view2"===o&&m.jsx(sz.ss,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>_("activeCustomers"),children:(0,m.jsxs)("div",{className:"flex items-center gap-1",children:["Active Customers","activeCustomers"===R&&("desc"===I?m.jsx(sR,{className:"h-4 w-4"}):m.jsx(sA,{className:"h-4 w-4"})),"activeCustomers"!==R&&m.jsx(sD,{className:"h-4 w-4 opacity-30"})]})}),m.jsx(sz.ss,{className:"text-right cursor-pointer hover:bg-muted/50",onClick:()=>_("ots"),children:(0,m.jsxs)("div",{className:"flex items-center justify-end gap-1",children:["OTS","ots"===R&&("desc"===I?m.jsx(sR,{className:"h-4 w-4"}):m.jsx(sA,{className:"h-4 w-4"})),"ots"!==R&&m.jsx(sD,{className:"h-4 w-4 opacity-30"})]})}),m.jsx(sz.ss,{className:"text-right cursor-pointer hover:bg-muted/50",onClick:()=>_("repair"),children:(0,m.jsxs)("div",{className:"flex items-center justify-end gap-1",children:["Repair","repair"===R&&("desc"===I?m.jsx(sR,{className:"h-4 w-4"}):m.jsx(sA,{className:"h-4 w-4"})),"repair"!==R&&m.jsx(sD,{className:"h-4 w-4 opacity-30"})]})}),m.jsx(sz.ss,{className:"text-right cursor-pointer hover:bg-muted/50",onClick:()=>_("remodel"),children:(0,m.jsxs)("div",{className:"flex items-center justify-end gap-1",children:["Remodel","remodel"===R&&("desc"===I?m.jsx(sR,{className:"h-4 w-4"}):m.jsx(sA,{className:"h-4 w-4"})),"remodel"!==R&&m.jsx(sD,{className:"h-4 w-4 opacity-30"})]})}),m.jsx(sz.ss,{className:"text-right cursor-pointer hover:bg-muted/50",onClick:()=>_("total"),children:(0,m.jsxs)("div",{className:"flex items-center justify-end gap-1",children:["Total","total"===R&&("desc"===I?m.jsx(sR,{className:"h-4 w-4"}):m.jsx(sA,{className:"h-4 w-4"})),"total"!==R&&m.jsx(sD,{className:"h-4 w-4 opacity-30"})]})}),"view2"===o&&m.jsx(sz.ss,{className:"text-right cursor-pointer hover:bg-muted/50",onClick:()=>_("avgTotal"),children:(0,m.jsxs)("div",{className:"flex items-center justify-end gap-1",children:["Avg per Customer","avgTotal"===R&&("desc"===I?m.jsx(sR,{className:"h-4 w-4"}):m.jsx(sA,{className:"h-4 w-4"})),"avgTotal"!==R&&m.jsx(sD,{className:"h-4 w-4 opacity-30"})]})})]})}),m.jsx(sz.RM,{children:U.map(e=>(0,m.jsxs)(sz.SC,{children:[m.jsx(sz.pj,{className:"font-medium",children:e.zip}),m.jsx(sz.pj,{children:e.branch||"Unassigned"}),"view2"===o&&m.jsx(sz.pj,{children:e.activeCustomers}),m.jsx(sz.pj,{className:"text-right",children:Y(e.ots)}),m.jsx(sz.pj,{className:"text-right",children:Y(e.repair)}),m.jsx(sz.pj,{className:"text-right",children:Y(e.remodel)}),m.jsx(sz.pj,{className:"text-right font-bold",children:Y(e.total)}),"view2"===o&&m.jsx(sz.pj,{className:"text-right",children:Y(e.avgTotal)})]},e.zip))})]})})})]})]})}let rC=(0,v.Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),rw={width:"100%",height:"700px"},rk={styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!0};function rS(e){switch(e){case"North":return"#3B82F6";case"Central":return"#10B981";case"South":return"#F59E0B";default:return"#6B7280"}}function rL(e){switch(e){case"North":return"APS Miami - North";case"Central":return"APS Miami - Central";case"South":return"APS Miami - South";default:return e}}function rP({areaFilter:e}){let[t,s]=(0,h.useState)([]),[r,a]=(0,h.useState)({}),[n,l]=(0,h.useState)(null),[i,o]=(0,h.useState)(null),[c,d]=(0,h.useState)(!1),[u,p]=(0,h.useState)(""),[x,j]=(0,h.useState)(null),v=(0,h.useRef)(null),y=(0,h.useCallback)(e=>{v.current=e},[]),N=()=>{let e=u.trim();if(!e)return;let s=t.find(t=>t.zip===e);s&&v.current&&(v.current.panTo({lat:s.latitude,lng:s.longitude}),v.current.setZoom(12),j(e),o(e),setTimeout(()=>j(null),3e3))},C=e=>{o(e),d(!1)},w=e=>{if(!e||!e.coordinates)return[];try{if("Polygon"===e.type)return e.coordinates.map(e=>e.map(([e,t])=>({lat:t,lng:e})));if("MultiPolygon"===e.type)return e.coordinates.flatMap(e=>e.map(e=>e.map(([e,t])=>({lat:t,lng:e}))))}catch(e){console.error("Error converting geometry:",e)}return[]},k=t.filter(t=>e[t.territory]),S=i?t.find(e=>e.zip===i):null;return(0,m.jsxs)("div",{className:"space-y-4",children:[m.jsx(g.Zb,{className:"p-4",children:(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx(sb.I,{placeholder:"Enter ZIP code to locate...",value:u,onChange:e=>p(e.target.value),onKeyDown:e=>"Enter"===e.key&&N(),className:"max-w-xs"}),(0,m.jsxs)(f.z,{onClick:N,size:"sm",children:[m.jsx(E,{className:"h-4 w-4 mr-2"}),"Search"]})]})}),m.jsx(g.Zb,{className:"p-2",children:(0,m.jsxs)(W,{mapContainerStyle:rw,center:{lat:25.87,lng:-80.19},zoom:10,options:rk,onLoad:y,children:[k.map(e=>{let t=r[e.zip];if(!t)return null;let s=w(t);if(0===s.length)return null;let a=x===e.zip,n=i===e.zip,l=rS(e.territory);return m.jsx(tM,{paths:s,options:{fillColor:l,fillOpacity:a?.6:n?.5:.25,strokeColor:a?"#000000":"#1e293b",strokeOpacity:a?1:.85,strokeWeight:a?3:2,clickable:!0},onClick:()=>C(e.zip)},e.zip)}),n&&m.jsx(ek,{position:{lat:n.lat,lng:n.lng},icon:{path:google.maps.SymbolPath.CIRCLE,scale:12,fillColor:"#FFD700",fillOpacity:1,strokeColor:"#FFFFFF",strokeWeight:3},onClick:()=>{d(!0),o(null)}}),i&&S&&m.jsx(tg,{position:{lat:S.latitude,lng:S.longitude},onCloseClick:()=>o(null),children:(0,m.jsxs)("div",{className:"p-2",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx(b,{className:"h-4 w-4",style:{color:rS(S.territory)}}),(0,m.jsxs)("h3",{className:"font-semibold",children:["ZIP ",S.zip]})]}),(0,m.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"City:"})," ",S.city]}),(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Territory:"})," ",rL(S.territory)]}),(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Accounts:"})," ",S.accountCount]})]})]})}),c&&n&&m.jsx(tg,{position:{lat:n.lat,lng:n.lng},onCloseClick:()=>d(!1),children:(0,m.jsxs)("div",{className:"p-2",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx(rC,{className:"h-4 w-4 fill-yellow-500 text-yellow-500"}),m.jsx("h3",{className:"font-semibold",children:n.fullName})]}),(0,m.jsxs)("div",{className:"space-y-1 text-sm",children:[m.jsx("p",{children:m.jsx("strong",{children:"Central Office"})}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"11720 Biscayne Blvd, Miami, FL 33181"})]})]})})]})}),(0,m.jsxs)(g.Zb,{className:"p-4",children:[m.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Proposed Miami Territory Distribution (Scenario II - ZIP Codes)"}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:["North","Central","South"].map(e=>{let s=t.filter(t=>t.territory===e),r=s.reduce((e,t)=>e+t.accountCount,0),a=rS(e);return(0,m.jsxs)("div",{className:"flex items-start gap-2",children:[m.jsx("div",{className:"w-4 h-4 rounded mt-0.5 flex-shrink-0",style:{backgroundColor:a}}),(0,m.jsxs)("div",{className:"flex-1",children:[m.jsx("p",{className:"font-medium text-sm",children:rL(e)}),(0,m.jsxs)("p",{className:"text-xs text-muted-foreground",children:[r," accounts  ",s.length," ZIP codes"]})]})]},e)})}),(0,m.jsxs)("div",{className:"mt-4 pt-4 border-t",children:[(0,m.jsxs)("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"font-medium",children:"Total:"}),(0,m.jsxs)("span",{children:[t.reduce((e,t)=>e+t.accountCount,0)," accounts in ",t.length," ZIP codes"]})]}),m.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"ZIP codes assigned based on geographic location to achieve balanced account distribution (~285 per territory)."})]})]})]})}let rM={width:"100%",height:"700px"},rE={styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!0};function rT(e){switch(e){case"North":return"#3B82F6";case"Central":return"#10B981";case"South":return"#F59E0B";default:return"#6B7280"}}function rO(e){switch(e){case"North":return"APS Miami - North";case"Central":return"APS Miami - Central";case"South":return"APS Miami - South";default:return e}}function rz({areaFilter:e}){let[t,s]=(0,h.useState)([]),[r,a]=(0,h.useState)(null),[n,l]=(0,h.useState)(null),[i,o]=(0,h.useState)(null),[c,d]=(0,h.useState)(!1),[u,p]=(0,h.useState)(""),[x,j]=(0,h.useState)(null),v=(0,h.useRef)(null),y=(0,h.useCallback)(e=>{v.current=e},[]),N=()=>{let e=u.trim().toUpperCase();if(!e)return;let s=t.find(t=>t.customerNumber.toUpperCase().includes(e)||t.customerName.toUpperCase().includes(e)||t.address.toUpperCase().includes(e));s&&v.current&&(v.current.panTo({lat:s.latitude,lng:s.longitude}),v.current.setZoom(14),j(s.customerNumber),o(s),setTimeout(()=>j(null),3e3))},C=e=>{o(e),d(!1)},w=t.filter(t=>e[t.kmlTerritory]),k={North:t.filter(e=>"North"===e.kmlTerritory).length,Central:t.filter(e=>"Central"===e.kmlTerritory).length,South:t.filter(e=>"South"===e.kmlTerritory).length};return(0,m.jsxs)("div",{className:"space-y-4",children:[m.jsx(g.Zb,{className:"p-4",children:(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx(sb.I,{placeholder:"Search by account number, name, or address...",value:u,onChange:e=>p(e.target.value),onKeyDown:e=>"Enter"===e.key&&N(),className:"max-w-md"}),(0,m.jsxs)(f.z,{onClick:N,size:"sm",children:[m.jsx(E,{className:"h-4 w-4 mr-2"}),"Search"]})]})}),m.jsx(g.Zb,{className:"p-2",children:(0,m.jsxs)(W,{mapContainerStyle:rM,center:{lat:25.87,lng:-80.19},zoom:10,options:rE,onLoad:y,children:[r&&(0,m.jsxs)(m.Fragment,{children:[m.jsx(tC,{path:r.north.map(e=>({lat:e.lat,lng:e.lng})),options:{strokeColor:"#3B82F6",strokeOpacity:.8,strokeWeight:4,geodesic:!0}}),m.jsx(tC,{path:r.south.map(e=>({lat:e.lat,lng:e.lng})),options:{strokeColor:"#F59E0B",strokeOpacity:.8,strokeWeight:4,geodesic:!0}})]}),w.map(e=>{let t=x===e.customerNumber,s=rT(e.kmlTerritory);return m.jsx(ek,{position:{lat:e.latitude,lng:e.longitude},icon:{path:google.maps.SymbolPath.CIRCLE,scale:t?10:6,fillColor:s,fillOpacity:t?1:.8,strokeColor:t?"#000000":"#FFFFFF",strokeWeight:t?3:1},onClick:()=>C(e),zIndex:t?1e3:void 0},e.customerNumber)}),n&&m.jsx(ek,{position:{lat:n.lat,lng:n.lng},icon:{path:google.maps.SymbolPath.CIRCLE,scale:12,fillColor:"#FFD700",fillOpacity:1,strokeColor:"#FFFFFF",strokeWeight:3},onClick:()=>{d(!0),o(null)}}),i&&m.jsx(tg,{position:{lat:i.latitude,lng:i.longitude},onCloseClick:()=>o(null),children:(0,m.jsxs)("div",{className:"p-2",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx(b,{className:"h-4 w-4",style:{color:rT(i.kmlTerritory)}}),m.jsx("h3",{className:"font-semibold",children:i.customerName})]}),(0,m.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Account:"})," ",i.customerNumber]}),(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Address:"})," ",i.address]}),(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"City:"})," ",i.city,", ",i.state," ",i.zip]}),(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"KML Territory:"})," ",rO(i.kmlTerritory)]}),i.kmlTerritory!==i.originalTerritory&&(0,m.jsxs)("p",{className:"text-orange-600",children:[m.jsx("strong",{children:"Changed from:"})," ",rO(i.originalTerritory)]}),(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Monthly:"})," $",i.monthlyPrice.toFixed(2)]}),(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Route:"})," ",i.route]})]})]})}),c&&n&&m.jsx(tg,{position:{lat:n.lat,lng:n.lng},onCloseClick:()=>d(!1),children:(0,m.jsxs)("div",{className:"p-2",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx(rC,{className:"h-4 w-4 fill-yellow-500 text-yellow-500"}),m.jsx("h3",{className:"font-semibold",children:n.fullName})]}),(0,m.jsxs)("div",{className:"space-y-1 text-sm",children:[m.jsx("p",{children:m.jsx("strong",{children:"Central Office"})}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"11720 Biscayne Blvd, Miami, FL 33181"})]})]})})]})}),(0,m.jsxs)(g.Zb,{className:"p-4",children:[m.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Miami KML Boundary Scenario"}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:["North","Central","South"].map(e=>{let t=k[e],s=rT(e);return(0,m.jsxs)("div",{className:"flex items-start gap-2",children:[m.jsx("div",{className:"w-4 h-4 rounded-full mt-0.5 flex-shrink-0",style:{backgroundColor:s}}),(0,m.jsxs)("div",{className:"flex-1",children:[m.jsx("p",{className:"font-medium text-sm",children:rO(e)}),(0,m.jsxs)("p",{className:"text-xs text-muted-foreground",children:[t," accounts"]})]})]},e)})}),m.jsx("div",{className:"pt-3 border-t border-gray-200",children:(0,m.jsxs)("p",{className:"text-xs text-muted-foreground",children:[m.jsx("strong",{children:"Note:"})," Territory assignments based on precise KML boundary lines. Each dot represents one customer account, colored by assigned territory."]})})]})]})}var rA=s(96633),rR=s(941);let rD={width:"100%",height:"500px"},rI={styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!0};function rZ(e,t=.5){return({North:`rgba(59, 130, 246, ${t})`,Central:`rgba(16, 185, 129, ${t})`,South:`rgba(245, 158, 11, ${t})`})[e]||`rgba(107, 114, 128, ${t})`}function rF(e){return({North:"#2563eb",Central:"#059669",South:"#d97706"})[e]||"#6b7280"}function rB({areaFilter:e}){let[t,s]=(0,h.useState)([]),[r,a]=(0,h.useState)([]),[n,l]=(0,h.useState)({}),[i,o]=(0,h.useState)(null),[c,d]=(0,h.useState)("summary"),u=(0,h.useRef)(null),p={lat:25.85,lng:-80.19},x=(0,h.useCallback)(e=>{u.current=e},[]),v=e=>{d(c===e?null:e)},y=e=>{let s={};t.forEach(e=>{s[e.zip]=e.territory});let a=r.map(e=>({...e,territory:s[e.zip]||"Unknown"}));e&&(a=a.filter(t=>t.territory===e)),a.sort((e,t)=>e.zip.localeCompare(t.zip));let n=new Blob([["Customer Number,Account Name,Address,City,ZIP,Territory,Route",...a.map(e=>[e.customerNumber,e.accountName,e.address,e.city,e.zip,e.territory,e.route]).map(e=>e.map(e=>"string"==typeof e&&(e.includes(",")||e.includes('"'))?`"${e.replace(/"/g,'""')}"`:e).join(","))].join("\n")],{type:"text/csv"}),l=URL.createObjectURL(n),i=document.createElement("a");i.href=l,i.download=e?`miami-${e.toLowerCase()}-customers.csv`:"miami-all-customers.csv",i.click()},N=t.filter(t=>e[t.territory]),C={North:{zips:0,accounts:0},Central:{zips:0,accounts:0},South:{zips:0,accounts:0}};t.forEach(e=>{C[e.territory]&&(C[e.territory].zips++,C[e.territory].accounts+=e.accountCount)});let k=C.North.accounts+C.Central.accounts+C.South.accounts;return(0,m.jsxs)("div",{className:"space-y-4",children:[m.jsx(g.Zb,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200",children:(0,m.jsxs)(g.aY,{className:"p-4",children:[m.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"MIAMI BREAKUP SCENARIO II - ZIP CODES"}),m.jsx("p",{className:"text-sm text-slate-600",children:"This scenario assigns entire ZIP codes to North/Central/South territories based on geographic location."})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>v("summary"),children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[m.jsx(b,{className:"h-5 w-5 text-blue-600"}),"Territory Distribution Summary"]}),"summary"===c?m.jsx(rA.Z,{className:"h-5 w-5"}):m.jsx(rR.Z,{className:"h-5 w-5"})]}),"summary"===c&&(0,m.jsxs)("div",{className:"mt-4",children:[(0,m.jsxs)("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[(0,m.jsxs)("div",{className:"text-center p-4 bg-slate-50 rounded-lg",children:[m.jsx("p",{className:"text-sm text-muted-foreground",children:"Total"}),m.jsx("p",{className:"text-2xl font-bold text-slate-700",children:k}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Accounts"})]}),["North","Central","South"].map(e=>(0,m.jsxs)("div",{className:"text-center p-4 rounded-lg",style:{backgroundColor:rZ(e,.15)},children:[m.jsx("p",{className:"text-sm font-medium",style:{color:rF(e)},children:e}),m.jsx("p",{className:"text-2xl font-bold",children:C[e].accounts}),(0,m.jsxs)("p",{className:"text-xs text-muted-foreground",children:[C[e].zips," ZIPs"]})]},e))]}),(0,m.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,m.jsxs)(f.z,{variant:"outline",size:"sm",onClick:()=>y(null),children:[m.jsx(s6,{className:"h-4 w-4 mr-2"}),"Export All (",k,")"]}),["North","Central","South"].map(e=>(0,m.jsxs)(f.z,{variant:"outline",size:"sm",onClick:()=>y(e),style:{borderColor:rF(e),color:rF(e)},children:[m.jsx(s6,{className:"h-4 w-4 mr-2"}),e," (",C[e].accounts,")"]},e))]})]})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4",children:[m.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Territory Map"}),(0,m.jsxs)(W,{mapContainerStyle:rD,center:p,zoom:10,options:rI,onLoad:x,children:[N.map(e=>{let t=n[e.zip];if(!t?.geometry?.coordinates)return null;let s=t.geometry.coordinates[0].map(e=>({lat:e[1],lng:e[0]}));return m.jsx(tM,{paths:s,options:{fillColor:rZ(e.territory,.4),fillOpacity:.4,strokeColor:rF(e.territory),strokeOpacity:1,strokeWeight:1},onClick:()=>o(e.zip)},e.zip)}),i&&m.jsx(tg,{position:(()=>{let e=t.find(e=>e.zip===i);return e?{lat:e.latitude,lng:e.longitude}:p})(),onCloseClick:()=>o(null),children:m.jsx("div",{className:"p-2",children:(()=>{let e=t.find(e=>e.zip===i);return e?(0,m.jsxs)(m.Fragment,{children:[m.jsx("p",{className:"font-bold",children:e.zip}),m.jsx("p",{className:"text-sm",children:e.city}),(0,m.jsxs)("p",{className:"text-sm",children:["Territory: ",e.territory]}),(0,m.jsxs)("p",{className:"text-sm",children:[e.accountCount," accounts"]})]}):null})()})})]})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>v("zips"),children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[m.jsx(w,{className:"h-5 w-5"}),"ZIP Code Assignments (",t.length," ZIPs)"]}),"zips"===c?m.jsx(rA.Z,{className:"h-5 w-5"}):m.jsx(rR.Z,{className:"h-5 w-5"})]}),"zips"===c&&m.jsx("div",{className:"mt-4 max-h-96 overflow-y-auto",children:(0,m.jsxs)(sz.iA,{children:[m.jsx(sz.xD,{children:(0,m.jsxs)(sz.SC,{children:[m.jsx(sz.ss,{children:"ZIP"}),m.jsx(sz.ss,{children:"City"}),m.jsx(sz.ss,{children:"Territory"}),m.jsx(sz.ss,{className:"text-right",children:"Accounts"})]})}),m.jsx(sz.RM,{children:t.filter(t=>e[t.territory]).sort((e,t)=>e.zip.localeCompare(t.zip)).map(e=>(0,m.jsxs)(sz.SC,{children:[m.jsx(sz.pj,{className:"font-medium",children:e.zip}),m.jsx(sz.pj,{children:e.city}),m.jsx(sz.pj,{children:m.jsx(j.C,{variant:"outline",style:{backgroundColor:rZ(e.territory,.2),borderColor:rF(e.territory),color:rF(e.territory)},children:e.territory})}),m.jsx(sz.pj,{className:"text-right",children:e.accountCount})]},e.zip))})]})})]})})]})}let r$=(0,v.Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var rU=s(66307);let r_={width:"100%",height:"650px"},rW={styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!0};function rY(e,t=.5){return({North:`rgba(59, 130, 246, ${t})`,Central:`rgba(16, 185, 129, ${t})`,South:`rgba(245, 158, 11, ${t})`})[e]||`rgba(107, 114, 128, ${t})`}function rV(e){return({North:"#2563eb",Central:"#059669",South:"#d97706"})[e]||"#6b7280"}function rH({areaFilter:e}){let[t,s]=(0,h.useState)([]),[r,a]=(0,h.useState)([]),[n,l]=(0,h.useState)([]),[i,o]=(0,h.useState)({}),[c,d]=(0,h.useState)(null),[u,p]=(0,h.useState)("all"),[x,v]=(0,h.useState)(""),[b,y]=(0,h.useState)(!1),[N,C]=(0,h.useState)(new Set),w=(0,h.useRef)(null),k=(0,h.useCallback)(e=>{w.current=e},[]),S=[...new Set(t.map(e=>e.route).filter(Boolean))].sort(),L=t.filter(t=>{if(!e[t.newTerritory]||"all"!==u&&t.route!==u)return!1;if(x){let e=x.toLowerCase();return t.customerNumber.toLowerCase().includes(e)||t.accountName.toLowerCase().includes(e)||t.address.toLowerCase().includes(e)||t.zip.includes(e)}return!0}),P=r.filter(t=>e[t.territory]),M=e=>n.find(t=>t.route===e),E=e=>{C(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},T=(e,s)=>{let r=t.filter(t=>t.route===e);return{needsReassignment:r.filter(e=>e.newTerritory!==s),noReassignment:r.filter(e=>e.newTerritory===s)}},O=e=>{let t=i[e];if(!t)return[];try{if("Polygon"===t.type)return t.coordinates[0].map(e=>({lat:e[1],lng:e[0]}));if("MultiPolygon"===t.type)return t.coordinates[0][0].map(e=>({lat:e[1],lng:e[0]}))}catch(e){}return[]},z=e=>{let t="all"===e?L:L.filter(t=>t.newTerritory===e);t.sort((e,t)=>e.zip.localeCompare(t.zip));let s=new Blob([["Customer Number,Account Name,Address,City,State,ZIP,Route,Service Days,New Territory,Monthly Price,Yearly Price",...t.map(e=>[e.customerNumber,`"${e.accountName||""}"`,`"${e.address||""}"`,`"${e.city||""}"`,e.state,e.zip,`"${e.route||""}"`,`"${e.serviceDays||""}"`,e.newTerritory,e.monthlyPrice,e.yearlyPrice].join(","))].join("\n")],{type:"text/csv"}),r=URL.createObjectURL(s),a=document.createElement("a");a.href=r,a.download=`miami-${"all"===e?"all-territories":e.toLowerCase()}-customers-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)},A={North:{customers:t.filter(e=>"North"===e.newTerritory).length,zips:r.filter(e=>"North"===e.territory).length},Central:{customers:t.filter(e=>"Central"===e.newTerritory).length,zips:r.filter(e=>"Central"===e.territory).length},South:{customers:t.filter(e=>"South"===e.newTerritory).length,zips:r.filter(e=>"South"===e.territory).length}},R=n.filter(e=>e.hasConflict);return(0,m.jsxs)("div",{className:"space-y-4",children:[m.jsx(g.Zb,{className:"bg-gradient-to-r from-blue-50 to-green-50",children:(0,m.jsxs)(g.aY,{className:"p-4",children:[m.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"FINAL MIAMI TERRITORY MAP"}),m.jsx("p",{className:"text-sm text-slate-600",children:"Finalized territory assignments with route conflict analysis. ZIP codes are assigned to North, Central, or South territories."})]})}),m.jsx(g.Zb,{children:m.jsx(g.aY,{className:"p-4",children:(0,m.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[m.jsx("div",{className:"flex-1 min-w-[200px]",children:m.jsx(sb.I,{placeholder:"Search customer, address, or ZIP...",value:x,onChange:e=>v(e.target.value),className:"w-full"})}),(0,m.jsxs)(sY.Ph,{value:u,onValueChange:p,children:[m.jsx(sY.i4,{className:"w-[250px]",children:m.jsx(sY.ki,{placeholder:"Filter by route"})}),(0,m.jsxs)(sY.Bw,{children:[m.jsx(sY.Ql,{value:"all",children:"All Routes"}),S.map(e=>{let t=M(e);return m.jsx(sY.Ql,{value:e,children:(0,m.jsxs)("span",{className:"flex items-center gap-2",children:[t?.hasConflict&&m.jsx(r$,{className:"h-3 w-3 text-amber-500"}),e]})},e)})]})]}),(0,m.jsxs)("div",{className:"flex gap-2",children:[(0,m.jsxs)(f.z,{variant:"outline",size:"sm",onClick:()=>z("all"),className:"gap-1",children:[m.jsx(s6,{className:"h-4 w-4"}),"Export All"]}),(0,m.jsxs)(f.z,{variant:"outline",size:"sm",onClick:()=>z("North"),className:"gap-1 border-blue-300 text-blue-700 hover:bg-blue-50",children:[m.jsx(s6,{className:"h-4 w-4"}),"North"]}),(0,m.jsxs)(f.z,{variant:"outline",size:"sm",onClick:()=>z("Central"),className:"gap-1 border-green-300 text-green-700 hover:bg-green-50",children:[m.jsx(s6,{className:"h-4 w-4"}),"Central"]}),(0,m.jsxs)(f.z,{variant:"outline",size:"sm",onClick:()=>z("South"),className:"gap-1 border-amber-300 text-amber-700 hover:bg-amber-50",children:[m.jsx(s6,{className:"h-4 w-4"}),"South"]})]})]})})}),m.jsx(g.Zb,{children:m.jsx(g.aY,{className:"p-2",children:(0,m.jsxs)(W,{mapContainerStyle:r_,center:{lat:25.85,lng:-80.19},zoom:10,options:rW,onLoad:k,children:[P.map(e=>{let t=O(e.zip);return 0===t.length?null:m.jsx(tM,{paths:t,options:{fillColor:rY(e.territory,.4),fillOpacity:.4,strokeColor:rV(e.territory),strokeOpacity:.8,strokeWeight:c===e.zip?3:1},onClick:()=>d(e.zip)},e.zip)}),L.filter(e=>e.latitude&&e.longitude).map(e=>{let t=M(e.route),s=t?.hasConflict;return m.jsx(ek,{position:{lat:e.latitude,lng:e.longitude},icon:{path:google.maps.SymbolPath.CIRCLE,scale:6,fillColor:s?"#ef4444":rV(e.newTerritory),fillOpacity:.9,strokeColor:"#ffffff",strokeWeight:1},onClick:()=>d(e.customerNumber)},e.customerNumber)}),c&&t.find(e=>e.customerNumber===c)&&(()=>{let e=t.find(e=>e.customerNumber===c),s=M(e.route);return m.jsx(tg,{position:{lat:e.latitude,lng:e.longitude},onCloseClick:()=>d(null),children:(0,m.jsxs)("div",{className:"p-2 min-w-[250px]",children:[m.jsx("h3",{className:"font-bold text-sm",children:e.accountName}),m.jsx("p",{className:"text-xs text-gray-600",children:e.customerNumber}),(0,m.jsxs)("div",{className:"mt-2 space-y-1 text-xs",children:[(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Address:"})," ",e.address]}),(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"City:"})," ",e.city,", ",e.state," ",e.zip]}),(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Route:"})," ",e.route]}),(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Service:"})," ",e.serviceDays]}),(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Territory:"})," ",(0,m.jsxs)("span",{className:"font-semibold px-1.5 py-0.5 rounded",style:{backgroundColor:rY(e.newTerritory,.2),color:rV(e.newTerritory)},children:["APS Miami - ",e.newTerritory]})]}),s?.hasConflict&&(0,m.jsxs)("div",{className:"mt-2 p-2 bg-amber-50 rounded border border-amber-200",children:[(0,m.jsxs)("p",{className:"font-semibold text-amber-800 flex items-center gap-1",children:[m.jsx(r$,{className:"h-3 w-3"}),"Route Conflict"]}),(0,m.jsxs)("p",{className:"text-amber-700",children:["This route spans ",Object.keys(s.territories).length," territories:"]}),m.jsx("ul",{className:"mt-1",children:Object.entries(s.territories).map(([e,t])=>(0,m.jsxs)("li",{className:"text-amber-600",children:[e,": ",t," customers"]},e))})]})]})]})})})(),c&&r.find(e=>e.zip===c)&&m.jsx(tg,{position:{lat:r.find(e=>e.zip===c).latitude,lng:r.find(e=>e.zip===c).longitude},onCloseClick:()=>d(null),children:(0,m.jsxs)("div",{className:"p-2",children:[(0,m.jsxs)("h3",{className:"font-bold",children:["ZIP: ",c]}),m.jsx("p",{className:"text-sm",children:r.find(e=>e.zip===c)?.city}),(0,m.jsxs)("p",{className:"text-sm mt-1",children:[m.jsx("strong",{children:"Territory:"})," ","APS Miami - ",r.find(e=>e.zip===c)?.territory]}),(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("strong",{children:"Accounts:"})," ",r.find(e=>e.zip===c)?.accountCount]})]})})]})})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4",children:[m.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Final Territory Distribution"}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:["North","Central","South"].map(e=>(0,m.jsxs)("div",{className:"space-y-2",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:rV(e)}}),(0,m.jsxs)("h4",{className:"font-medium",children:["APS Miami - ",e]})]}),(0,m.jsxs)("div",{className:"text-sm space-y-1",children:[(0,m.jsxs)("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-muted-foreground",children:"Customers:"}),m.jsx("span",{className:"font-semibold",children:A[e].customers})]}),(0,m.jsxs)("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-muted-foreground",children:"ZIP Codes:"}),m.jsx("span",{className:"font-semibold",children:A[e].zips})]})]})]},e))}),m.jsx("div",{className:"mt-4 pt-4 border-t",children:(0,m.jsxs)("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"font-medium",children:"Total:"}),(0,m.jsxs)("span",{children:[t.length," customers in ",r.length," ZIP codes"]})]})})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4",children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[m.jsx(r$,{className:"h-5 w-5 text-amber-500"}),"Route Conflicts (",R.length," of ",n.length," routes)"]}),m.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Click on a route card to see which customers need reassignment. Customers in territories other than the route's primary assignment are shown first in red."}),m.jsx("div",{className:"space-y-3",children:R.map(e=>{let t=N.has(e.route),{needsReassignment:s,noReassignment:r}=T(e.route,e.primaryTerritory);return(0,m.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg overflow-hidden",children:[(0,m.jsxs)("div",{className:"p-3 cursor-pointer hover:bg-amber-100 transition-colors",onClick:()=>E(e.route),children:[(0,m.jsxs)("div",{className:"flex items-start justify-between",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[t?m.jsx(rA.Z,{className:"h-4 w-4 text-amber-600"}):m.jsx(rR.Z,{className:"h-4 w-4 text-amber-600"}),(0,m.jsxs)("div",{children:[m.jsx("p",{className:"font-medium text-sm",children:e.route}),(0,m.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.totalCustomers," total customers ",(0,m.jsxs)("span",{className:"text-red-600 font-medium",children:[" ",s.length," need reassignment"]})]})]})]}),(0,m.jsxs)(j.C,{variant:"outline",className:"bg-amber-100 text-amber-800 border-amber-300",children:[Object.keys(e.territories).length," territories"]})]}),m.jsx("div",{className:"mt-2 flex flex-wrap gap-1 ml-6",children:Object.entries(e.territories).sort((e,t)=>t[1]-e[1]).map(([e,t])=>(0,m.jsxs)(j.C,{variant:"secondary",style:{backgroundColor:rY(e,.2),color:rV(e),borderColor:rV(e)},className:"text-xs border",children:[e,": ",t]},e))}),(0,m.jsxs)("p",{className:"mt-2 text-xs text-muted-foreground ml-6",children:["Primary Assignment: ",m.jsx("strong",{className:"text-green-700",children:e.primaryTerritory})]})]}),t&&(0,m.jsxs)("div",{className:"border-t border-amber-200 bg-white",children:[s.length>0&&(0,m.jsxs)("div",{className:"p-3 bg-red-50",children:[(0,m.jsxs)("h5",{className:"text-xs font-semibold text-red-800 mb-2 flex items-center gap-1",children:[m.jsx(r$,{className:"h-3 w-3"}),"NEEDS REASSIGNMENT (",s.length,")"]}),m.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:s.sort((e,t)=>e.newTerritory.localeCompare(t.newTerritory)).map(e=>(0,m.jsxs)("div",{className:"flex items-center justify-between text-xs p-2 rounded border",style:{backgroundColor:rY(e.newTerritory,.15),borderColor:rV(e.newTerritory)},children:[(0,m.jsxs)("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"font-medium truncate",children:e.accountName}),(0,m.jsxs)("p",{className:"text-muted-foreground truncate",children:[e.address,", ",e.city," ",e.zip]})]}),m.jsx(j.C,{variant:"outline",className:"ml-2 shrink-0 text-xs",style:{backgroundColor:rY(e.newTerritory,.3),borderColor:rV(e.newTerritory),color:rV(e.newTerritory)},children:e.newTerritory})]},e.customerNumber))})]}),(0,m.jsxs)("div",{className:"p-3 bg-green-50",children:[(0,m.jsxs)("h5",{className:"text-xs font-semibold text-green-800 mb-2 flex items-center gap-1",children:[m.jsx(rU.Z,{className:"h-3 w-3"}),"NO REASSIGNMENT NEEDED (",r.length,")"]}),m.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:r.sort((e,t)=>e.zip.localeCompare(t.zip)).map(e=>(0,m.jsxs)("div",{className:"flex items-center justify-between text-xs p-2 rounded bg-green-100/50 border border-green-200",children:[(0,m.jsxs)("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"font-medium truncate",children:e.accountName}),(0,m.jsxs)("p",{className:"text-muted-foreground truncate",children:[e.address,", ",e.city," ",e.zip]})]}),m.jsx(j.C,{variant:"outline",className:"ml-2 shrink-0 text-xs bg-green-100 border-green-400 text-green-700",children:e.newTerritory})]},e.customerNumber))})]})]})]},e.route)})}),(0,m.jsxs)("div",{className:"mt-6 pt-4 border-t",children:[(0,m.jsxs)("h4",{className:"text-sm font-semibold mb-2 flex items-center gap-2",children:[m.jsx(rU.Z,{className:"h-4 w-4 text-green-500"}),"Clean Routes (",n.length-R.length," routes)"]}),m.jsx("div",{className:"flex flex-wrap gap-2",children:n.filter(e=>!e.hasConflict).map(e=>(0,m.jsxs)(j.C,{variant:"outline",style:{backgroundColor:rY(e.primaryTerritory,.1),borderColor:rV(e.primaryTerritory)},children:[e.route," (",e.totalCustomers,")"]},e.route))})]})]})})]})}let rG=(0,v.Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),rJ={width:"100%",height:"550px"},rX={styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!0};function rq(e,t=.5){return({North:`rgba(59, 130, 246, ${t})`,Central:`rgba(16, 185, 129, ${t})`,South:`rgba(245, 158, 11, ${t})`})[e]||`rgba(107, 114, 128, ${t})`}function rK(e){return({North:"#2563eb",Central:"#059669",South:"#d97706"})[e]||"#6b7280"}function rQ({areaFilter:e}){let[t,s]=(0,h.useState)(null),[r,a]=(0,h.useState)([]),[n,l]=(0,h.useState)({}),[i,o]=(0,h.useState)(null),[c,d]=(0,h.useState)(new Set(["auto"])),[u,p]=(0,h.useState)(new Set),[x,v]=(0,h.useState)("change"),[b,y]=(0,h.useState)("desc"),N=(0,h.useRef)(null),k=(0,h.useCallback)(e=>{N.current=e},[]),S=e=>{d(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},L=e=>{p(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},P=r.filter(t=>e[t.territory]),M=e=>{let t=n[e];if(!t)return[];try{if("Polygon"===t.type)return t.coordinates[0].map(e=>({lat:e[1],lng:e[0]}));if("MultiPolygon"===t.type)return t.coordinates[0][0].map(e=>({lat:e[1],lng:e[0]}))}catch(e){}return[]},E=e=>{x===e?y("asc"===b?"desc":"asc"):(v(e),y("desc"))},T=({column:e})=>x!==e?m.jsx(sD,{className:"h-3 w-3 ml-1 opacity-50"}):"asc"===b?m.jsx(sA,{className:"h-3 w-3 ml-1"}):m.jsx(sR,{className:"h-3 w-3 ml-1"});if(!t)return m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-8 text-center",children:[m.jsx(C,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-muted-foreground"}),m.jsx("p",{children:"Loading optimization data..."})]})});let O=(()=>{if(!t)return{};let e={};for(let s of t.autoReassignments)e[s.oldRoute]||(e[s.oldRoute]=[]),e[s.oldRoute].push(s);return e})(),z=(()=>{if(!t)return{};let e={};for(let s of t.manualReassignments)e[s.currentRoute]||(e[s.currentRoute]=[]),e[s.currentRoute].push(s);return e})();return(0,m.jsxs)("div",{className:"space-y-4",children:[m.jsx(g.Zb,{className:"bg-gradient-to-r from-purple-50 to-indigo-50",children:(0,m.jsxs)(g.aY,{className:"p-4",children:[m.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"10% REASSIGNMENT OPTIMIZATION"}),m.jsx("p",{className:"text-sm text-slate-600",children:"Automated route reassignment analysis with \xb110% (or \xb18 pools) tolerance per technician. This view shows which customers can be automatically moved vs. those requiring manual decisions."})]})}),(0,m.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[m.jsx(g.Zb,{className:"bg-slate-50",children:(0,m.jsxs)(g.aY,{className:"p-4 text-center",children:[m.jsx("p",{className:"text-2xl font-bold",children:t.summary.totalConflicts}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Conflicts"})]})}),m.jsx(g.Zb,{className:"bg-green-50 border-green-200",children:(0,m.jsxs)(g.aY,{className:"p-4 text-center",children:[m.jsx("p",{className:"text-2xl font-bold text-green-700",children:t.summary.autoReassigned}),m.jsx("p",{className:"text-xs text-green-600",children:"Auto-Reassigned (61%)"})]})}),m.jsx(g.Zb,{className:"bg-amber-50 border-amber-200",children:(0,m.jsxs)(g.aY,{className:"p-4 text-center",children:[m.jsx("p",{className:"text-2xl font-bold text-amber-700",children:t.summary.manualRequired}),m.jsx("p",{className:"text-xs text-amber-600",children:"Manual Decisions (39%)"})]})}),m.jsx(g.Zb,{className:"bg-blue-50 border-blue-200",children:(0,m.jsxs)(g.aY,{className:"p-4 text-center",children:[m.jsx("p",{className:"text-2xl font-bold text-blue-700",children:"13 / 18"}),m.jsx("p",{className:"text-xs text-blue-600",children:"Clean Routes After"})]})})]}),m.jsx(g.Zb,{children:m.jsx(g.aY,{className:"p-4",children:(0,m.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,m.jsxs)(f.z,{variant:"default",size:"sm",onClick:()=>{if(!t)return;let e=new Blob([["Customer Number,Account Name,Address,City,ZIP,Territory,Current Route,New Route",...t.autoReassignments.map(e=>[e.customerNumber,`"${e.accountName||""}"`,`"${e.address||""}"`,`"${e.city||""}"`,e.zip,e.territory,`"${e.oldRoute||""}"`,`"${e.newRoute||""}"`].join(","))].join("\n")],{type:"text/csv"}),s=URL.createObjectURL(e),r=document.createElement("a");r.href=s,r.download=`miami-auto-reassignments-10pct-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s)},className:"gap-2 bg-green-600 hover:bg-green-700",children:[m.jsx(s6,{className:"h-4 w-4"}),"Export Auto-Reassignments (",t.summary.autoReassigned,")"]}),(0,m.jsxs)(f.z,{variant:"default",size:"sm",onClick:()=>{if(!t)return;let e=new Blob([["Customer Number,Account Name,Address,City,ZIP,Current Route,Route Primary Territory,Customer Territory,Reason",...t.manualReassignments.map(e=>[e.customerNumber,`"${e.accountName||""}"`,`"${e.address||""}"`,`"${e.city||""}"`,e.zip,`"${e.currentRoute||""}"`,e.routePrimaryTerritory,e.currentTerritory,`"${e.reason||""}"`].join(","))].join("\n")],{type:"text/csv"}),s=URL.createObjectURL(e),r=document.createElement("a");r.href=s,r.download=`miami-manual-decisions-10pct-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s)},className:"gap-2 bg-amber-600 hover:bg-amber-700",children:[m.jsx(s6,{className:"h-4 w-4"}),"Export Manual Decisions (",t.summary.manualRequired,")"]}),(0,m.jsxs)(f.z,{variant:"outline",size:"sm",onClick:()=>{if(!t)return;let e=new Blob([["Route,Technician,Primary Territory,Before,After,Change,Percent Change,Incoming,Outgoing",...t.routeChanges.map(e=>[`"${e.route}"`,`"${e.technician}"`,e.primaryTerritory,e.before,e.after,e.change,e.percentChange,e.incomingCount,e.outgoingCount].join(","))].join("\n")],{type:"text/csv"}),s=URL.createObjectURL(e),r=document.createElement("a");r.href=s,r.download=`miami-route-changes-10pct-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s)},className:"gap-2",children:[m.jsx(s6,{className:"h-4 w-4"}),"Export Route Changes"]})]})})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-2",children:[(0,m.jsxs)(W,{mapContainerStyle:rJ,center:{lat:25.85,lng:-80.19},zoom:10,options:rX,onLoad:k,children:[P.map(e=>{let t=M(e.zip);return 0===t.length?null:m.jsx(tM,{paths:t,options:{fillColor:rq(e.territory,.35),fillOpacity:.35,strokeColor:rK(e.territory),strokeOpacity:.7,strokeWeight:1}},e.zip)}),t.autoReassignments.filter(t=>t.latitude&&t.longitude&&e[t.territory]).map(e=>m.jsx(ek,{position:{lat:e.latitude,lng:e.longitude},icon:{path:google.maps.SymbolPath.CIRCLE,scale:5,fillColor:"#22c55e",fillOpacity:.9,strokeColor:"#ffffff",strokeWeight:1},onClick:()=>o(`auto-${e.customerNumber}`)},`auto-${e.customerNumber}`)),t.manualReassignments.filter(t=>t.latitude&&t.longitude&&e[t.currentTerritory]).map(e=>m.jsx(ek,{position:{lat:e.latitude,lng:e.longitude},icon:{path:google.maps.SymbolPath.CIRCLE,scale:6,fillColor:"#ef4444",fillOpacity:.9,strokeColor:"#ffffff",strokeWeight:2},onClick:()=>o(`manual-${e.customerNumber}`)},`manual-${e.customerNumber}`)),i&&i.startsWith("auto-")&&(()=>{let e=t.autoReassignments.find(e=>`auto-${e.customerNumber}`===i);return e&&e.latitude&&e.longitude?m.jsx(tg,{position:{lat:e.latitude,lng:e.longitude},onCloseClick:()=>o(null),children:(0,m.jsxs)("div",{className:"p-2 min-w-[280px]",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx(rU.Z,{className:"h-4 w-4 text-green-600"}),m.jsx("span",{className:"text-xs font-medium text-green-700",children:"AUTO-REASSIGNED"})]}),m.jsx("h3",{className:"font-bold text-sm",children:e.accountName}),m.jsx("p",{className:"text-xs text-gray-500 font-mono",children:e.customerNumber}),(0,m.jsxs)("div",{className:"mt-2 space-y-1 text-xs",children:[(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Address:"})," ",e.address,", ",e.city," ",e.zip]}),(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Territory:"})," ",e.territory]}),(0,m.jsxs)("div",{className:"flex items-center gap-2 mt-2 p-2 bg-green-50 rounded",children:[m.jsx("span",{className:"text-red-600 line-through",children:e.oldRoute}),m.jsx(rG,{className:"h-3 w-3"}),m.jsx("span",{className:"text-green-700 font-semibold",children:e.newRoute})]})]})]})}):null})(),i&&i.startsWith("manual-")&&(()=>{let e=t.manualReassignments.find(e=>`manual-${e.customerNumber}`===i);return e&&e.latitude&&e.longitude?m.jsx(tg,{position:{lat:e.latitude,lng:e.longitude},onCloseClick:()=>o(null),children:(0,m.jsxs)("div",{className:"p-2 min-w-[280px]",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx(r$,{className:"h-4 w-4 text-amber-600"}),m.jsx("span",{className:"text-xs font-medium text-amber-700",children:"MANUAL DECISION REQUIRED"})]}),m.jsx("h3",{className:"font-bold text-sm",children:e.accountName}),m.jsx("p",{className:"text-xs text-gray-500 font-mono",children:e.customerNumber}),(0,m.jsxs)("div",{className:"mt-2 space-y-1 text-xs",children:[(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Address:"})," ",e.address,", ",e.city," ",e.zip]}),(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Current Route:"})," ",e.currentRoute]}),(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Customer Territory:"}),m.jsx(j.C,{variant:"outline",className:"ml-1",style:{backgroundColor:rq(e.currentTerritory,.2),borderColor:rK(e.currentTerritory),color:rK(e.currentTerritory)},children:e.currentTerritory})]}),(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Route Primary:"})," ",e.routePrimaryTerritory]}),m.jsx("div",{className:"mt-2 p-2 bg-amber-50 rounded border border-amber-200",children:m.jsx("p",{className:"text-amber-800",children:e.reason})})]})]})}):null})()]}),(0,m.jsxs)("div",{className:"flex justify-center gap-6 mt-3 text-xs",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),(0,m.jsxs)("span",{children:["Auto-Reassigned (",t.summary.autoReassigned,")"]})]}),(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),(0,m.jsxs)("span",{children:["Manual Decision (",t.summary.manualRequired,")"]})]})]})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4",children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[m.jsx(w,{className:"h-5 w-5"}),"Technician Pool Count Changes"]}),m.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Click column headers to sort"}),m.jsx("div",{className:"overflow-x-auto",children:(0,m.jsxs)(sz.iA,{children:[m.jsx(sz.xD,{children:(0,m.jsxs)(sz.SC,{children:[m.jsx(sz.ss,{className:"cursor-pointer hover:bg-slate-100 select-none",onClick:()=>E("technician"),children:(0,m.jsxs)("div",{className:"flex items-center",children:["Route / Technician",m.jsx(T,{column:"technician"})]})}),m.jsx(sz.ss,{className:"text-center cursor-pointer hover:bg-slate-100 select-none",onClick:()=>E("primaryTerritory"),children:(0,m.jsxs)("div",{className:"flex items-center justify-center",children:["Primary",m.jsx(T,{column:"primaryTerritory"})]})}),m.jsx(sz.ss,{className:"text-right cursor-pointer hover:bg-slate-100 select-none",onClick:()=>E("before"),children:(0,m.jsxs)("div",{className:"flex items-center justify-end",children:["Before",m.jsx(T,{column:"before"})]})}),m.jsx(sz.ss,{className:"text-right cursor-pointer hover:bg-slate-100 select-none",onClick:()=>E("after"),children:(0,m.jsxs)("div",{className:"flex items-center justify-end",children:["After",m.jsx(T,{column:"after"})]})}),m.jsx(sz.ss,{className:"text-right cursor-pointer hover:bg-slate-100 select-none",onClick:()=>E("change"),children:(0,m.jsxs)("div",{className:"flex items-center justify-end",children:["Change",m.jsx(T,{column:"change"})]})}),m.jsx(sz.ss,{className:"text-right cursor-pointer hover:bg-slate-100 select-none",onClick:()=>E("percentChange"),children:(0,m.jsxs)("div",{className:"flex items-center justify-end",children:["% Change",m.jsx(T,{column:"percentChange"})]})}),m.jsx(sz.ss,{className:"text-center cursor-pointer hover:bg-slate-100 select-none",onClick:()=>E("incomingCount"),children:(0,m.jsxs)("div",{className:"flex items-center justify-center",children:["Incoming",m.jsx(T,{column:"incomingCount"})]})}),m.jsx(sz.ss,{className:"text-center cursor-pointer hover:bg-slate-100 select-none",onClick:()=>E("outgoingCount"),children:(0,m.jsxs)("div",{className:"flex items-center justify-center",children:["Outgoing",m.jsx(T,{column:"outgoingCount"})]})})]})}),m.jsx(sz.RM,{children:(t?[...t.routeChanges].sort((e,t)=>{let s,r;switch(x){case"technician":s=e.technician.toLowerCase(),r=t.technician.toLowerCase();break;case"primaryTerritory":s=e.primaryTerritory,r=t.primaryTerritory;break;case"before":s=e.before,r=t.before;break;case"after":s=e.after,r=t.after;break;case"change":default:s=e.change,r=t.change;break;case"percentChange":s=e.percentChange,r=t.percentChange;break;case"incomingCount":s=e.incomingCount,r=t.incomingCount;break;case"outgoingCount":s=e.outgoingCount,r=t.outgoingCount}return"string"==typeof s&&"string"==typeof r?"asc"===b?s.localeCompare(r):r.localeCompare(s):"asc"===b?s-r:r-s}):[]).map(e=>(0,m.jsxs)(sz.SC,{className:0!==e.change?"bg-yellow-50/50":"",children:[m.jsx(sz.pj,{className:"font-medium",children:(0,m.jsxs)("div",{children:[m.jsx("p",{className:"text-sm",children:e.technician}),m.jsx("p",{className:"text-xs text-muted-foreground",children:e.route})]})}),m.jsx(sz.pj,{className:"text-center",children:m.jsx(j.C,{variant:"outline",style:{backgroundColor:rq(e.primaryTerritory,.2),borderColor:rK(e.primaryTerritory),color:rK(e.primaryTerritory)},children:e.primaryTerritory})}),m.jsx(sz.pj,{className:"text-right",children:e.before}),m.jsx(sz.pj,{className:"text-right font-semibold",children:e.after}),m.jsx(sz.pj,{className:"text-right",children:(0,m.jsxs)("span",{className:`font-semibold ${e.change>0?"text-green-600":e.change<0?"text-red-600":"text-gray-500"}`,children:[e.change>0?"+":"",e.change]})}),m.jsx(sz.pj,{className:"text-right",children:(0,m.jsxs)("span",{className:`${Math.abs(e.percentChange)>10?"text-amber-600 font-semibold":"text-gray-500"}`,children:[e.percentChange>0?"+":"",e.percentChange,"%"]})}),m.jsx(sz.pj,{className:"text-center",children:e.incomingCount>0&&(0,m.jsxs)(j.C,{variant:"outline",className:"bg-green-50 text-green-700 border-green-300",children:["+",e.incomingCount]})}),m.jsx(sz.pj,{className:"text-center",children:e.outgoingCount>0&&(0,m.jsxs)(j.C,{variant:"outline",className:"bg-red-50 text-red-700 border-red-300",children:["-",e.outgoingCount]})})]},e.route))})]})})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>S("auto"),children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[m.jsx(rU.Z,{className:"h-5 w-5 text-green-600"}),"Auto-Reassignments (",t.summary.autoReassigned," customers)"]}),c.has("auto")?m.jsx(rA.Z,{className:"h-5 w-5"}):m.jsx(rR.Z,{className:"h-5 w-5"})]}),m.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"These customers can be automatically moved to new routes. Export this list to update your system."}),c.has("auto")&&m.jsx("div",{className:"mt-4 space-y-3",children:Object.entries(O).sort((e,t)=>t[1].length-e[1].length).map(([e,t])=>{let s=u.has(`auto-${e}`),r={};for(let e of t)r[e.newRoute]||(r[e.newRoute]=[]),r[e.newRoute].push(e);return(0,m.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg overflow-hidden",children:[m.jsx("div",{className:"p-3 cursor-pointer hover:bg-green-100 transition-colors",onClick:()=>L(`auto-${e}`),children:(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[s?m.jsx(rA.Z,{className:"h-4 w-4 text-green-600"}):m.jsx(rR.Z,{className:"h-4 w-4 text-green-600"}),(0,m.jsxs)("div",{children:[(0,m.jsxs)("p",{className:"font-medium text-sm",children:["FROM: ",e]}),(0,m.jsxs)("p",{className:"text-xs text-muted-foreground",children:[t.length," customers moving out"]})]})]}),m.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(r).map(([e,t])=>(0,m.jsxs)(j.C,{variant:"outline",className:"bg-green-100 text-green-800 border-green-300 text-xs",children:[" ",e.replace("AFP Route ","").replace("AFP ",""),": ",t.length]},e))})]})}),s&&m.jsx("div",{className:"border-t border-green-200 bg-white p-3",children:Object.entries(r).map(([e,t])=>(0,m.jsxs)("div",{className:"mb-3 last:mb-0",children:[(0,m.jsxs)("h5",{className:"text-xs font-semibold text-green-800 mb-2 flex items-center gap-1",children:[m.jsx(rG,{className:"h-3 w-3"}),"TO: ",e," (",t.length,")"]}),m.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:t.sort((e,t)=>e.zip.localeCompare(t.zip)).map(e=>(0,m.jsxs)("div",{className:"flex items-center justify-between text-xs p-2 rounded bg-green-50 border border-green-200",children:[(0,m.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,m.jsxs)("p",{className:"font-medium",children:[m.jsx("span",{className:"text-green-700 font-mono mr-2",children:e.customerNumber}),e.accountName]}),(0,m.jsxs)("p",{className:"text-muted-foreground truncate",children:[e.address,", ",e.city," ",e.zip]})]}),m.jsx(j.C,{variant:"outline",className:"ml-2 shrink-0 text-xs",style:{backgroundColor:rq(e.territory,.2),borderColor:rK(e.territory),color:rK(e.territory)},children:e.territory})]},e.customerNumber))})]},e))})]},e)})})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>S("manual"),children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[m.jsx(r$,{className:"h-5 w-5 text-amber-600"}),"Manual Decisions Required (",t.summary.manualRequired," customers)"]}),c.has("manual")?m.jsx(rA.Z,{className:"h-5 w-5"}):m.jsx(rR.Z,{className:"h-5 w-5"})]}),m.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"These customers cannot be auto-reassigned due to route capacity limits. Management needs to decide which technician should absorb these pools."}),c.has("manual")&&m.jsx("div",{className:"mt-4 space-y-3",children:Object.entries(z).sort((e,t)=>t[1].length-e[1].length).map(([e,t])=>{let s=u.has(`manual-${e}`),r={};for(let e of t)r[e.currentTerritory]||(r[e.currentTerritory]=[]),r[e.currentTerritory].push(e);let a=t[0]?.routePrimaryTerritory||"Unknown";return(0,m.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg overflow-hidden",children:[m.jsx("div",{className:"p-3 cursor-pointer hover:bg-amber-100 transition-colors",onClick:()=>L(`manual-${e}`),children:(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[s?m.jsx(rA.Z,{className:"h-4 w-4 text-amber-600"}):m.jsx(rR.Z,{className:"h-4 w-4 text-amber-600"}),(0,m.jsxs)("div",{children:[m.jsx("p",{className:"font-medium text-sm",children:e}),(0,m.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Primary: ",m.jsx("span",{className:"font-semibold",children:a})," ",t.length," stuck customers (route at minimum capacity)"]})]})]}),m.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(r).map(([e,t])=>(0,m.jsxs)(j.C,{variant:"outline",className:"text-xs",style:{backgroundColor:rq(e,.2),borderColor:rK(e),color:rK(e)},children:["Need ",e,": ",t.length]},e))})]})}),s&&m.jsx("div",{className:"border-t border-amber-200 bg-white p-3",children:Object.entries(r).map(([e,t])=>(0,m.jsxs)("div",{className:"mb-3 last:mb-0",children:[(0,m.jsxs)("h5",{className:"text-xs font-semibold mb-2 flex items-center gap-1",style:{color:rK(e)},children:["NEEDS ",e.toUpperCase()," ROUTE (",t.length,")"]}),m.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:t.sort((e,t)=>e.zip.localeCompare(t.zip)).map(e=>(0,m.jsxs)("div",{className:"flex items-center justify-between text-xs p-2 rounded border",style:{backgroundColor:rq(e.currentTerritory,.1),borderColor:rK(e.currentTerritory)},children:[(0,m.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,m.jsxs)("p",{className:"font-medium",children:[m.jsx("span",{className:"text-amber-700 font-mono mr-2",children:e.customerNumber}),e.accountName]}),(0,m.jsxs)("p",{className:"text-muted-foreground truncate",children:[e.address,", ",e.city," ",e.zip]})]}),m.jsx(j.C,{variant:"outline",className:"ml-2 shrink-0 text-xs",style:{backgroundColor:rq(e.currentTerritory,.3),borderColor:rK(e.currentTerritory),color:rK(e.currentTerritory)},children:e.currentTerritory})]},e.customerNumber))})]},e))})]},e)})})]})})]})}let r0={width:"100%",height:"550px"},r1={styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!0};function r2(e,t=.5){return({North:`rgba(59, 130, 246, ${t})`,Central:`rgba(16, 185, 129, ${t})`,South:`rgba(245, 158, 11, ${t})`})[e]||`rgba(107, 114, 128, ${t})`}function r4(e){return({North:"#2563eb",Central:"#059669",South:"#d97706"})[e]||"#6b7280"}function r5({areaFilter:e}){let[t,s]=(0,h.useState)(null),[r,a]=(0,h.useState)([]),[n,l]=(0,h.useState)({}),[i,o]=(0,h.useState)(null),[c,d]=(0,h.useState)(new Set(["comparison"])),[u,p]=(0,h.useState)("change"),[x,v]=(0,h.useState)("desc"),y=(0,h.useRef)(null),N={lat:25.85,lng:-80.19},k=(0,h.useCallback)(e=>{y.current=e},[]),S=e=>{d(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},L=e=>{u===e?v("asc"===x?"desc":"asc"):(p(e),v("desc"))},P=({column:e})=>u!==e?m.jsx(sD,{className:"h-3 w-3 ml-1 opacity-50"}):"asc"===x?m.jsx(sA,{className:"h-3 w-3 ml-1"}):m.jsx(sR,{className:"h-3 w-3 ml-1"}),M=(e,t)=>{if(0===e.length)return;let s=Object.keys(e[0]),r=new Blob([[s.join(","),...e.map(e=>s.map(t=>{let s=e[t];return"string"==typeof s&&(s.includes(",")||s.includes('"'))?`"${s.replace(/"/g,'""')}"`:s??""}).join(","))].join("\n")],{type:"text/csv"}),a=URL.createObjectURL(r),n=document.createElement("a");n.href=a,n.download=t,n.click()};if(!t)return m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-8 text-center",children:[m.jsx(C,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-muted-foreground"}),m.jsx("p",{children:"Loading ZIP-optimized scenario..."})]})});let E=r.filter(t=>e[t.territory]),T=new Set(t.zipChanges.map(e=>e.zip));return(0,m.jsxs)("div",{className:"space-y-4",children:[m.jsx(g.Zb,{className:"bg-gradient-to-r from-teal-50 to-cyan-50 border-teal-200",children:(0,m.jsxs)(g.aY,{className:"p-4",children:[m.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"ZIP-OPTIMIZED SCENARIO"}),m.jsx("p",{className:"text-sm text-slate-600",children:"This scenario reassigns 4 ZIP codes to better match existing route patterns, dramatically reducing conflicts."})]})}),m.jsx(g.Zb,{className:"border-2 border-teal-300",children:(0,m.jsxs)(g.aY,{className:"p-4",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>S("comparison"),children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[m.jsx(rU.Z,{className:"h-5 w-5 text-teal-600"}),"Scenario Comparison"]}),c.has("comparison")?m.jsx(rA.Z,{className:"h-5 w-5"}):m.jsx(rR.Z,{className:"h-5 w-5"})]}),c.has("comparison")&&(0,m.jsxs)("div",{className:"mt-4",children:[(0,m.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,m.jsxs)("div",{className:"text-center p-4 bg-slate-50 rounded-lg",children:[m.jsx("p",{className:"text-sm text-muted-foreground",children:"Original 10%"}),m.jsx("p",{className:"text-2xl font-bold text-slate-700",children:"42"}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Manual Decisions"})]}),(0,m.jsxs)("div",{className:"text-center p-4 bg-teal-50 rounded-lg border-2 border-teal-300",children:[m.jsx("p",{className:"text-sm text-teal-600 font-medium",children:"ZIP-Optimized"}),m.jsx("p",{className:"text-2xl font-bold text-teal-700",children:t.summary.manualRequired}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Manual Decisions"})]}),(0,m.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[m.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Improvement"}),(0,m.jsxs)("p",{className:"text-2xl font-bold text-green-700",children:["-",42-t.summary.manualRequired]}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Fewer Decisions"})]})]}),(0,m.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg",children:[m.jsx("p",{className:"text-sm font-medium",children:"Original Scenario"}),(0,m.jsxs)("ul",{className:"text-sm text-muted-foreground mt-2 space-y-1",children:[m.jsx("li",{children:" Auto-reassigned: 91"}),m.jsx("li",{children:" Manual decisions: 42"}),m.jsx("li",{children:" Clean routes: 12 of 17"})]})]}),(0,m.jsxs)("div",{className:"p-3 bg-teal-50 rounded-lg border border-teal-200",children:[m.jsx("p",{className:"text-sm font-medium text-teal-700",children:"ZIP-Optimized"}),(0,m.jsxs)("ul",{className:"text-sm text-teal-600 mt-2 space-y-1",children:[(0,m.jsxs)("li",{children:[" Auto-reassigned: ",t.summary.autoReassigned]}),(0,m.jsxs)("li",{children:[" Manual decisions: ",t.summary.manualRequired]}),(0,m.jsxs)("li",{children:[" Clean routes: ",t.summary.cleanRoutesAfter," of ",t.summary.totalRoutes]})]})]})]})]})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4",children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[m.jsx(b,{className:"h-5 w-5 text-teal-600"}),"ZIP Code Reassignments (",t.zipChanges.length," changes)"]}),m.jsx("div",{className:"space-y-3",children:t.zipChanges.map(e=>(0,m.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[(0,m.jsxs)("div",{children:[(0,m.jsxs)("p",{className:"font-medium",children:[e.zip," - ",e.city]}),(0,m.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.customerCount," customers"]})]}),(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx(j.C,{variant:"outline",style:{backgroundColor:r2(e.originalTerritory,.2),borderColor:r4(e.originalTerritory),color:r4(e.originalTerritory)},children:e.originalTerritory}),m.jsx(rG,{className:"h-4 w-4 text-muted-foreground"}),m.jsx(j.C,{variant:"outline",style:{backgroundColor:r2(e.newTerritory,.2),borderColor:r4(e.newTerritory),color:r4(e.newTerritory)},children:e.newTerritory})]})]},e.zip))}),m.jsx("p",{className:"text-xs text-muted-foreground mt-3",children:"These ZIPs are already primarily served by routes from the suggested territory."})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4",children:[m.jsx("h3",{className:"text-lg font-semibold mb-3",children:"New Territory Distribution"}),(0,m.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,m.jsxs)("div",{className:"p-3 rounded-lg",style:{backgroundColor:r2("North",.15)},children:[m.jsx("p",{className:"text-sm font-medium",style:{color:r4("North")},children:"North"}),m.jsx("p",{className:"text-2xl font-bold",children:t.territoryStats.North}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"customers"})]}),(0,m.jsxs)("div",{className:"p-3 rounded-lg",style:{backgroundColor:r2("Central",.15)},children:[m.jsx("p",{className:"text-sm font-medium",style:{color:r4("Central")},children:"Central"}),m.jsx("p",{className:"text-2xl font-bold",children:t.territoryStats.Central}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"customers"})]}),(0,m.jsxs)("div",{className:"p-3 rounded-lg",style:{backgroundColor:r2("South",.15)},children:[m.jsx("p",{className:"text-sm font-medium",style:{color:r4("South")},children:"South"}),m.jsx("p",{className:"text-2xl font-bold",children:t.territoryStats.South}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"customers"})]})]})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4",children:[m.jsx("h3",{className:"text-lg font-semibold mb-3",children:"ZIP-Optimized Territory Map"}),m.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Changed ZIPs are highlighted with dashed borders"}),(0,m.jsxs)(W,{mapContainerStyle:r0,center:N,zoom:10,options:r1,onLoad:k,children:[E.map(e=>{let t=n[e.zip];if(!t?.geometry?.coordinates)return null;let s=T.has(e.zip),r=t.geometry.coordinates[0].map(e=>({lat:e[1],lng:e[0]}));return m.jsx(tM,{paths:r,options:{fillColor:r2(e.territory,.4),fillOpacity:s?.6:.4,strokeColor:s?"#0f766e":r4(e.territory),strokeOpacity:1,strokeWeight:s?3:1},onClick:()=>o(e.zip)},e.zip)}),t.zipChanges.map(e=>{let t=r.find(t=>t.zip===e.zip);return t?m.jsx(ek,{position:{lat:t.latitude,lng:t.longitude},icon:{path:google.maps.SymbolPath.CIRCLE,scale:12,fillColor:"#0d9488",fillOpacity:1,strokeColor:"#fff",strokeWeight:3},onClick:()=>o(e.zip)},`marker-${e.zip}`):null}),i&&m.jsx(tg,{position:(()=>{let e=r.find(e=>e.zip===i);return e?{lat:e.latitude,lng:e.longitude}:N})(),onCloseClick:()=>o(null),children:m.jsx("div",{className:"p-2",children:(()=>{let e=r.find(e=>e.zip===i),s=t.zipChanges.find(e=>e.zip===i);return e?(0,m.jsxs)(m.Fragment,{children:[m.jsx("p",{className:"font-bold",children:e.zip}),m.jsx("p",{className:"text-sm",children:e.city}),(0,m.jsxs)("p",{className:"text-sm",children:["Territory: ",e.territory]}),(0,m.jsxs)("p",{className:"text-sm",children:[e.accountCount," customers"]}),s&&(0,m.jsxs)("p",{className:"text-sm text-teal-600 font-medium mt-1",children:[" Changed from ",s.originalTerritory]})]}):null})()})})]})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4",children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[m.jsx(w,{className:"h-5 w-5"}),"Technician Pool Count Changes"]}),m.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Click column headers to sort"}),m.jsx("div",{className:"overflow-x-auto",children:(0,m.jsxs)(sz.iA,{children:[m.jsx(sz.xD,{children:(0,m.jsxs)(sz.SC,{children:[m.jsx(sz.ss,{className:"cursor-pointer hover:bg-slate-100 select-none",onClick:()=>L("technician"),children:(0,m.jsxs)("div",{className:"flex items-center",children:["Route / Technician",m.jsx(P,{column:"technician"})]})}),m.jsx(sz.ss,{className:"text-center cursor-pointer hover:bg-slate-100 select-none",onClick:()=>L("primaryTerritory"),children:(0,m.jsxs)("div",{className:"flex items-center justify-center",children:["Primary",m.jsx(P,{column:"primaryTerritory"})]})}),m.jsx(sz.ss,{className:"text-right cursor-pointer hover:bg-slate-100 select-none",onClick:()=>L("before"),children:(0,m.jsxs)("div",{className:"flex items-center justify-end",children:["Before",m.jsx(P,{column:"before"})]})}),m.jsx(sz.ss,{className:"text-right cursor-pointer hover:bg-slate-100 select-none",onClick:()=>L("after"),children:(0,m.jsxs)("div",{className:"flex items-center justify-end",children:["After",m.jsx(P,{column:"after"})]})}),m.jsx(sz.ss,{className:"text-right cursor-pointer hover:bg-slate-100 select-none",onClick:()=>L("change"),children:(0,m.jsxs)("div",{className:"flex items-center justify-end",children:["Change",m.jsx(P,{column:"change"})]})}),m.jsx(sz.ss,{className:"text-right cursor-pointer hover:bg-slate-100 select-none",onClick:()=>L("percentChange"),children:(0,m.jsxs)("div",{className:"flex items-center justify-end",children:["% Change",m.jsx(P,{column:"percentChange"})]})}),m.jsx(sz.ss,{className:"text-center cursor-pointer hover:bg-slate-100 select-none",onClick:()=>L("incomingCount"),children:(0,m.jsxs)("div",{className:"flex items-center justify-center",children:["Incoming",m.jsx(P,{column:"incomingCount"})]})}),m.jsx(sz.ss,{className:"text-center cursor-pointer hover:bg-slate-100 select-none",onClick:()=>L("outgoingCount"),children:(0,m.jsxs)("div",{className:"flex items-center justify-center",children:["Outgoing",m.jsx(P,{column:"outgoingCount"})]})})]})}),m.jsx(sz.RM,{children:(t?[...t.routeChanges].sort((e,t)=>{let s,r;switch(u){case"technician":s=e.technician.toLowerCase(),r=t.technician.toLowerCase();break;case"primaryTerritory":s=e.primaryTerritory,r=t.primaryTerritory;break;case"before":s=e.before,r=t.before;break;case"after":s=e.after,r=t.after;break;case"change":default:s=e.change,r=t.change;break;case"percentChange":s=e.percentChange,r=t.percentChange;break;case"incomingCount":s=e.incomingCount,r=t.incomingCount;break;case"outgoingCount":s=e.outgoingCount,r=t.outgoingCount}return"string"==typeof s&&"string"==typeof r?"asc"===x?s.localeCompare(r):r.localeCompare(s):"asc"===x?s-r:r-s}):[]).map(e=>(0,m.jsxs)(sz.SC,{className:0!==e.change?"bg-yellow-50/50":"",children:[m.jsx(sz.pj,{className:"font-medium",children:(0,m.jsxs)("div",{children:[m.jsx("p",{className:"text-sm",children:e.technician}),m.jsx("p",{className:"text-xs text-muted-foreground",children:e.route})]})}),m.jsx(sz.pj,{className:"text-center",children:m.jsx(j.C,{variant:"outline",style:{backgroundColor:r2(e.primaryTerritory,.2),borderColor:r4(e.primaryTerritory),color:r4(e.primaryTerritory)},children:e.primaryTerritory})}),m.jsx(sz.pj,{className:"text-right",children:e.before}),m.jsx(sz.pj,{className:"text-right font-semibold",children:e.after}),m.jsx(sz.pj,{className:"text-right",children:(0,m.jsxs)("span",{className:`font-semibold ${e.change>0?"text-green-600":e.change<0?"text-red-600":"text-gray-500"}`,children:[e.change>0?"+":"",e.change]})}),m.jsx(sz.pj,{className:"text-right",children:(0,m.jsxs)("span",{className:`${Math.abs(e.percentChange)>10?"text-amber-600 font-semibold":"text-gray-500"}`,children:[e.percentChange>0?"+":"",e.percentChange,"%"]})}),m.jsx(sz.pj,{className:"text-center",children:e.incomingCount>0&&(0,m.jsxs)(j.C,{variant:"outline",className:"bg-green-50 text-green-700 border-green-300",children:["+",e.incomingCount]})}),m.jsx(sz.pj,{className:"text-center",children:e.outgoingCount>0&&(0,m.jsxs)(j.C,{variant:"outline",className:"bg-red-50 text-red-700 border-red-300",children:["-",e.outgoingCount]})})]},e.route))})]})})]})}),t.summary.manualRequired>0&&m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>S("manual"),children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[m.jsx(r$,{className:"h-5 w-5 text-amber-600"}),"Remaining Manual Decisions (",t.summary.manualRequired,")"]}),c.has("manual")?m.jsx(rA.Z,{className:"h-5 w-5"}):m.jsx(rR.Z,{className:"h-5 w-5"})]}),m.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"These customers still need manual review even with ZIP optimization."}),c.has("manual")&&(0,m.jsxs)("div",{className:"mt-4",children:[(0,m.jsxs)(f.z,{variant:"outline",size:"sm",onClick:()=>M(t.manualReassignments,"zip-optimized-manual-decisions.csv"),className:"mb-3",children:[m.jsx(s6,{className:"h-4 w-4 mr-2"}),"Export Manual Decisions"]}),m.jsx("div",{className:"max-h-64 overflow-y-auto",children:(0,m.jsxs)(sz.iA,{children:[m.jsx(sz.xD,{children:(0,m.jsxs)(sz.SC,{children:[m.jsx(sz.ss,{children:"Customer"}),m.jsx(sz.ss,{children:"Address"}),m.jsx(sz.ss,{children:"Current Route"}),m.jsx(sz.ss,{children:"Reason"})]})}),m.jsx(sz.RM,{children:t.manualReassignments.map(e=>(0,m.jsxs)(sz.SC,{children:[(0,m.jsxs)(sz.pj,{children:[m.jsx("p",{className:"font-medium text-sm",children:e.accountName}),m.jsx("p",{className:"text-xs text-muted-foreground",children:e.customerNumber})]}),(0,m.jsxs)(sz.pj,{className:"text-sm",children:[e.address,", ",e.city," ",e.zip]}),m.jsx(sz.pj,{className:"text-sm",children:e.currentRoute}),m.jsx(sz.pj,{className:"text-sm text-amber-600",children:e.reason})]},e.customerNumber))})]})})]})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>S("autoDetail"),children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[m.jsx(rU.Z,{className:"h-5 w-5 text-green-600"}),"Auto-Reassignment Details (",t.summary.autoReassigned," customers)"]}),c.has("autoDetail")?m.jsx(rA.Z,{className:"h-5 w-5"}):m.jsx(rR.Z,{className:"h-5 w-5"})]}),m.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Full list of customers being moved from one technician to another."}),c.has("autoDetail")&&m.jsx("div",{className:"mt-4",children:m.jsx("div",{className:"max-h-96 overflow-y-auto",children:(0,m.jsxs)(sz.iA,{children:[m.jsx(sz.xD,{children:(0,m.jsxs)(sz.SC,{children:[m.jsx(sz.ss,{children:"Customer"}),m.jsx(sz.ss,{children:"Address"}),m.jsx(sz.ss,{children:"Territory"}),m.jsx(sz.ss,{children:"From Technician"}),m.jsx(sz.ss,{children:"To Technician"})]})}),m.jsx(sz.RM,{children:t.autoReassignments.map(e=>(0,m.jsxs)(sz.SC,{children:[(0,m.jsxs)(sz.pj,{children:[m.jsx("p",{className:"font-medium text-sm",children:e.accountName}),m.jsx("p",{className:"text-xs text-muted-foreground",children:e.customerNumber})]}),(0,m.jsxs)(sz.pj,{className:"text-sm",children:[e.address,", ",e.city," ",e.zip]}),m.jsx(sz.pj,{children:m.jsx(j.C,{variant:"outline",style:{backgroundColor:r2(e.territory,.2),borderColor:r4(e.territory),color:r4(e.territory)},children:e.territory})}),m.jsx(sz.pj,{className:"text-sm",children:m.jsx("span",{className:"text-red-600",children:e.oldTechnician||e.oldRoute})}),m.jsx(sz.pj,{className:"text-sm",children:m.jsx("span",{className:"text-green-600 font-medium",children:e.newTechnician||e.newRoute})})]},e.customerNumber))})]})})})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4",children:[m.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Export Data"}),(0,m.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,m.jsxs)(f.z,{variant:"outline",size:"sm",onClick:()=>M(t.autoReassignments,"zip-optimized-auto-reassignments.csv"),children:[m.jsx(s6,{className:"h-4 w-4 mr-2"}),"Auto-Reassignments (",t.summary.autoReassigned,")"]}),(0,m.jsxs)(f.z,{variant:"outline",size:"sm",onClick:()=>M(t.zipChanges,"zip-changes.csv"),children:[m.jsx(s6,{className:"h-4 w-4 mr-2"}),"ZIP Changes (",t.zipChanges.length,")"]})]})]})})]})}let r6=(0,v.Z)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),r3=(0,v.Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),r8={width:"100%",height:"550px"},r7={styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!0};function r9(e,t=.5){return({North:`rgba(59, 130, 246, ${t})`,Central:`rgba(16, 185, 129, ${t})`,South:`rgba(245, 158, 11, ${t})`})[e]||`rgba(107, 114, 128, ${t})`}function ae(e){return({North:"#2563eb",Central:"#059669",South:"#d97706"})[e]||"#6b7280"}function at({areaFilter:e}){let[t,s]=(0,h.useState)(null),[r,a]=(0,h.useState)([]),[n,l]=(0,h.useState)({}),[i,o]=(0,h.useState)(null),[c,d]=(0,h.useState)(new Set(["comparison","manual"])),[u,p]=(0,h.useState)("change"),[x,v]=(0,h.useState)("desc"),y=(0,h.useRef)(null),[N,k]=(0,h.useState)([]),[S,L]=(0,h.useState)(null),[P,M]=(0,h.useState)(null),[E,T]=(0,h.useState)(!1),[O,z]=(0,h.useState)({}),A={lat:25.85,lng:-80.19},R=(0,h.useCallback)(e=>{y.current=e},[]),D=e=>{d(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},I=e=>{u===e?v("asc"===x?"desc":"asc"):(p(e),v("desc"))},Z=(0,h.useMemo)(()=>{if(!t)return[];let e={};return Object.values(O).forEach(t=>{e[t]=(e[t]||0)+1}),t.routeChanges.map(t=>({...t,manualIncoming:e[t.route]||0,adjustedAfter:t.after+(e[t.route]||0)}))},[t,O]),F=({column:e})=>u!==e?m.jsx(sD,{className:"h-3 w-3 ml-1 opacity-50"}):"asc"===x?m.jsx(sA,{className:"h-3 w-3 ml-1"}):m.jsx(sR,{className:"h-3 w-3 ml-1"}),B=(0,h.useMemo)(()=>S&&N.length?N.filter(e=>e.routeTech===S):[],[S,N]),$=(0,h.useMemo)(()=>{if(!P||!E||!N.length||!t)return[];let e=P.currentTerritory,s=t.routeChanges.filter(t=>t.primaryTerritory===e).map(e=>e.route);return N.filter(e=>s.includes(e.routeTech))},[P,E,N,t]),U=(0,h.useMemo)(()=>t?t.manualReassignments.filter(e=>!O[e.customerNumber]):[],[t,O]),_=(e,t)=>{"undecided"===t?z(t=>{let s={...t};return delete s[e],s}):z(s=>({...s,[e]:t}))},Y=e=>{S===e?L(null):(L(e),M(null),T(!1))},V=e=>{P?.customerNumber===e.customerNumber?(M(null),T(!1)):(M(e),L(null),y.current&&e.latitude&&e.longitude&&(y.current.panTo({lat:e.latitude,lng:e.longitude}),y.current.setZoom(13)))},H=(e,t)=>{if(0===e.length)return;let s=Object.keys(e[0]),r=new Blob([[s.join(","),...e.map(e=>s.map(t=>{let s=e[t];return"string"==typeof s&&(s.includes(",")||s.includes('"'))?`"${s.replace(/"/g,'""')}"`:s??""}).join(","))].join("\n")],{type:"text/csv"}),a=URL.createObjectURL(r),n=document.createElement("a");n.href=a,n.download=t,n.click()};if(!t)return m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-8 text-center",children:[m.jsx(C,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-muted-foreground"}),m.jsx("p",{children:"Loading ZIP-optimized scenario..."})]})});let G=r.filter(t=>e[t.territory]),J=new Set(t.zipChanges.map(e=>e.zip)),X=Object.keys(O).length,q=U.length;return(0,m.jsxs)("div",{className:"space-y-4",children:[m.jsx(g.Zb,{className:"bg-gradient-to-r from-teal-50 to-cyan-50 border-cyan-200",children:(0,m.jsxs)(g.aY,{className:"p-4",children:[m.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"ZIP-OPTIMIZED #2 SCENARIO"}),m.jsx("p",{className:"text-sm text-slate-600",children:"This scenario reassigns only 1 ZIP code (33137) to better match existing route patterns, dramatically reducing conflicts."})]})}),m.jsx(g.Zb,{className:"border-2 border-cyan-300",children:(0,m.jsxs)(g.aY,{className:"p-4",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>D("comparison"),children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[m.jsx(rU.Z,{className:"h-5 w-5 text-cyan-600"}),"Scenario Comparison"]}),c.has("comparison")?m.jsx(rA.Z,{className:"h-5 w-5"}):m.jsx(rR.Z,{className:"h-5 w-5"})]}),c.has("comparison")&&(0,m.jsxs)("div",{className:"mt-4",children:[(0,m.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,m.jsxs)("div",{className:"text-center p-4 bg-slate-50 rounded-lg",children:[m.jsx("p",{className:"text-sm text-muted-foreground",children:"Original 10%"}),m.jsx("p",{className:"text-2xl font-bold text-slate-700",children:"42"}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Manual Decisions"})]}),(0,m.jsxs)("div",{className:"text-center p-4 bg-cyan-50 rounded-lg border-2 border-cyan-300",children:[m.jsx("p",{className:"text-sm text-cyan-600 font-medium",children:"ZIP-Optimized"}),m.jsx("p",{className:"text-2xl font-bold text-cyan-700",children:t.summary.manualRequired}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Manual Decisions"})]}),(0,m.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[m.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Improvement"}),(0,m.jsxs)("p",{className:"text-2xl font-bold text-green-700",children:["-",42-t.summary.manualRequired]}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Fewer Decisions"})]})]}),(0,m.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{className:"p-3 bg-slate-50 rounded-lg",children:[m.jsx("p",{className:"text-sm font-medium",children:"Original Scenario"}),(0,m.jsxs)("ul",{className:"text-sm text-muted-foreground mt-2 space-y-1",children:[m.jsx("li",{children:" Auto-reassigned: 91"}),m.jsx("li",{children:" Manual decisions: 42"}),m.jsx("li",{children:" Clean routes: 12 of 17"})]})]}),(0,m.jsxs)("div",{className:"p-3 bg-cyan-50 rounded-lg border border-cyan-200",children:[m.jsx("p",{className:"text-sm font-medium text-cyan-700",children:"ZIP-Optimized"}),(0,m.jsxs)("ul",{className:"text-sm text-cyan-600 mt-2 space-y-1",children:[(0,m.jsxs)("li",{children:[" Auto-reassigned: ",t.summary.autoReassigned]}),(0,m.jsxs)("li",{children:[" Manual decisions: ",t.summary.manualRequired]}),(0,m.jsxs)("li",{children:[" Clean routes: ",t.summary.cleanRoutesAfter," of ",t.summary.totalRoutes]})]})]})]})]})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4",children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[m.jsx(b,{className:"h-5 w-5 text-cyan-600"}),"ZIP Code Reassignments (",t.zipChanges.length," changes)"]}),m.jsx("div",{className:"space-y-3",children:t.zipChanges.map(e=>(0,m.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[(0,m.jsxs)("div",{children:[(0,m.jsxs)("p",{className:"font-medium",children:[e.zip," - ",e.city]}),(0,m.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.customerCount," customers"]})]}),(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx(j.C,{variant:"outline",style:{backgroundColor:r9(e.originalTerritory,.2),borderColor:ae(e.originalTerritory),color:ae(e.originalTerritory)},children:e.originalTerritory}),m.jsx(rG,{className:"h-4 w-4 text-muted-foreground"}),m.jsx(j.C,{variant:"outline",style:{backgroundColor:r9(e.newTerritory,.2),borderColor:ae(e.newTerritory),color:ae(e.newTerritory)},children:e.newTerritory})]})]},e.zip))}),m.jsx("p",{className:"text-xs text-muted-foreground mt-3",children:"These ZIPs are already primarily served by routes from the suggested territory."})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4",children:[m.jsx("h3",{className:"text-lg font-semibold mb-3",children:"New Territory Distribution"}),(0,m.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,m.jsxs)("div",{className:"p-3 rounded-lg",style:{backgroundColor:r9("North",.15)},children:[m.jsx("p",{className:"text-sm font-medium",style:{color:ae("North")},children:"North"}),m.jsx("p",{className:"text-2xl font-bold",children:t.territoryStats.North}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"customers"})]}),(0,m.jsxs)("div",{className:"p-3 rounded-lg",style:{backgroundColor:r9("Central",.15)},children:[m.jsx("p",{className:"text-sm font-medium",style:{color:ae("Central")},children:"Central"}),m.jsx("p",{className:"text-2xl font-bold",children:t.territoryStats.Central}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"customers"})]}),(0,m.jsxs)("div",{className:"p-3 rounded-lg",style:{backgroundColor:r9("South",.15)},children:[m.jsx("p",{className:"text-sm font-medium",style:{color:ae("South")},children:"South"}),m.jsx("p",{className:"text-2xl font-bold",children:t.territoryStats.South}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"customers"})]})]})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4",children:[m.jsx("h3",{className:"text-lg font-semibold mb-3",children:"ZIP-Optimized Territory Map"}),(0,m.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[m.jsx("p",{className:"text-sm text-muted-foreground",children:S?`Showing ${B.length} stops for ${S.split(" Route ")[1]||S}`:P?`Viewing pool: ${P.accountName}`:"Changed ZIPs are highlighted with dashed borders. Click technician rows to view routes."}),(S||P)&&(0,m.jsxs)(f.z,{variant:"outline",size:"sm",onClick:()=>{L(null),M(null),T(!1)},children:[m.jsx(r6,{className:"h-4 w-4 mr-1"}),"Clear Selection"]})]}),P&&m.jsx("div",{className:"flex items-center gap-2 mb-3",children:(0,m.jsxs)(f.z,{variant:E?"default":"outline",size:"sm",onClick:()=>T(!E),children:[E?m.jsx(r6,{className:"h-4 w-4 mr-1"}):m.jsx(r3,{className:"h-4 w-4 mr-1"}),E?"Hide":"Show"," ",P.currentTerritory," Territory Stops (",$.length,")"]})}),(0,m.jsxs)(W,{mapContainerStyle:r8,center:A,zoom:10,options:r7,onLoad:R,children:[G.map(e=>{let t=n[e.zip];if(!t?.geometry?.coordinates)return null;let s=J.has(e.zip),r=t.geometry.coordinates[0].map(e=>({lat:e[1],lng:e[0]}));return m.jsx(tM,{paths:r,options:{fillColor:r9(e.territory,.4),fillOpacity:s?.6:.4,strokeColor:s?"#0f766e":ae(e.territory),strokeOpacity:1,strokeWeight:s?3:1},onClick:()=>o(e.zip)},e.zip)}),S&&B.map((e,t)=>m.jsx(ek,{position:{lat:e.latitude,lng:e.longitude},icon:{path:google.maps.SymbolPath.CIRCLE,scale:8,fillColor:"#3b82f6",fillOpacity:.9,strokeColor:"#1e40af",strokeWeight:2},label:{text:String(t+1),color:"#fff",fontSize:"10px",fontWeight:"bold"},onClick:()=>o(e.customerNumber)},`tech-stop-${e.customerNumber}`)),P&&P.latitude&&P.longitude&&m.jsx(ek,{position:{lat:P.latitude,lng:P.longitude},icon:{path:google.maps.SymbolPath.BACKWARD_CLOSED_ARROW,scale:8,fillColor:"#dc2626",fillOpacity:1,strokeColor:"#fff",strokeWeight:3},onClick:()=>o(P.customerNumber)},`pool-${P.customerNumber}`),E&&$.map(e=>m.jsx(ek,{position:{lat:e.latitude,lng:e.longitude},icon:{path:google.maps.SymbolPath.CIRCLE,scale:6,fillColor:ae(P?.currentTerritory||"North"),fillOpacity:.8,strokeColor:"#fff",strokeWeight:1.5},onClick:()=>o(e.customerNumber)},`territory-stop-${e.customerNumber}`)),i&&m.jsx(tg,{position:(()=>{let e=r.find(e=>e.zip===i);if(e)return{lat:e.latitude,lng:e.longitude};let t=B.find(e=>e.customerNumber===i);if(t)return{lat:t.latitude,lng:t.longitude};if(P&&P.customerNumber===i&&P.latitude&&P.longitude)return{lat:P.latitude,lng:P.longitude};let s=$.find(e=>e.customerNumber===i);return s?{lat:s.latitude,lng:s.longitude}:A})(),onCloseClick:()=>o(null),children:m.jsx("div",{className:"p-2 min-w-[200px]",children:(()=>{let e=r.find(e=>e.zip===i);if(e){let s=t.zipChanges.find(e=>e.zip===i);return(0,m.jsxs)(m.Fragment,{children:[m.jsx("p",{className:"font-bold",children:e.zip}),m.jsx("p",{className:"text-sm",children:e.city}),(0,m.jsxs)("p",{className:"text-sm",children:["Territory: ",e.territory]}),(0,m.jsxs)("p",{className:"text-sm",children:[e.accountCount," customers"]}),s&&(0,m.jsxs)("p",{className:"text-sm text-cyan-600 font-medium mt-1",children:[" Changed from ",s.originalTerritory]})]})}let s=B.find(e=>e.customerNumber===i);if(s)return(0,m.jsxs)(m.Fragment,{children:[m.jsx("p",{className:"font-bold",children:s.accountName}),m.jsx("p",{className:"text-xs text-gray-500",children:s.customerNumber}),m.jsx("p",{className:"text-sm mt-1",children:s.address}),(0,m.jsxs)("p",{className:"text-sm",children:[s.city,", ",s.state," ",s.zip]}),(0,m.jsxs)("p",{className:"text-sm mt-1",children:["Route: ",s.routeTech]}),(0,m.jsxs)("p",{className:"text-sm",children:["Day: ",s.dayOfService]})]});if(P&&P.customerNumber===i)return(0,m.jsxs)(m.Fragment,{children:[m.jsx("p",{className:"font-bold text-red-600",children:P.accountName}),m.jsx("p",{className:"text-xs text-gray-500",children:P.customerNumber}),m.jsx("p",{className:"text-sm mt-1",children:P.address}),(0,m.jsxs)("p",{className:"text-sm",children:[P.city," ",P.zip]}),(0,m.jsxs)("p",{className:"text-sm mt-1",children:["Current: ",P.currentRoute]}),(0,m.jsxs)("p",{className:"text-sm text-amber-600",children:["Territory: ",P.currentTerritory]})]});let a=$.find(e=>e.customerNumber===i);return a?(0,m.jsxs)(m.Fragment,{children:[m.jsx("p",{className:"font-bold",style:{color:ae(P?.currentTerritory||"North")},children:a.accountName}),m.jsx("p",{className:"text-xs text-gray-500",children:a.customerNumber}),m.jsx("p",{className:"text-sm mt-1",children:a.address}),(0,m.jsxs)("p",{className:"text-sm",children:[a.city,", ",a.state," ",a.zip]}),(0,m.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Route:"})," ",a.routeTech]}),(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Day:"})," ",a.dayOfService]})]})]}):null})()})})]})]})}),t.summary.manualRequired>0&&m.jsx(g.Zb,{className:"border-2 border-amber-200",children:(0,m.jsxs)(g.aY,{className:"p-4",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>D("manual"),children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[m.jsx(r$,{className:"h-5 w-5 text-amber-600"}),"Remaining Manual Decisions (",q,")",X>0&&(0,m.jsxs)(j.C,{variant:"outline",className:"ml-2 bg-green-50 text-green-700 border-green-300",children:[X," assigned"]})]}),c.has("manual")?m.jsx(rA.Z,{className:"h-5 w-5"}):m.jsx(rR.Z,{className:"h-5 w-5"})]}),m.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Click a pool to view on map. Use the dropdown to reassign to a route."}),c.has("manual")&&(0,m.jsxs)("div",{className:"mt-4",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,m.jsxs)(f.z,{variant:"outline",size:"sm",onClick:()=>H(U,"zip-optimized-manual-decisions.csv"),children:[m.jsx(s6,{className:"h-4 w-4 mr-2"}),"Export Remaining (",q,")"]}),X>0&&(0,m.jsxs)(f.z,{variant:"outline",size:"sm",onClick:()=>{H(t.manualReassignments.filter(e=>O[e.customerNumber]).map(e=>({...e,assignedRoute:O[e.customerNumber]})),"manual-assignments.csv")},children:[m.jsx(s6,{className:"h-4 w-4 mr-2"}),"Export Assigned (",X,")"]})]}),m.jsx("div",{className:"max-h-80 overflow-y-auto",children:(0,m.jsxs)(sz.iA,{children:[m.jsx(sz.xD,{children:(0,m.jsxs)(sz.SC,{children:[m.jsx(sz.ss,{className:"w-10"}),m.jsx(sz.ss,{children:"Customer"}),m.jsx(sz.ss,{children:"Address"}),m.jsx(sz.ss,{children:"Current Route"}),m.jsx(sz.ss,{children:"Territory"}),m.jsx(sz.ss,{className:"w-48",children:"Assign To"})]})}),m.jsx(sz.RM,{children:t.manualReassignments.map(e=>{let s=!!O[e.customerNumber],r=P?.customerNumber===e.customerNumber;return(0,m.jsxs)(sz.SC,{className:`cursor-pointer transition-colors ${s?"bg-green-50/50":r?"bg-amber-100":"hover:bg-slate-50"}`,children:[m.jsx(sz.pj,{children:m.jsx(f.z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>V(e),children:r?m.jsx(r6,{className:"h-4 w-4 text-amber-600"}):m.jsx(r3,{className:"h-4 w-4"})})}),(0,m.jsxs)(sz.pj,{onClick:()=>V(e),children:[m.jsx("p",{className:"font-medium text-sm",children:e.accountName}),m.jsx("p",{className:"text-xs text-muted-foreground",children:e.customerNumber})]}),(0,m.jsxs)(sz.pj,{className:"text-sm",onClick:()=>V(e),children:[e.address,", ",e.city," ",e.zip]}),m.jsx(sz.pj,{className:"text-sm",onClick:()=>V(e),children:e.currentRoute}),m.jsx(sz.pj,{onClick:()=>V(e),children:m.jsx(j.C,{variant:"outline",style:{backgroundColor:r9(e.currentTerritory,.2),borderColor:ae(e.currentTerritory),color:ae(e.currentTerritory)},children:e.currentTerritory})}),m.jsx(sz.pj,{children:(0,m.jsxs)(sY.Ph,{value:O[e.customerNumber]||"undecided",onValueChange:t=>_(e.customerNumber,t),children:[m.jsx(sY.i4,{className:`w-full ${s?"border-green-500":""}`,children:m.jsx(sY.ki,{placeholder:"Undecided"})}),(0,m.jsxs)(sY.Bw,{children:[m.jsx(sY.Ql,{value:"undecided",children:m.jsx("span",{className:"text-amber-600",children:"Undecided"})}),t.routeChanges.map(e=>m.jsx(sY.Ql,{value:e.route,children:(0,m.jsxs)("span",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:ae(e.primaryTerritory)}}),e.technician]})},e.route))]})]})})]},e.customerNumber)})})]})})]})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4",children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[m.jsx(w,{className:"h-5 w-5"}),"Technician Pool Count Changes",X>0&&(0,m.jsxs)(j.C,{variant:"outline",className:"ml-2 bg-cyan-50 text-cyan-700 border-cyan-300",children:["+",X," manual"]})]}),m.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Click a technician row to view their current route on the map. Click column headers to sort."}),m.jsx("div",{className:"overflow-x-auto",children:(0,m.jsxs)(sz.iA,{children:[m.jsx(sz.xD,{children:(0,m.jsxs)(sz.SC,{children:[m.jsx(sz.ss,{className:"cursor-pointer hover:bg-slate-100 select-none",onClick:()=>I("technician"),children:(0,m.jsxs)("div",{className:"flex items-center",children:["Route / Technician",m.jsx(F,{column:"technician"})]})}),m.jsx(sz.ss,{className:"text-center cursor-pointer hover:bg-slate-100 select-none",onClick:()=>I("primaryTerritory"),children:(0,m.jsxs)("div",{className:"flex items-center justify-center",children:["Primary",m.jsx(F,{column:"primaryTerritory"})]})}),m.jsx(sz.ss,{className:"text-right cursor-pointer hover:bg-slate-100 select-none",onClick:()=>I("before"),children:(0,m.jsxs)("div",{className:"flex items-center justify-end",children:["Before",m.jsx(F,{column:"before"})]})}),m.jsx(sz.ss,{className:"text-right cursor-pointer hover:bg-slate-100 select-none",onClick:()=>I("after"),children:(0,m.jsxs)("div",{className:"flex items-center justify-end",children:["After",m.jsx(F,{column:"after"})]})}),m.jsx(sz.ss,{className:"text-right cursor-pointer hover:bg-slate-100 select-none",onClick:()=>I("change"),children:(0,m.jsxs)("div",{className:"flex items-center justify-end",children:["Change",m.jsx(F,{column:"change"})]})}),m.jsx(sz.ss,{className:"text-right cursor-pointer hover:bg-slate-100 select-none",onClick:()=>I("percentChange"),children:(0,m.jsxs)("div",{className:"flex items-center justify-end",children:["% Change",m.jsx(F,{column:"percentChange"})]})}),m.jsx(sz.ss,{className:"text-center cursor-pointer hover:bg-slate-100 select-none",onClick:()=>I("incomingCount"),children:(0,m.jsxs)("div",{className:"flex items-center justify-center",children:["Incoming",m.jsx(F,{column:"incomingCount"})]})}),m.jsx(sz.ss,{className:"text-center cursor-pointer hover:bg-slate-100 select-none",onClick:()=>I("outgoingCount"),children:(0,m.jsxs)("div",{className:"flex items-center justify-center",children:["Outgoing",m.jsx(F,{column:"outgoingCount"})]})})]})}),m.jsx(sz.RM,{children:(Z.length?[...Z].sort((e,t)=>{let s,r;switch(u){case"technician":s=e.technician.toLowerCase(),r=t.technician.toLowerCase();break;case"primaryTerritory":s=e.primaryTerritory,r=t.primaryTerritory;break;case"before":s=e.before,r=t.before;break;case"after":s=e.adjustedAfter,r=t.adjustedAfter;break;case"change":default:s=e.adjustedAfter-e.before,r=t.adjustedAfter-t.before;break;case"percentChange":s=e.percentChange,r=t.percentChange;break;case"incomingCount":s=e.incomingCount+e.manualIncoming,r=t.incomingCount+t.manualIncoming;break;case"outgoingCount":s=e.outgoingCount,r=t.outgoingCount}return"string"==typeof s&&"string"==typeof r?"asc"===x?s.localeCompare(r):r.localeCompare(s):"asc"===x?s-r:r-s}):[]).map(e=>{let t=e.adjustedAfter-e.before,s=S===e.route;return(0,m.jsxs)(sz.SC,{className:`cursor-pointer transition-colors ${s?"bg-blue-100":0!==t?"bg-yellow-50/50 hover:bg-yellow-100/50":"hover:bg-slate-50"}`,onClick:()=>Y(e.route),children:[m.jsx(sz.pj,{className:"font-medium",children:(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[s&&m.jsx(r3,{className:"h-4 w-4 text-blue-600"}),(0,m.jsxs)("div",{children:[m.jsx("p",{className:"text-sm",children:e.technician}),m.jsx("p",{className:"text-xs text-muted-foreground",children:e.route})]})]})}),m.jsx(sz.pj,{className:"text-center",children:m.jsx(j.C,{variant:"outline",style:{backgroundColor:r9(e.primaryTerritory,.2),borderColor:ae(e.primaryTerritory),color:ae(e.primaryTerritory)},children:e.primaryTerritory})}),m.jsx(sz.pj,{className:"text-right",children:e.before}),(0,m.jsxs)(sz.pj,{className:"text-right font-semibold",children:[e.adjustedAfter,e.manualIncoming>0&&(0,m.jsxs)("span",{className:"text-xs text-cyan-600 ml-1",children:["(+",e.manualIncoming,")"]})]}),m.jsx(sz.pj,{className:"text-right",children:(0,m.jsxs)("span",{className:`font-semibold ${t>0?"text-green-600":t<0?"text-red-600":"text-gray-500"}`,children:[t>0?"+":"",t]})}),m.jsx(sz.pj,{className:"text-right",children:(0,m.jsxs)("span",{className:`${Math.abs(e.percentChange)>10?"text-amber-600 font-semibold":"text-gray-500"}`,children:[e.percentChange>0?"+":"",e.percentChange,"%"]})}),m.jsx(sz.pj,{className:"text-center",children:(0,m.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[e.incomingCount>0&&(0,m.jsxs)(j.C,{variant:"outline",className:"bg-green-50 text-green-700 border-green-300",children:["+",e.incomingCount]}),e.manualIncoming>0&&(0,m.jsxs)(j.C,{variant:"outline",className:"bg-cyan-50 text-cyan-700 border-cyan-300",children:["+",e.manualIncoming]})]})}),m.jsx(sz.pj,{className:"text-center",children:e.outgoingCount>0&&(0,m.jsxs)(j.C,{variant:"outline",className:"bg-red-50 text-red-700 border-red-300",children:["-",e.outgoingCount]})})]},e.route)})})]})})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>D("autoDetail"),children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[m.jsx(rU.Z,{className:"h-5 w-5 text-green-600"}),"Auto-Reassignment Details (",t.summary.autoReassigned," customers)"]}),c.has("autoDetail")?m.jsx(rA.Z,{className:"h-5 w-5"}):m.jsx(rR.Z,{className:"h-5 w-5"})]}),m.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Full list of customers being moved from one technician to another."}),c.has("autoDetail")&&m.jsx("div",{className:"mt-4",children:m.jsx("div",{className:"max-h-96 overflow-y-auto",children:(0,m.jsxs)(sz.iA,{children:[m.jsx(sz.xD,{children:(0,m.jsxs)(sz.SC,{children:[m.jsx(sz.ss,{children:"Customer"}),m.jsx(sz.ss,{children:"Address"}),m.jsx(sz.ss,{children:"Territory"}),m.jsx(sz.ss,{children:"From Technician"}),m.jsx(sz.ss,{children:"To Technician"})]})}),m.jsx(sz.RM,{children:t.autoReassignments.map(e=>(0,m.jsxs)(sz.SC,{children:[(0,m.jsxs)(sz.pj,{children:[m.jsx("p",{className:"font-medium text-sm",children:e.accountName}),m.jsx("p",{className:"text-xs text-muted-foreground",children:e.customerNumber})]}),(0,m.jsxs)(sz.pj,{className:"text-sm",children:[e.address,", ",e.city," ",e.zip]}),m.jsx(sz.pj,{children:m.jsx(j.C,{variant:"outline",style:{backgroundColor:r9(e.territory,.2),borderColor:ae(e.territory),color:ae(e.territory)},children:e.territory})}),m.jsx(sz.pj,{className:"text-sm",children:m.jsx("span",{className:"text-red-600",children:e.oldTechnician||e.oldRoute})}),m.jsx(sz.pj,{className:"text-sm",children:m.jsx("span",{className:"text-green-600 font-medium",children:e.newTechnician||e.newRoute})})]},e.customerNumber))})]})})})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4",children:[m.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Export Data"}),(0,m.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,m.jsxs)(f.z,{variant:"outline",size:"sm",onClick:()=>H(t.autoReassignments,"zip-optimized-2-auto-reassignments.csv"),children:[m.jsx(s6,{className:"h-4 w-4 mr-2"}),"Auto-Reassignments (",t.summary.autoReassigned,")"]}),(0,m.jsxs)(f.z,{variant:"outline",size:"sm",onClick:()=>H(t.zipChanges,"zip-changes-2.csv"),children:[m.jsx(s6,{className:"h-4 w-4 mr-2"}),"ZIP Changes (",t.zipChanges.length,")"]})]})]})})]})}var as=s(74975);let ar={width:"100%",height:"550px"},aa={styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!0},an=["#3b82f6","#ef4444","#22c55e","#f59e0b","#8b5cf6","#ec4899","#06b6d4","#84cc16","#f97316","#6366f1","#14b8a6","#a855f7","#eab308"];function al(e,t=.5){return({North:`rgba(59, 130, 246, ${t})`,Central:`rgba(16, 185, 129, ${t})`,South:`rgba(245, 158, 11, ${t})`})[e]||`rgba(107, 114, 128, ${t})`}function ai(e){return({North:"#2563eb",Central:"#059669",South:"#d97706"})[e]||"#6b7280"}function ao({areaFilter:e}){let[t,s]=(0,h.useState)(null),[r,a]=(0,h.useState)({}),[n,l]=(0,h.useState)({}),[i,o]=(0,h.useState)(null),[c,d]=(0,h.useState)(new Set),[u,p]=(0,h.useState)(!0),[x,v]=(0,h.useState)(new Set(["summary","routes"])),b=(0,h.useRef)(null),y=(0,h.useCallback)(e=>{b.current=e},[]),N=e=>{v(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},C=e=>{d(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},k=(0,h.useMemo)(()=>{let e={};return Array.from(c).forEach((t,s)=>{e[t]=an[s%an.length]}),e},[c]),S=(0,h.useMemo)(()=>{if(!t)return[];let e={};return t.customers.forEach(t=>{t.zip&&t.assignedTerritory&&(e[t.zip]=t.assignedTerritory)}),Object.entries(e).map(([e,t])=>({zip:e,territory:t}))},[t]),L=(0,h.useMemo)(()=>t&&0!==c.size?t.customers.filter(e=>c.has(e.assignedRoute)):[],[t,c]),P=(0,h.useMemo)(()=>t&&0!==c.size?t.routeSummary.filter(e=>c.has(e.routeKey)).map(e=>e.technician):[],[t,c]),M=(e,t)=>{if(0===e.length)return;let s=Object.keys(e[0]),r=new Blob([[s.join(","),...e.map(e=>s.map(t=>{let s=e[t];return"string"==typeof s&&(s.includes(",")||s.includes('"'))?`"${s.replace(/"/g,'""')}"`:s??""}).join(","))].join("\n")],{type:"text/csv"}),a=URL.createObjectURL(r),n=document.createElement("a");n.href=a,n.download=t,n.click()};if(!t)return m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-8 text-center",children:[m.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),m.jsx("p",{children:"Loading radical reroute scenario..."})]})});let E=S.filter(t=>e[t.territory]);return(0,m.jsxs)("div",{className:"space-y-4",children:[m.jsx(g.Zb,{className:"bg-gradient-to-r from-purple-50 to-indigo-50 border-purple-200",children:(0,m.jsxs)(g.aY,{className:"p-4",children:[m.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"RADICAL REROUTE SCENARIO"}),m.jsx("p",{className:"text-sm text-slate-600",children:"Optimized technician assignments targeting Min/Max pool counts while maximizing retained accounts. Two new hire positions assigned to fill gaps in Central and South territories."})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>N("summary"),children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[m.jsx(rU.Z,{className:"h-5 w-5 text-green-600"}),"Assignment Summary"]}),x.has("summary")?m.jsx(rA.Z,{className:"h-5 w-5"}):m.jsx(rR.Z,{className:"h-5 w-5"})]}),x.has("summary")&&(0,m.jsxs)("div",{className:"mt-4 space-y-4",children:[m.jsx("div",{className:"grid grid-cols-3 gap-4",children:Object.entries(t.summary.territorySummary).map(([e,t])=>(0,m.jsxs)("div",{className:"p-3 rounded-lg",style:{backgroundColor:al(e,.15)},children:[m.jsx("p",{className:"text-sm font-medium",style:{color:ai(e)},children:e}),m.jsx("p",{className:"text-2xl font-bold",children:t.assigned}),(0,m.jsxs)("p",{className:"text-xs text-muted-foreground",children:["of ",t.target," capacity (",Math.round(t.assigned/t.target*100),"%)"]})]},e))}),(0,m.jsxs)("div",{className:"grid grid-cols-4 gap-3 text-center",children:[(0,m.jsxs)("div",{className:"p-2 bg-green-50 rounded-lg",children:[m.jsx("p",{className:"text-xs text-green-600",children:"Kept"}),m.jsx("p",{className:"text-lg font-bold text-green-700",children:t.routeSummary.reduce((e,t)=>e+t.keptFromOriginal,0)})]}),(0,m.jsxs)("div",{className:"p-2 bg-amber-50 rounded-lg",children:[m.jsx("p",{className:"text-xs text-amber-600",children:"Reassigned"}),m.jsx("p",{className:"text-lg font-bold text-amber-700",children:t.routeSummary.filter(e=>!e.isNewHire).reduce((e,t)=>e+t.addedNew,0)})]}),(0,m.jsxs)("div",{className:"p-2 bg-purple-50 rounded-lg",children:[m.jsx("p",{className:"text-xs text-purple-600",children:"New Hire"}),m.jsx("p",{className:"text-lg font-bold text-purple-700",children:t.routeSummary.filter(e=>e.isNewHire).reduce((e,t)=>e+t.poolCount,0)})]}),(0,m.jsxs)("div",{className:"p-2 bg-red-50 rounded-lg",children:[m.jsx("p",{className:"text-xs text-red-600",children:"Floater Pool"}),m.jsx("p",{className:"text-lg font-bold text-red-700",children:t.floaterPool.length})]})]}),m.jsx("div",{className:"text-sm text-muted-foreground",children:(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Floater Technicians:"})," ",t.floaterTechs.map(e=>e.name).join(", ")]})})]})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4",children:[m.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Radical Reroute Territory Map"}),(0,m.jsxs)("div",{className:"flex items-center justify-between mb-3 flex-wrap gap-2",children:[m.jsx("div",{className:"flex-1",children:c.size>0?(0,m.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,m.jsxs)("span",{className:"font-medium",children:[L.length," stops"]})," for ",c.size," technician",c.size>1?"s":"",":",m.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:P.map((e,t)=>m.jsx(j.C,{variant:"outline",className:"text-xs",style:{borderColor:an[t%an.length],color:an[t%an.length]},children:e},e))})]}):m.jsx("p",{className:"text-sm text-muted-foreground",children:"Click technician rows to view their routes (multi-select supported)"})}),(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx(rj,{id:"showOutlines",checked:u,onCheckedChange:e=>p(!0===e)}),m.jsx("label",{htmlFor:"showOutlines",className:"text-sm cursor-pointer",children:"Territory Outlines"})]}),c.size>0&&(0,m.jsxs)(f.z,{variant:"outline",size:"sm",onClick:()=>{d(new Set),o(null)},children:[m.jsx(r6,{className:"h-4 w-4 mr-1"})," Clear All"]})]})]}),(0,m.jsxs)(W,{mapContainerStyle:ar,center:{lat:25.85,lng:-80.19},zoom:10,options:aa,onLoad:y,children:[E.map(({zip:e,territory:t})=>{let s=r[e];if(!s?.geometry?.coordinates)return null;let a=s.geometry.coordinates[0].map(e=>({lat:e[1],lng:e[0]}));return m.jsx(tM,{paths:a,options:{fillColor:al(t,.25),fillOpacity:.25,strokeColor:ai(t),strokeOpacity:.5,strokeWeight:1}},e)}),u&&n.north&&(e.North||e.Central)&&m.jsx(tC,{path:n.north.map(e=>({lat:e.lat,lng:e.lng})),options:{strokeColor:"#1e40af",strokeOpacity:1,strokeWeight:4}},"outline-north"),u&&n.south&&(e.Central||e.South)&&m.jsx(tC,{path:n.south.map(e=>({lat:e.lat,lng:e.lng})),options:{strokeColor:"#92400e",strokeOpacity:1,strokeWeight:4}},"outline-south"),L.map(e=>{let t=k[e.assignedRoute]||"#6b7280";return m.jsx(ek,{position:{lat:e.latitude,lng:e.longitude},icon:{path:google.maps.SymbolPath.CIRCLE,scale:7,fillColor:t,fillOpacity:.9,strokeColor:"#fff",strokeWeight:2},onClick:()=>o(e.customerNumber)},e.customerNumber)}),i&&(()=>{let e=t.customers.find(e=>e.customerNumber===i);return e?m.jsx(tg,{position:{lat:e.latitude,lng:e.longitude},onCloseClick:()=>o(null),children:(0,m.jsxs)("div",{className:"p-2 min-w-[200px]",children:[m.jsx("p",{className:"font-bold",children:e.accountName}),m.jsx("p",{className:"text-xs text-gray-500",children:e.customerNumber}),m.jsx("p",{className:"text-sm mt-1",children:e.address}),(0,m.jsxs)("p",{className:"text-sm",children:[e.city," ",e.zip]}),(0,m.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Original:"})," ",e.route]}),(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Assigned:"})," ",e.assignedTech]}),(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Status:"})," ",m.jsx("span",{style:{color:{kept:"#22c55e",reassigned:"#f59e0b","new-hire":"#8b5cf6",floater:"#ef4444"}[e.status]||"#6b7280"},children:e.status})]})]})]})}):null})()]}),(0,m.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[(0,m.jsxs)("div",{className:"flex items-center gap-4 text-xs",children:[m.jsx("span",{className:"font-medium",children:"Status:"}),(0,m.jsxs)("div",{className:"flex items-center gap-1",children:[m.jsx("span",{className:"w-3 h-3 rounded-full bg-green-500"})," Kept"]}),(0,m.jsxs)("div",{className:"flex items-center gap-1",children:[m.jsx("span",{className:"w-3 h-3 rounded-full bg-amber-500"})," Reassigned"]}),(0,m.jsxs)("div",{className:"flex items-center gap-1",children:[m.jsx("span",{className:"w-3 h-3 rounded-full bg-purple-500"})," New Hire"]})]}),c.size>1&&m.jsx("div",{className:"text-xs text-muted-foreground",children:"Markers colored by technician"})]})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>N("routes"),children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[m.jsx(w,{className:"h-5 w-5"}),"Technician Assignments (",t.routeSummary.length," routes)",c.size>0&&(0,m.jsxs)(j.C,{variant:"secondary",className:"ml-2",children:[c.size," selected"]})]}),x.has("routes")?m.jsx(rA.Z,{className:"h-5 w-5"}):m.jsx(rR.Z,{className:"h-5 w-5"})]}),x.has("routes")&&(0,m.jsxs)("div",{className:"mt-4",children:[m.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Click rows to toggle selection (multi-select enabled)"}),m.jsx("div",{className:"overflow-x-auto",children:(0,m.jsxs)(sz.iA,{children:[m.jsx(sz.xD,{children:(0,m.jsxs)(sz.SC,{children:[m.jsx(sz.ss,{className:"w-8"}),m.jsx(sz.ss,{children:"Technician"}),m.jsx(sz.ss,{className:"text-center",children:"Territory"}),m.jsx(sz.ss,{className:"text-center",children:"Target"}),m.jsx(sz.ss,{className:"text-center",children:"Assigned"}),m.jsx(sz.ss,{className:"text-center",children:"Kept"}),m.jsx(sz.ss,{className:"text-center",children:"New"}),m.jsx(sz.ss,{className:"text-center",children:"Status"})]})}),m.jsx(sz.RM,{children:t.routeSummary.sort((e,t)=>{let s=["North","Central","South"];return s.indexOf(e.territory)-s.indexOf(t.territory)}).map(e=>{let t=c.has(e.routeKey),s=t?k[e.routeKey]:void 0;return(0,m.jsxs)(sz.SC,{className:`cursor-pointer transition-colors ${t?"bg-blue-50":e.isNewHire?"bg-purple-50/50":"hover:bg-slate-50"}`,onClick:()=>C(e.routeKey),children:[m.jsx(sz.pj,{className:"w-8",children:t&&m.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-white shadow",style:{backgroundColor:s}})}),m.jsx(sz.pj,{children:(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[t&&m.jsx(r3,{className:"h-4 w-4 text-blue-600"}),e.isNewHire&&m.jsx(as.Z,{className:"h-4 w-4 text-purple-600"}),(0,m.jsxs)("div",{children:[m.jsx("p",{className:"font-medium text-sm",children:e.technician}),(0,m.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Route ",e.route]})]})]})}),m.jsx(sz.pj,{className:"text-center",children:m.jsx(j.C,{variant:"outline",style:{backgroundColor:al(e.territory,.2),borderColor:ai(e.territory),color:ai(e.territory)},children:e.territory})}),m.jsx(sz.pj,{className:"text-center text-sm",children:e.min&&e.max?`${e.min}-${e.max}`:"-"}),m.jsx(sz.pj,{className:"text-center font-semibold",children:e.poolCount}),m.jsx(sz.pj,{className:"text-center",children:m.jsx("span",{className:"text-green-600",children:e.keptFromOriginal})}),m.jsx(sz.pj,{className:"text-center",children:m.jsx("span",{className:e.isNewHire?"text-purple-600":"text-amber-600",children:e.addedNew})}),m.jsx(sz.pj,{className:"text-center",children:e.meetsTarget?m.jsx(rU.Z,{className:"h-4 w-4 text-green-600 mx-auto"}):m.jsx(r$,{className:"h-4 w-4 text-amber-600 mx-auto"})})]},e.routeKey)})})]})})]})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4",children:[m.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Export Data"}),(0,m.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,m.jsxs)(f.z,{variant:"outline",size:"sm",onClick:()=>M(t.customers,"radical-reroute-all-assignments.csv"),children:[m.jsx(s6,{className:"h-4 w-4 mr-2"}),"All Assignments (",t.customers.length,")"]}),(0,m.jsxs)(f.z,{variant:"outline",size:"sm",onClick:()=>M(t.customers.filter(e=>"reassigned"===e.status||"new-hire"===e.status),"radical-reroute-changes.csv"),children:[m.jsx(s6,{className:"h-4 w-4 mr-2"}),"Changes Only"]}),(0,m.jsxs)(f.z,{variant:"outline",size:"sm",onClick:()=>M(t.routeSummary,"radical-reroute-summary.csv"),children:[m.jsx(s6,{className:"h-4 w-4 mr-2"}),"Route Summary"]}),c.size>0&&(0,m.jsxs)(f.z,{variant:"outline",size:"sm",onClick:()=>M(L,"radical-reroute-selected-techs.csv"),children:[m.jsx(s6,{className:"h-4 w-4 mr-2"}),"Selected Techs (",L.length,")"]})]})]})})]})}let ac=(0,v.Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),ad={width:"100%",height:"550px"},am={styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!0},ah={"11 AFP Route Honatann B":"#3b82f6","14 AFP Route Jorge A":"#ef4444","15 AFP Route Kymani P":"#22c55e","2 AFP Route William A":"#f59e0b","22 AFP Route Ramon R":"#8b5cf6","23 AFP Route Juan C":"#ec4899","25 AFP Route Carlos S":"#06b6d4","28 AFP Route Jean D":"#84cc16","8 AFP Route Spartacus P":"#f97316",Unassigned:"#6b7280"},au={Monday:"#3b82f6",Tuesday:"#22c55e",Wednesday:"#f59e0b",Thursday:"#8b5cf6",Friday:"#ef4444",Saturday:"#06b6d4",Sunday:"#ec4899",Unknown:"#6b7280"};function ap(e){return ah[e]||"#6b7280"}function ax(){let[e,t]=(0,h.useState)([]),[s,r]=(0,h.useState)(null),[a,n]=(0,h.useState)(new Set),[l,i]=(0,h.useState)(new Set),[o,c]=(0,h.useState)(new Set(["filters","accounts"])),d=(0,h.useRef)(null),u=(0,h.useCallback)(e=>{d.current=e},[]),p=e=>{c(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},x=(0,h.useMemo)(()=>[...new Set(e.map(e=>e.route))].sort((e,t)=>"Unassigned"===e?1:"Unassigned"===t?-1:e.localeCompare(t)),[e]),v=(0,h.useMemo)(()=>{let t=new Set;return e.forEach(e=>e.days.forEach(e=>t.add(e))),["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday","Unknown"].filter(e=>t.has(e))},[e]),b=e=>{n(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},y=e=>{i(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},N=(0,h.useMemo)(()=>{let t=e;return a.size>0&&(t=t.filter(e=>a.has(e.route))),l.size>0&&(t=t.filter(e=>e.days.some(e=>l.has(e)))),t},[e,a,l]),C=(0,h.useMemo)(()=>{let e={},t={},s=0;return N.forEach(r=>{e[r.route]=(e[r.route]||0)+1,r.days.forEach(e=>{t[e]=(t[e]||0)+1}),s+=r.monthlyPrice||0}),{routeCounts:e,dayCounts:t,totalRevenue:s}},[N]),S=(e,t)=>{if(0===e.length)return;let s=["customerNumber","accountName","address","city","state","zip","route","routeTech","daysOfServiceRaw","monthlyPrice","oldTerritory"],r=new Blob([[s.join(","),...e.map(e=>s.map(t=>{let s=e[t];return"string"==typeof s&&(s.includes(",")||s.includes('"'))?`"${s.replace(/"/g,'""')}"`:s??""}).join(","))].join("\n")],{type:"text/csv"}),a=URL.createObjectURL(r),n=document.createElement("a");n.href=a,n.download=t,n.click()};if(0===e.length)return m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-8 text-center",children:[m.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),m.jsx("p",{children:"Loading commercial routes..."})]})});let L=a.size>0||l.size>0;return(0,m.jsxs)("div",{className:"space-y-4",children:[m.jsx(g.Zb,{className:"bg-gradient-to-r from-emerald-50 to-teal-50 border-emerald-200",children:(0,m.jsxs)(g.aY,{className:"p-4",children:[(0,m.jsxs)("h2",{className:"text-xl font-bold text-slate-900 mb-2 flex items-center gap-2",children:[m.jsx(k,{className:"h-6 w-6 text-emerald-600"}),"MIAMI COMMERCIAL ROUTES"]}),(0,m.jsxs)("p",{className:"text-sm text-slate-600",children:[e.length," commercial pools across ",x.length," routes. Filter by route and/or day of service to view specific assignments."]})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>p("filters"),children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[m.jsx(O,{className:"h-5 w-5 text-slate-600"}),"Filters",L&&(0,m.jsxs)(j.C,{variant:"secondary",className:"ml-2",children:[a.size>0&&`${a.size} routes`,a.size>0&&l.size>0&&", ",l.size>0&&`${l.size} days`]})]}),o.has("filters")?m.jsx(rA.Z,{className:"h-5 w-5"}):m.jsx(rR.Z,{className:"h-5 w-5"})]}),o.has("filters")&&(0,m.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,m.jsxs)("label",{className:"text-sm font-medium flex items-center gap-2",children:[m.jsx(w,{className:"h-4 w-4"})," Filter by Route"]}),(0,m.jsxs)("div",{className:"flex gap-2",children:[m.jsx(f.z,{variant:"ghost",size:"sm",onClick:()=>{n(new Set(x))},className:"text-xs h-7",children:"Select All"}),m.jsx(f.z,{variant:"ghost",size:"sm",onClick:()=>n(new Set),className:"text-xs h-7",children:"Clear"})]})]}),m.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(t=>{let s=a.has(t),r=e.filter(e=>e.route===t).length;return(0,m.jsxs)(j.C,{variant:s?"default":"outline",className:"cursor-pointer transition-all px-3 py-1",style:{backgroundColor:s?ap(t):"transparent",borderColor:ap(t),color:s?"white":ap(t)},onClick:()=>b(t),children:["Unassigned"===t?"Unassigned":t.replace(/^\d+\s+AFP\s+Route\s+/,"")," (",r,")"]},t)})})]}),(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,m.jsxs)("label",{className:"text-sm font-medium flex items-center gap-2",children:[m.jsx(ac,{className:"h-4 w-4"})," Filter by Day of Service"]}),m.jsx(f.z,{variant:"ghost",size:"sm",onClick:()=>i(new Set),className:"text-xs h-7",children:"Clear"})]}),m.jsx("div",{className:"flex flex-wrap gap-2",children:v.map(t=>{let s=l.has(t),r=e.filter(e=>e.days.includes(t)).length;return(0,m.jsxs)(j.C,{variant:s?"default":"outline",className:"cursor-pointer transition-all px-3 py-1",style:{backgroundColor:s?au[t]:"transparent",borderColor:au[t],color:s?"white":au[t]},onClick:()=>y(t),children:[t," (",r,")"]},t)})})]}),L&&m.jsx("div",{className:"pt-2 border-t",children:(0,m.jsxs)(f.z,{variant:"outline",size:"sm",onClick:()=>{n(new Set),i(new Set),r(null)},children:[m.jsx(r6,{className:"h-4 w-4 mr-2"})," Clear All Filters"]})})]})]})}),(0,m.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4 text-center",children:[m.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:N.length}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Pools Shown"})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4 text-center",children:[(0,m.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:["$",C.totalRevenue.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Monthly Revenue"})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4 text-center",children:[m.jsx("p",{className:"text-2xl font-bold text-purple-600",children:Object.keys(C.routeCounts).length}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Routes"})]})})]}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4",children:[m.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Commercial Pool Locations"}),m.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:L?`Showing ${N.length} pools matching filters`:"Select routes and/or days above to filter the map"}),(0,m.jsxs)(W,{mapContainerStyle:ad,center:{lat:25.82,lng:-80.2},zoom:10,options:am,onLoad:u,children:[N.map(e=>m.jsx(ek,{position:{lat:e.latitude,lng:e.longitude},icon:{path:google.maps.SymbolPath.CIRCLE,scale:8,fillColor:ap(e.route),fillOpacity:.9,strokeColor:"#fff",strokeWeight:2},onClick:()=>r(e.customerNumber)},e.customerNumber)),s&&(()=>{let t=e.find(e=>e.customerNumber===s);return t?m.jsx(tg,{position:{lat:t.latitude,lng:t.longitude},onCloseClick:()=>r(null),children:(0,m.jsxs)("div",{className:"p-2 min-w-[220px]",children:[m.jsx("p",{className:"font-bold text-sm",children:t.accountName}),m.jsx("p",{className:"text-xs text-gray-500",children:t.customerNumber}),m.jsx("p",{className:"text-sm mt-1",children:t.address}),(0,m.jsxs)("p",{className:"text-sm",children:[t.city,", ",t.state," ",t.zip]}),(0,m.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-200 space-y-1",children:[(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Route:"})," ",m.jsx("span",{style:{color:ap(t.route)},children:t.routeTech})]}),(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Days:"})," ",t.days.join(", ")]}),t.monthlyPrice>0&&(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Monthly:"})," ","$",t.monthlyPrice.toLocaleString(void 0,{minimumFractionDigits:2})]})]})]})}):null})()]}),(0,m.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mt-3 text-xs",children:[m.jsx("span",{className:"font-medium",children:"Routes:"}),x.filter(e=>"Unassigned"!==e).slice(0,6).map(e=>(0,m.jsxs)("div",{className:"flex items-center gap-1",children:[m.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:ap(e)}}),e.replace(/^\d+\s+AFP\s+Route\s+/,"")]},e)),x.length>6&&(0,m.jsxs)("span",{className:"text-muted-foreground",children:["+",x.length-6," more"]})]})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>p("accounts"),children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[m.jsx(k,{className:"h-5 w-5"}),"Account List (",N.length,")"]}),o.has("accounts")?m.jsx(rA.Z,{className:"h-5 w-5"}):m.jsx(rR.Z,{className:"h-5 w-5"})]}),o.has("accounts")&&m.jsx("div",{className:"mt-4",children:m.jsx("div",{className:"overflow-x-auto max-h-[400px] overflow-y-auto",children:(0,m.jsxs)(sz.iA,{children:[m.jsx(sz.xD,{className:"sticky top-0 bg-white z-10",children:(0,m.jsxs)(sz.SC,{children:[m.jsx(sz.ss,{children:"Property"}),m.jsx(sz.ss,{children:"Address"}),m.jsx(sz.ss,{className:"text-center",children:"Route"}),m.jsx(sz.ss,{className:"text-center",children:"Days"}),m.jsx(sz.ss,{className:"text-right",children:"Monthly"})]})}),m.jsx(sz.RM,{children:N.map(e=>(0,m.jsxs)(sz.SC,{className:"cursor-pointer hover:bg-slate-50",onClick:()=>{r(e.customerNumber),d.current&&(d.current.panTo({lat:e.latitude,lng:e.longitude}),d.current.setZoom(14))},children:[m.jsx(sz.pj,{children:(0,m.jsxs)("div",{children:[m.jsx("p",{className:"font-medium text-sm",children:e.accountName}),m.jsx("p",{className:"text-xs text-muted-foreground",children:e.customerNumber})]})}),(0,m.jsxs)(sz.pj,{className:"text-sm",children:[e.address,", ",e.city]}),m.jsx(sz.pj,{className:"text-center",children:m.jsx(j.C,{variant:"outline",className:"text-xs",style:{borderColor:ap(e.route),color:ap(e.route)},children:e.routeTech})}),m.jsx(sz.pj,{className:"text-center",children:m.jsx("div",{className:"flex flex-wrap gap-1 justify-center",children:e.days.map(e=>m.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded",style:{backgroundColor:au[e]+"20",color:au[e]},children:e.substring(0,3)},e))})}),m.jsx(sz.pj,{className:"text-right text-sm",children:e.monthlyPrice>0?`$${e.monthlyPrice.toLocaleString(void 0,{minimumFractionDigits:2})}`:"-"})]},e.customerNumber))})]})})})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4",children:[m.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Export Data"}),(0,m.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,m.jsxs)(f.z,{variant:"outline",size:"sm",onClick:()=>S(N,"miami-commercial-filtered.csv"),children:[m.jsx(s6,{className:"h-4 w-4 mr-2"}),"Export Filtered (",N.length,")"]}),(0,m.jsxs)(f.z,{variant:"outline",size:"sm",onClick:()=>S(e,"miami-commercial-all.csv"),children:[m.jsx(s6,{className:"h-4 w-4 mr-2"}),"Export All (",e.length,")"]})]})]})})]})}let ag={width:"100%",height:"550px"},af={styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!0},aj={"15 AFP Route Kymani P":"#22c55e","22 AFP Route Ramon R":"#8b5cf6","23 AFP Route Juan C":"#ec4899","25 AFP Route Carlos S":"#06b6d4"},av={Monday:"#3b82f6",Tuesday:"#22c55e",Wednesday:"#f59e0b",Thursday:"#8b5cf6",Friday:"#ef4444",Saturday:"#06b6d4",Sunday:"#ec4899",Unknown:"#6b7280"};function ab(e){return aj[e]||"#6b7280"}function ay(){let[e,t]=(0,h.useState)([]),[s,r]=(0,h.useState)(null),[a,n]=(0,h.useState)(new Set),[l,i]=(0,h.useState)(new Set),[o,c]=(0,h.useState)(!1),[d,u]=(0,h.useState)(new Set(["summary","filters","accounts"])),p=(0,h.useRef)(null),x=(0,h.useCallback)(e=>{p.current=e},[]),v=e=>{u(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},b=(0,h.useMemo)(()=>[...new Set(e.map(e=>e.route))].sort(),[e]),y=(0,h.useMemo)(()=>{let t=new Set;return e.forEach(e=>e.days.forEach(e=>t.add(e))),["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday","Unknown"].filter(e=>t.has(e))},[e]),N=e=>{n(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},C=e=>{i(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},S=(0,h.useMemo)(()=>{let t=e;return a.size>0&&(t=t.filter(e=>a.has(e.route))),l.size>0&&(t=t.filter(e=>e.days.some(e=>l.has(e)))),o&&(t=t.filter(e=>e.reassigned)),t},[e,a,l,o]),L=(0,h.useMemo)(()=>{let t={},s=0,r=0;return e.forEach(e=>{t[e.route]||(t[e.route]={total:0,kept:0,added:0}),t[e.route].total++,e.reassigned?(t[e.route].added++,r++):t[e.route].kept++,s+=e.monthlyPrice||0}),{routeCounts:t,totalRevenue:s,totalReassigned:r}},[e]),P=(e,t)=>{if(0===e.length)return;let s=["customerNumber","accountName","address","city","state","zip","route","routeTech","daysOfServiceRaw","monthlyPrice","reassigned","originalRoute","originalTech"],r=new Blob([[s.join(","),...e.map(e=>s.map(t=>{let s=e[t];return"string"==typeof s&&(s.includes(",")||s.includes('"'))?`"${s.replace(/"/g,'""')}"`:s??""}).join(","))].join("\n")],{type:"text/csv"}),a=URL.createObjectURL(r),n=document.createElement("a");n.href=a,n.download=t,n.click()};if(0===e.length)return m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-8 text-center",children:[m.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),m.jsx("p",{children:"Loading future commercial routes..."})]})});let M=a.size>0||l.size>0||o;return(0,m.jsxs)("div",{className:"space-y-4",children:[m.jsx(g.Zb,{className:"bg-gradient-to-r from-amber-50 to-orange-50 border-amber-200",children:(0,m.jsxs)(g.aY,{className:"p-4",children:[(0,m.jsxs)("h2",{className:"text-xl font-bold text-slate-900 mb-2 flex items-center gap-2",children:[m.jsx(k,{className:"h-6 w-6 text-amber-600"}),"FUTURE COMMERCIAL ROUTES"]}),(0,m.jsxs)("p",{className:"text-sm text-slate-600",children:["Consolidated routes for ",e.length," commercial pools across 4 technicians. All pools reassigned from other techs while maintaining geographic efficiency."]})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>v("summary"),children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[m.jsx(w,{className:"h-5 w-5"}),"Technician Summary"]}),d.has("summary")?m.jsx(rA.Z,{className:"h-5 w-5"}):m.jsx(rR.Z,{className:"h-5 w-5"})]}),d.has("summary")&&m.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mt-4",children:b.map(e=>{let t=L.routeCounts[e],s=e.replace(/^\d+\s+AFP\s+Route\s+/,"");return m.jsx(g.Zb,{className:"cursor-pointer hover:shadow-md transition-shadow",style:{borderColor:ab(e),borderWidth:2},onClick:()=>{n(new Set([e])),c(!1)},children:(0,m.jsxs)(g.aY,{className:"p-3",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:ab(e)}}),m.jsx("span",{className:"font-semibold text-sm",children:s})]}),m.jsx("p",{className:"text-2xl font-bold",style:{color:ab(e)},children:t?.total||0}),(0,m.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:[(0,m.jsxs)("span",{className:"text-green-600",children:[t?.kept||0," kept"]})," \xb7 ",(0,m.jsxs)("span",{className:"text-amber-600",children:["+",t?.added||0," added"]})]})]})},e)})})]})}),(0,m.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4 text-center",children:[m.jsx("p",{className:"text-2xl font-bold text-amber-600",children:e.length}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Pools"})]})}),m.jsx(g.Zb,{className:"cursor-pointer hover:bg-slate-50",onClick:()=>c(!o),children:(0,m.jsxs)(g.aY,{className:"p-4 text-center",children:[m.jsx("p",{className:"text-2xl font-bold text-orange-600",children:L.totalReassigned}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Reassigned"}),o&&m.jsx(j.C,{className:"mt-1 bg-orange-100 text-orange-700",children:"Filtered"})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4 text-center",children:[(0,m.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["$",L.totalRevenue.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Monthly Revenue"})]})})]}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>v("filters"),children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[m.jsx(O,{className:"h-5 w-5 text-slate-600"}),"Filters",M&&m.jsx(j.C,{variant:"secondary",className:"ml-2",children:"Active"})]}),d.has("filters")?m.jsx(rA.Z,{className:"h-5 w-5"}):m.jsx(rR.Z,{className:"h-5 w-5"})]}),d.has("filters")&&(0,m.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,m.jsxs)("label",{className:"text-sm font-medium flex items-center gap-2",children:[m.jsx(w,{className:"h-4 w-4"})," Filter by Technician"]}),(0,m.jsxs)("div",{className:"flex gap-2",children:[m.jsx(f.z,{variant:"ghost",size:"sm",onClick:()=>n(new Set(b)),className:"text-xs h-7",children:"Select All"}),m.jsx(f.z,{variant:"ghost",size:"sm",onClick:()=>n(new Set),className:"text-xs h-7",children:"Clear"})]})]}),m.jsx("div",{className:"flex flex-wrap gap-2",children:b.map(e=>{let t=a.has(e),s=e.replace(/^\d+\s+AFP\s+Route\s+/,""),r=L.routeCounts[e]?.total||0;return(0,m.jsxs)(j.C,{variant:t?"default":"outline",className:"cursor-pointer transition-all px-3 py-1",style:{backgroundColor:t?ab(e):"transparent",borderColor:ab(e),color:t?"white":ab(e)},onClick:()=>N(e),children:[s," (",r,")"]},e)})})]}),(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,m.jsxs)("label",{className:"text-sm font-medium flex items-center gap-2",children:[m.jsx(ac,{className:"h-4 w-4"})," Filter by Day"]}),m.jsx(f.z,{variant:"ghost",size:"sm",onClick:()=>i(new Set),className:"text-xs h-7",children:"Clear"})]}),m.jsx("div",{className:"flex flex-wrap gap-2",children:y.map(t=>{let s=l.has(t),r=e.filter(e=>e.days.includes(t)).length;return(0,m.jsxs)(j.C,{variant:s?"default":"outline",className:"cursor-pointer transition-all px-3 py-1",style:{backgroundColor:s?av[t]:"transparent",borderColor:av[t],color:s?"white":av[t]},onClick:()=>C(t),children:[t," (",r,")"]},t)})})]}),M&&m.jsx("div",{className:"pt-2 border-t",children:m.jsx(f.z,{variant:"outline",size:"sm",onClick:()=>{n(new Set),i(new Set),c(!1),r(null)},children:"Clear All Filters"})})]})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4",children:[m.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Pool Locations"}),(0,m.jsxs)("p",{className:"text-sm text-muted-foreground mb-3",children:["Showing ",S.length," pools",o&&" (reassigned only)"]}),(0,m.jsxs)(W,{mapContainerStyle:ag,center:{lat:25.82,lng:-80.2},zoom:10,options:af,onLoad:x,children:[S.map(e=>m.jsx(ek,{position:{lat:e.latitude,lng:e.longitude},icon:{path:google.maps.SymbolPath.CIRCLE,scale:e.reassigned?10:8,fillColor:ab(e.route),fillOpacity:.9,strokeColor:e.reassigned?"#f59e0b":"#fff",strokeWeight:e.reassigned?3:2},onClick:()=>r(e.customerNumber)},e.customerNumber)),s&&(()=>{let t=e.find(e=>e.customerNumber===s);return t?m.jsx(tg,{position:{lat:t.latitude,lng:t.longitude},onCloseClick:()=>r(null),children:(0,m.jsxs)("div",{className:"p-2 min-w-[240px]",children:[m.jsx("p",{className:"font-bold text-sm",children:t.accountName}),m.jsx("p",{className:"text-xs text-gray-500",children:t.customerNumber}),m.jsx("p",{className:"text-sm mt-1",children:t.address}),(0,m.jsxs)("p",{className:"text-sm",children:[t.city,", ",t.state," ",t.zip]}),(0,m.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-200 space-y-1",children:[(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Tech:"})," ",m.jsx("span",{style:{color:ab(t.route)},children:t.routeTech})]}),(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Days:"})," ",t.days.join(", ")]}),t.monthlyPrice>0&&(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Monthly:"})," ","$",t.monthlyPrice.toLocaleString(void 0,{minimumFractionDigits:2})]}),t.reassigned&&(0,m.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[m.jsx(j.C,{className:"bg-amber-100 text-amber-700",children:"Reassigned"}),(0,m.jsxs)("p",{className:"text-xs mt-1 text-gray-600",children:["From: ",t.originalTech]})]})]})]})}):null})()]}),(0,m.jsxs)("div",{className:"flex flex-wrap items-center gap-4 mt-3 text-xs",children:[m.jsx("span",{className:"font-medium",children:"Technicians:"}),b.map(e=>(0,m.jsxs)("div",{className:"flex items-center gap-1",children:[m.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:ab(e)}}),e.replace(/^\d+\s+AFP\s+Route\s+/,"")]},e)),m.jsx("span",{className:"text-muted-foreground",children:"|"}),(0,m.jsxs)("div",{className:"flex items-center gap-1",children:[m.jsx("span",{className:"w-3 h-3 rounded-full border-2 border-amber-500 bg-gray-300"}),"Reassigned (amber border)"]})]})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>v("accounts"),children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[m.jsx(k,{className:"h-5 w-5"}),"Account List (",S.length,")"]}),d.has("accounts")?m.jsx(rA.Z,{className:"h-5 w-5"}):m.jsx(rR.Z,{className:"h-5 w-5"})]}),d.has("accounts")&&m.jsx("div",{className:"mt-4",children:m.jsx("div",{className:"overflow-x-auto max-h-[400px] overflow-y-auto",children:(0,m.jsxs)(sz.iA,{children:[m.jsx(sz.xD,{className:"sticky top-0 bg-white z-10",children:(0,m.jsxs)(sz.SC,{children:[m.jsx(sz.ss,{children:"Property"}),m.jsx(sz.ss,{children:"Address"}),m.jsx(sz.ss,{className:"text-center",children:"Tech"}),m.jsx(sz.ss,{className:"text-center",children:"Days"}),m.jsx(sz.ss,{className:"text-center",children:"Status"}),m.jsx(sz.ss,{className:"text-right",children:"Monthly"})]})}),m.jsx(sz.RM,{children:S.map(e=>(0,m.jsxs)(sz.SC,{className:"cursor-pointer hover:bg-slate-50",onClick:()=>{r(e.customerNumber),p.current&&(p.current.panTo({lat:e.latitude,lng:e.longitude}),p.current.setZoom(14))},children:[m.jsx(sz.pj,{children:(0,m.jsxs)("div",{children:[m.jsx("p",{className:"font-medium text-sm",children:e.accountName}),m.jsx("p",{className:"text-xs text-muted-foreground",children:e.customerNumber})]})}),(0,m.jsxs)(sz.pj,{className:"text-sm",children:[e.address,", ",e.city]}),m.jsx(sz.pj,{className:"text-center",children:m.jsx(j.C,{variant:"outline",className:"text-xs",style:{borderColor:ab(e.route),color:ab(e.route)},children:e.routeTech})}),m.jsx(sz.pj,{className:"text-center",children:(0,m.jsxs)("div",{className:"flex flex-wrap gap-1 justify-center",children:[e.days.slice(0,3).map(e=>m.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded",style:{backgroundColor:av[e]+"20",color:av[e]},children:e.substring(0,3)},e)),e.days.length>3&&(0,m.jsxs)("span",{className:"text-xs text-muted-foreground",children:["+",e.days.length-3]})]})}),m.jsx(sz.pj,{className:"text-center",children:e.reassigned?m.jsx("div",{className:"text-xs",children:(0,m.jsxs)(j.C,{className:"bg-amber-100 text-amber-700 text-[10px]",children:[m.jsx(rG,{className:"h-3 w-3 mr-1"}),"From ",e.originalTech]})}):m.jsx(rU.Z,{className:"h-4 w-4 text-green-500 mx-auto"})}),m.jsx(sz.pj,{className:"text-right text-sm",children:e.monthlyPrice>0?`$${e.monthlyPrice.toLocaleString(void 0,{minimumFractionDigits:2})}`:"-"})]},e.customerNumber))})]})})})]})}),m.jsx(g.Zb,{children:(0,m.jsxs)(g.aY,{className:"p-4",children:[m.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Export Data"}),(0,m.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,m.jsxs)(f.z,{variant:"outline",size:"sm",onClick:()=>P(S,"miami-future-commercial-filtered.csv"),children:[m.jsx(s6,{className:"h-4 w-4 mr-2"}),"Export Filtered (",S.length,")"]}),(0,m.jsxs)(f.z,{variant:"outline",size:"sm",onClick:()=>P(e.filter(e=>e.reassigned),"miami-future-commercial-reassigned.csv"),children:[m.jsx(s6,{className:"h-4 w-4 mr-2"}),"Export Reassigned (",L.totalReassigned,")"]}),(0,m.jsxs)(f.z,{variant:"outline",size:"sm",onClick:()=>P(e,"miami-future-commercial-all.csv"),children:[m.jsx(s6,{className:"h-4 w-4 mr-2"}),"Export All (",e.length,")"]})]})]})})]})}let aN={width:"100%",height:"600px"},aC={lat:30.3322,lng:-81.6557},aw={disableDefaultUI:!1,zoomControl:!0,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!0,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]},ak=e=>({"JAX - Maint Ponte Vedra":"#06b6d4","JAX - Maint Jacksonville":"#2563eb","JAX - Maint St. Augustine":"#14b8a6","JAX - Maint St. Johns":"#10b981","JAX - Maint Nocatee":"#84cc16","JAX - Maint Beaches":"#0ea5e9","JAX - Maint Outskirts":"#6366f1","JAX - Comm Maint":"#8b5cf6"})[e]||"#6b7280",aS=e=>0===e?"#f3f4f6":e<1e3?"#fef3c7":e<3e3?"#fde68a":e<5e3?"#fcd34d":e<8e3?"#fbbf24":e<12e3?"#f59e0b":"#d97706";function aL(){let[e,t]=(0,h.useState)([]),[s,r]=(0,h.useState)({}),[a,n]=(0,h.useState)(!0),[l,i]=(0,h.useState)(null),[o,c]=(0,h.useState)(null),[d,u]=(0,h.useState)(null),[p,x]=(0,h.useState)({}),[v,y]=(0,h.useState)("none"),N=(0,h.useCallback)(e=>{x(t=>({...t,[e]:!t[e]}))},[]),C=(0,h.useMemo)(()=>e.filter(e=>p[e.territory]),[e,p]),w=(0,h.useMemo)(()=>o&&e.find(e=>e.zip===o)||null,[o,e]),k=(0,h.useMemo)(()=>{if(!w||!w.accounts)return[];let e=[...w.accounts];return"asc"===v?e.sort((e,t)=>e.monthlyPrice-t.monthlyPrice):"desc"===v?e.sort((e,t)=>t.monthlyPrice-e.monthlyPrice):e},[w,v]),S=(0,h.useMemo)(()=>{let e={};return C.forEach(t=>{e[t.territory]||(e[t.territory]={count:0,avgResidentialPrice:0,residentialCount:0,totalResidentialRevenue:0}),e[t.territory].count+=t.accountCount,t.accounts.forEach(s=>{"Residential"===s.accountType&&(e[t.territory].residentialCount+=1,e[t.territory].totalResidentialRevenue+=s.monthlyPrice)})}),Object.keys(e).forEach(t=>{e[t].residentialCount>0&&(e[t].avgResidentialPrice=e[t].totalResidentialRevenue/e[t].residentialCount)}),e},[C]),L=(0,h.useCallback)(e=>{c(e),y("none")},[]),M=(0,h.useCallback)(()=>{y(e=>"none"===e?"desc":"desc"===e?"asc":"none")},[]);return a?m.jsx(g.Zb,{className:"p-6",children:(0,m.jsxs)("div",{className:"flex items-center justify-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"}),m.jsx("span",{className:"ml-3",children:"Loading Jacksonville revenue data..."})]})}):l?m.jsx(g.Zb,{className:"p-6",children:(0,m.jsxs)("div",{className:"flex items-center text-red-600",children:[m.jsx(sV,{className:"mr-2"}),m.jsx("span",{children:l})]})}):(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)(g.Zb,{className:"p-4",children:[m.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Territory Filters"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:Object.keys(p).map(e=>{let t=S[e]||{count:0,avgResidentialPrice:0,residentialCount:0,totalResidentialRevenue:0};return(0,m.jsxs)(f.z,{variant:p[e]?"default":"outline",size:"sm",onClick:()=>N(e),style:{backgroundColor:p[e]?ak(e):void 0,borderColor:ak(e),color:p[e]?"#ffffff":ak(e)},className:"flex items-center gap-2",children:[m.jsx("span",{children:e}),(0,m.jsxs)(j.C,{variant:"secondary",className:"ml-1",children:[t.count," accounts"]}),(0,m.jsxs)(j.C,{variant:"secondary",children:["Avg: $",t.avgResidentialPrice.toFixed(2)]})]},e)})})]}),(0,m.jsxs)(g.Zb,{className:"p-4",children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[m.jsx(b,{className:"w-5 h-5"}),"Revenue by ZIP Code"]}),(0,m.jsxs)(W,{mapContainerStyle:aN,center:aC,zoom:10,options:aw,children:[C.map(e=>{let t=s[e.zip];return t&&t.coordinates?("MultiPolygon"===t.type?t.coordinates:[t.coordinates]).map((s,r)=>{let a=(t.type,s[0]).map(e=>({lat:e[1],lng:e[0]})),n=o===e.zip,l=d===e.zip;return m.jsx(tE,{paths:a,options:{fillColor:aS(e.totalRevenue),fillOpacity:n?.8:l?.6:.5,strokeColor:n?"#000000":ak(e.territory),strokeOpacity:.9,strokeWeight:n?3:2,clickable:!0},onClick:()=>L(e.zip),onMouseOver:()=>u(e.zip),onMouseOut:()=>u(null)},`${e.zip}-${r}`)}):null}),w&&m.jsx(tf,{position:{lat:e.find(e=>e.zip===o)?.accounts[0]?.latitude||aC.lat,lng:e.find(e=>e.zip===o)?.accounts[0]?.longitude||aC.lng},onCloseClick:()=>c(null),children:(0,m.jsxs)("div",{className:"p-2",children:[(0,m.jsxs)("h4",{className:"font-semibold text-lg",children:["ZIP ",w.zip]}),m.jsx("p",{className:"text-sm text-gray-600",children:w.city}),(0,m.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Territory:"})," ",w.territory]}),(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Accounts:"})," ",w.accountCount]}),(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Monthly Revenue:"})," $",w.totalRevenue.toLocaleString()]}),(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Yearly Revenue:"})," $",(12*w.totalRevenue).toLocaleString()]}),(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Avg Price/Account:"})," $",w.accountCount>0?(w.totalRevenue/w.accountCount).toFixed(2):"0.00"]})]})]})})]}),(0,m.jsxs)("div",{className:"mt-4 flex items-center justify-center gap-4 flex-wrap",children:[m.jsx("span",{className:"text-sm font-medium",children:"Monthly Revenue:"}),[{label:"$0",color:"#f3f4f6"},{label:"<$1k",color:"#fef3c7"},{label:"$1k-$3k",color:"#fde68a"},{label:"$3k-$5k",color:"#fcd34d"},{label:"$5k-$8k",color:"#fbbf24"},{label:"$8k-$12k",color:"#f59e0b"},{label:">$12k",color:"#d97706"}].map(e=>(0,m.jsxs)("div",{className:"flex items-center gap-1",children:[m.jsx("div",{className:"w-4 h-4 border border-gray-300 rounded",style:{backgroundColor:e.color}}),m.jsx("span",{className:"text-xs",children:e.label})]},e.label))]})]}),w&&w.accounts.length>0&&(0,m.jsxs)(g.Zb,{className:"p-4",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[m.jsx(P,{className:"w-5 h-5"}),"Accounts in ZIP ",w.zip," (",k.length,")"]}),(0,m.jsxs)(f.z,{variant:"outline",size:"sm",onClick:M,className:"flex items-center gap-2",children:[m.jsx(sD,{className:"w-4 h-4"}),"Sort by Price","desc"===v&&" (High to Low)","asc"===v&&" (Low to High)","none"===v&&" (Default)"]})]}),m.jsx("div",{className:"overflow-x-auto",children:(0,m.jsxs)(sz.iA,{children:[m.jsx(sz.xD,{children:(0,m.jsxs)(sz.SC,{children:[m.jsx(sz.ss,{children:"Customer #"}),m.jsx(sz.ss,{children:"Name"}),m.jsx(sz.ss,{children:"Address"}),m.jsx(sz.ss,{children:"Type"}),m.jsx(sz.ss,{children:"Territory"}),m.jsx(sz.ss,{className:"text-right",children:"Monthly Price"}),m.jsx(sz.ss,{className:"text-right",children:"Yearly Price"})]})}),m.jsx(sz.RM,{children:k.map(e=>(0,m.jsxs)(sz.SC,{children:[m.jsx(sz.pj,{className:"font-medium",children:e.customerNumber}),m.jsx(sz.pj,{children:e.customerName}),m.jsx(sz.pj,{children:e.address}),m.jsx(sz.pj,{children:m.jsx(j.C,{variant:"Commercial"===e.accountType?"default":"secondary",children:e.accountType})}),m.jsx(sz.pj,{children:m.jsx("div",{className:"inline-block px-2 py-1 rounded text-xs text-white",style:{backgroundColor:ak(e.territory)},children:e.territory})}),(0,m.jsxs)(sz.pj,{className:"text-right font-semibold",children:["$",e.monthlyPrice.toFixed(2)]}),(0,m.jsxs)(sz.pj,{className:"text-right",children:["$",e.yearlyPrice.toFixed(2)]})]},e.customerNumber))})]})}),m.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:(0,m.jsxs)("div",{className:"flex justify-between items-center",children:[(0,m.jsxs)("span",{className:"font-semibold",children:["Total for ZIP ",w.zip,":"]}),(0,m.jsxs)("div",{className:"flex gap-4",children:[(0,m.jsxs)("span",{children:[m.jsx("span",{className:"text-sm text-gray-600",children:"Monthly:"})," ",(0,m.jsxs)("span",{className:"font-bold text-green-600",children:["$",w.totalRevenue.toLocaleString()]})]}),(0,m.jsxs)("span",{children:[m.jsx("span",{className:"text-sm text-gray-600",children:"Yearly:"})," ",(0,m.jsxs)("span",{className:"font-bold text-green-600",children:["$",(12*w.totalRevenue).toLocaleString()]})]})]})]})})]})]})}let aP={width:"100%",height:"600px"},aM={lat:30.3322,lng:-81.6557},aE={disableDefaultUI:!1,zoomControl:!0,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!0,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]};function aT(){let[e,t]=(0,h.useState)([]),[s,r]=(0,h.useState)(!0),[a,n]=(0,h.useState)(null),[l,i]=(0,h.useState)(null),[o,c]=(0,h.useState)(null),d=(0,h.useCallback)(e=>{i(e)},[]),u=e.reduce((e,t)=>e+t.monthlyPrice,0),p=12*u;return s?m.jsx(g.Zb,{className:"p-6",children:(0,m.jsxs)("div",{className:"flex items-center justify-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"}),m.jsx("span",{className:"ml-3",children:"Loading Jacksonville commercial accounts..."})]})}):a?m.jsx(g.Zb,{className:"p-6",children:(0,m.jsxs)("div",{className:"flex items-center text-red-600",children:[m.jsx(sV,{className:"mr-2"}),m.jsx("span",{children:a})]})}):(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,m.jsxs)(g.Zb,{className:"p-4",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[m.jsx(k,{className:"w-4 h-4"}),m.jsx("span",{className:"text-sm",children:"Total Accounts"})]}),m.jsx("div",{className:"text-2xl font-bold",children:e.length})]}),(0,m.jsxs)(g.Zb,{className:"p-4",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[m.jsx(P,{className:"w-4 h-4"}),m.jsx("span",{className:"text-sm",children:"Monthly Revenue"})]}),(0,m.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["$",u.toLocaleString()]})]}),(0,m.jsxs)(g.Zb,{className:"p-4",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[m.jsx(P,{className:"w-4 h-4"}),m.jsx("span",{className:"text-sm",children:"Yearly Revenue"})]}),(0,m.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["$",p.toLocaleString()]})]}),(0,m.jsxs)(g.Zb,{className:"p-4",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[m.jsx(b,{className:"w-4 h-4"}),m.jsx("span",{className:"text-sm",children:"Unique ZIPs"})]}),m.jsx("div",{className:"text-2xl font-bold",children:[...new Set(e.map(e=>e.zip))].length})]})]}),(0,m.jsxs)(g.Zb,{className:"p-4",children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[m.jsx(k,{className:"w-5 h-5"}),"Commercial Accounts Map"]}),(0,m.jsxs)(W,{mapContainerStyle:aP,center:aM,zoom:10,options:aE,children:[e.map(e=>m.jsx(eS,{position:{lat:e.latitude,lng:e.longitude},icon:{path:google.maps.SymbolPath.CIRCLE,scale:o===e.customerNumber?12:8,fillColor:"#8b5cf6",fillOpacity:1,strokeColor:"#ffffff",strokeWeight:2},onClick:()=>d(e),onMouseOver:()=>c(e.customerNumber),onMouseOut:()=>c(null)},e.customerNumber)),l&&m.jsx(tf,{position:{lat:l.latitude,lng:l.longitude},onCloseClick:()=>i(null),children:(0,m.jsxs)("div",{className:"p-2",children:[m.jsx("h4",{className:"font-semibold text-lg",children:l.customerName}),m.jsx("p",{className:"text-sm text-gray-600 mb-2",children:l.customerNumber}),(0,m.jsxs)("div",{className:"space-y-1",children:[(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Address:"})," ",l.address]}),(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"City:"})," ",l.city,", ",l.state," ",l.zip]}),(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Territory:"})," ",l.territory]}),(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Technician:"})," ",l.technician]}),(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Service Day:"})," ",l.dayOfWeek]}),(0,m.jsxs)("div",{className:"mt-2 pt-2 border-t",children:[(0,m.jsxs)("p",{className:"text-sm font-semibold text-green-600",children:["Monthly: $",l.monthlyPrice.toLocaleString()]}),(0,m.jsxs)("p",{className:"text-sm text-gray-600",children:["Yearly: $",l.yearlyPrice.toLocaleString()]})]})]})]})})]})]}),(0,m.jsxs)(g.Zb,{className:"p-4",children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[m.jsx(k,{className:"w-5 h-5"}),"All Commercial Accounts (",e.length,")"]}),m.jsx("div",{className:"overflow-x-auto",children:(0,m.jsxs)(sz.iA,{children:[m.jsx(sz.xD,{children:(0,m.jsxs)(sz.SC,{children:[m.jsx(sz.ss,{children:"Customer #"}),m.jsx(sz.ss,{children:"Name"}),m.jsx(sz.ss,{children:"Address"}),m.jsx(sz.ss,{children:"City"}),m.jsx(sz.ss,{children:"ZIP"}),m.jsx(sz.ss,{children:"Territory"}),m.jsx(sz.ss,{children:"Technician"}),m.jsx(sz.ss,{children:"Service Day"}),m.jsx(sz.ss,{className:"text-right",children:"Monthly Price"}),m.jsx(sz.ss,{className:"text-right",children:"Yearly Price"})]})}),m.jsx(sz.RM,{children:e.map(e=>(0,m.jsxs)(sz.SC,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>d(e),children:[m.jsx(sz.pj,{className:"font-medium",children:e.customerNumber}),m.jsx(sz.pj,{children:e.customerName}),m.jsx(sz.pj,{children:e.address}),m.jsx(sz.pj,{children:e.city}),m.jsx(sz.pj,{children:e.zip}),m.jsx(sz.pj,{children:m.jsx(j.C,{variant:"default",className:"bg-violet-500",children:e.territory})}),m.jsx(sz.pj,{children:e.technician}),m.jsx(sz.pj,{children:e.dayOfWeek}),(0,m.jsxs)(sz.pj,{className:"text-right font-semibold text-green-600",children:["$",e.monthlyPrice.toFixed(2)]}),(0,m.jsxs)(sz.pj,{className:"text-right",children:["$",e.yearlyPrice.toFixed(2)]})]},e.customerNumber))})]})}),m.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:(0,m.jsxs)("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"font-semibold",children:"Total Commercial Revenue:"}),(0,m.jsxs)("div",{className:"flex gap-4",children:[(0,m.jsxs)("span",{children:[m.jsx("span",{className:"text-sm text-gray-600",children:"Monthly:"})," ",(0,m.jsxs)("span",{className:"font-bold text-green-600",children:["$",u.toLocaleString()]})]}),(0,m.jsxs)("span",{children:[m.jsx("span",{className:"text-sm text-gray-600",children:"Yearly:"})," ",(0,m.jsxs)("span",{className:"font-bold text-green-600",children:["$",p.toLocaleString()]})]})]})]})})]})]})}let aO={width:"100%",height:"600px"},az={lat:30.3322,lng:-81.6557},aA={disableDefaultUI:!1,zoomControl:!0,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!0,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]},aR=e=>({"JAX - Maint Ponte Vedra":"#06b6d4","JAX - Maint Jacksonville":"#2563eb","JAX - Maint St. Augustine":"#14b8a6","JAX - Maint St. Johns":"#10b981","JAX - Maint Nocatee":"#84cc16","JAX - Maint Beaches":"#0ea5e9","JAX - Maint Outskirts":"#6366f1","JAX - Comm Maint":"#8b5cf6"})[e]||"#6b7280",aD=e=>({Monday:"#3b82f6",Tuesday:"#10b981",Wednesday:"#f59e0b",Thursday:"#ec4899",Friday:"#8b5cf6",Saturday:"#06b6d4",Sunday:"#ef4444"})[e]||"#6b7280";function aI(){let[e,t]=(0,h.useState)([]),[s,r]=(0,h.useState)({}),[a,n]=(0,h.useState)(!0),[l,i]=(0,h.useState)(null),[o,c]=(0,h.useState)(""),[d,u]=(0,h.useState)("all"),[p,x]=(0,h.useState)(null),[f,v]=(0,h.useState)(null),y=(0,h.useMemo)(()=>{let t={};return e.forEach(e=>{t[e.technician]||(t[e.technician]={count:0,territories:new Set}),t[e.technician].count++,t[e.technician].territories.add(e.territory)}),Object.entries(t).map(([e,t])=>({name:e,count:t.count,territories:Array.from(t.territories)})).sort((e,t)=>t.count-e.count)},[e]),N=(0,h.useMemo)(()=>{let t=["Monday","Tuesday","Wednesday","Thursday","Friday","Sunday"];return["all",...Array.from(new Set(e.map(e=>e.dayOfWeek))).filter(Boolean).sort((e,s)=>t.indexOf(e)-t.indexOf(s))]},[e]),C=(0,h.useMemo)(()=>{let t=e;return o&&(t=t.filter(e=>e.technician===o)),d&&"all"!==d&&(t=t.filter(e=>e.dayOfWeek===d)),t},[e,o,d]),k=(0,h.useMemo)(()=>[...new Set(C.map(e=>e.zip))],[C]),S=(0,h.useMemo)(()=>{let e={},t={};return C.forEach(s=>{e[s.dayOfWeek]=(e[s.dayOfWeek]||0)+1,t[s.territory]=(t[s.territory]||0)+1}),{dayStats:e,territoryStats:t}},[C]),L=(0,h.useCallback)(e=>{x(e)},[]);return a?m.jsx(g.Zb,{className:"p-6",children:(0,m.jsxs)("div",{className:"flex items-center justify-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"}),m.jsx("span",{className:"ml-3",children:"Loading Jacksonville routes..."})]})}):l?m.jsx(g.Zb,{className:"p-6",children:(0,m.jsxs)("div",{className:"flex items-center text-red-600",children:[m.jsx(sV,{className:"mr-2"}),m.jsx("span",{children:l})]})}):(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)(g.Zb,{className:"p-4",children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[m.jsx(w,{className:"w-5 h-5"}),"Route Filters"]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Select Technician"}),(0,m.jsxs)(sY.Ph,{value:o,onValueChange:c,children:[m.jsx(sY.i4,{children:m.jsx(sY.ki,{placeholder:"Select technician..."})}),m.jsx(sY.Bw,{children:y.map(e=>(0,m.jsxs)(sY.Ql,{value:e.name,children:[e.name," (",e.count," stops)  ",e.territories.join(", ")]},e.name))})]})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Service Day"}),(0,m.jsxs)(sY.Ph,{value:d,onValueChange:u,children:[m.jsx(sY.i4,{children:m.jsx(sY.ki,{placeholder:"Select day..."})}),m.jsx(sY.Bw,{children:N.map(e=>m.jsx(sY.Ql,{value:e,children:"all"===e?"All Days":e},e))})]})]})]}),o&&m.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-semibold",children:"Showing:"})," ",C.length," stops","all"!==d&&` on ${d}`]})})]}),o&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,m.jsxs)(g.Zb,{className:"p-4",children:[m.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Stops"}),m.jsx("div",{className:"text-2xl font-bold",children:C.length})]}),(0,m.jsxs)(g.Zb,{className:"p-4",children:[m.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Unique ZIPs"}),m.jsx("div",{className:"text-2xl font-bold",children:k.length})]}),(0,m.jsxs)(g.Zb,{className:"p-4",children:[m.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Territories"}),m.jsx("div",{className:"text-2xl font-bold",children:Object.keys(S.territoryStats).length})]}),(0,m.jsxs)(g.Zb,{className:"p-4",children:[m.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Service Days"}),m.jsx("div",{className:"text-2xl font-bold",children:Object.keys(S.dayStats).length})]})]}),(0,m.jsxs)(g.Zb,{className:"p-4",children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[m.jsx(b,{className:"w-5 h-5"}),"Route Map - ",o]}),(0,m.jsxs)(W,{mapContainerStyle:aO,center:az,zoom:10,options:aA,children:[k.map(e=>{let t=s[e];if(!t||!t.coordinates)return null;let r="MultiPolygon"===t.type?t.coordinates:[t.coordinates],a=C.filter(t=>t.zip===e),n=a[0]?.territory;return r.map((s,r)=>{let a=(t.type,s[0]).map(e=>({lat:e[1],lng:e[0]}));return m.jsx(tE,{paths:a,options:{fillColor:aR(n),fillOpacity:.2,strokeColor:aR(n),strokeOpacity:.6,strokeWeight:2,clickable:!1}},`${e}-${r}`)})}),C.map(e=>m.jsx(eS,{position:{lat:e.latitude,lng:e.longitude},icon:{path:google.maps.SymbolPath.CIRCLE,scale:f===e.customerNumber?10:7,fillColor:"Commercial"===e.accountType?"#8b5cf6":aD(e.dayOfWeek),fillOpacity:1,strokeColor:"#ffffff",strokeWeight:2},onClick:()=>L(e),onMouseOver:()=>v(e.customerNumber),onMouseOut:()=>v(null)},e.customerNumber)),p&&m.jsx(tf,{position:{lat:p.latitude,lng:p.longitude},onCloseClick:()=>x(null),children:(0,m.jsxs)("div",{className:"p-2",children:[m.jsx("h4",{className:"font-semibold text-lg",children:p.customerName}),m.jsx("p",{className:"text-sm text-gray-600 mb-2",children:p.customerNumber}),(0,m.jsxs)("div",{className:"space-y-1",children:[(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Address:"})," ",p.address]}),(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"City:"})," ",p.city,", ",p.zip]}),(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Type:"})," ",m.jsx(j.C,{variant:"Commercial"===p.accountType?"default":"secondary",children:p.accountType})]}),(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Territory:"})," ",p.territory]}),(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Service Day:"})," ",p.dayOfWeek]}),m.jsx("div",{className:"mt-2 pt-2 border-t",children:(0,m.jsxs)("p",{className:"text-sm font-semibold text-green-600",children:["Monthly: $",p.monthlyPrice.toFixed(2)]})})]})]})})]}),(0,m.jsxs)("div",{className:"mt-4 flex items-center justify-center gap-4 flex-wrap",children:[m.jsx("span",{className:"text-sm font-medium",children:"Service Days:"}),Object.entries(S.dayStats).map(([e,t])=>(0,m.jsxs)("div",{className:"flex items-center gap-1",children:[m.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-white",style:{backgroundColor:aD(e)}}),(0,m.jsxs)("span",{className:"text-xs",children:[e," (",t,")"]})]},e)),(0,m.jsxs)("div",{className:"flex items-center gap-1",children:[m.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-white",style:{backgroundColor:"#8b5cf6"}}),m.jsx("span",{className:"text-xs",children:"Commercial"})]})]})]}),(0,m.jsxs)(g.Zb,{className:"p-4",children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[m.jsx(ac,{className:"w-5 h-5"}),"Route Details (",C.length," stops)"]}),m.jsx("div",{className:"overflow-x-auto",children:(0,m.jsxs)(sz.iA,{children:[m.jsx(sz.xD,{children:(0,m.jsxs)(sz.SC,{children:[m.jsx(sz.ss,{children:"Customer #"}),m.jsx(sz.ss,{children:"Name"}),m.jsx(sz.ss,{children:"Address"}),m.jsx(sz.ss,{children:"City"}),m.jsx(sz.ss,{children:"ZIP"}),m.jsx(sz.ss,{children:"Type"}),m.jsx(sz.ss,{children:"Territory"}),m.jsx(sz.ss,{children:"Day"}),m.jsx(sz.ss,{className:"text-right",children:"Monthly Price"})]})}),m.jsx(sz.RM,{children:C.map(e=>(0,m.jsxs)(sz.SC,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>L(e),children:[m.jsx(sz.pj,{className:"font-medium",children:e.customerNumber}),m.jsx(sz.pj,{children:e.customerName}),m.jsx(sz.pj,{children:e.address}),m.jsx(sz.pj,{children:e.city}),m.jsx(sz.pj,{children:e.zip}),m.jsx(sz.pj,{children:m.jsx(j.C,{variant:"Commercial"===e.accountType?"default":"secondary",children:e.accountType})}),m.jsx(sz.pj,{children:m.jsx("div",{className:"inline-block px-2 py-1 rounded text-xs text-white",style:{backgroundColor:aR(e.territory)},children:e.territory})}),m.jsx(sz.pj,{children:m.jsx("div",{className:"inline-block px-2 py-1 rounded text-xs text-white",style:{backgroundColor:aD(e.dayOfWeek)},children:e.dayOfWeek})}),(0,m.jsxs)(sz.pj,{className:"text-right font-semibold text-green-600",children:["$",e.monthlyPrice.toFixed(2)]})]},e.customerNumber))})]})})]})]}),!o&&m.jsx(g.Zb,{className:"p-6",children:(0,m.jsxs)("div",{className:"text-center text-gray-500",children:[m.jsx(w,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),m.jsx("p",{children:"Please select a technician to view their routes"})]})})]})}let aZ={dallas:{name:"Dallas",center:{lat:32.7767,lng:-96.797},zoom:10},orlando:{name:"Orlando",center:{lat:28.5383,lng:-81.3792},zoom:10},portCharlotte:{name:"Port Charlotte",center:{lat:26.9762,lng:-82.0909},zoom:11},miami:{name:"Miami",center:{lat:25.7617,lng:-80.1918},zoom:10},jacksonville:{name:"Jacksonville",center:{lat:30.3322,lng:-81.6557},zoom:10}},aF={width:"100%",height:"600px"},aB={disableDefaultUI:!1,zoomControl:!0,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!0,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]};function a$({location:e}){let[t,s]=(0,h.useState)([]),[r,a]=(0,h.useState)(!0),[n,l]=(0,h.useState)(null),[i,o]=(0,h.useState)(null),[c,d]=(0,h.useState)(null),u=aZ[e],p=(0,h.useCallback)(e=>{o(e)},[]),x=t.reduce((e,t)=>e+t.monthlyPrice,0),f=12*x;return r?m.jsx(g.Zb,{className:"p-6",children:(0,m.jsxs)("div",{className:"flex items-center justify-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"}),(0,m.jsxs)("span",{className:"ml-3",children:["Loading ",u.name," commercial accounts..."]})]})}):n?m.jsx(g.Zb,{className:"p-6",children:(0,m.jsxs)("div",{className:"flex items-center text-red-600",children:[m.jsx(sV,{className:"mr-2"}),m.jsx("span",{children:n})]})}):(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,m.jsxs)(g.Zb,{className:"p-4",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[m.jsx(k,{className:"w-4 h-4"}),m.jsx("span",{className:"text-sm",children:"Total Accounts"})]}),m.jsx("div",{className:"text-2xl font-bold",children:t.length})]}),(0,m.jsxs)(g.Zb,{className:"p-4",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[m.jsx(P,{className:"w-4 h-4"}),m.jsx("span",{className:"text-sm",children:"Monthly Revenue"})]}),(0,m.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["$",x.toLocaleString()]})]}),(0,m.jsxs)(g.Zb,{className:"p-4",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[m.jsx(P,{className:"w-4 h-4"}),m.jsx("span",{className:"text-sm",children:"Yearly Revenue"})]}),(0,m.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["$",f.toLocaleString()]})]}),(0,m.jsxs)(g.Zb,{className:"p-4",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[m.jsx(b,{className:"w-4 h-4"}),m.jsx("span",{className:"text-sm",children:"Unique ZIPs"})]}),m.jsx("div",{className:"text-2xl font-bold",children:[...new Set(t.map(e=>e.zip))].length})]})]}),(0,m.jsxs)(g.Zb,{className:"p-4",children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[m.jsx(k,{className:"w-5 h-5"}),"Commercial Accounts Map"]}),(0,m.jsxs)(W,{mapContainerStyle:aF,center:u.center,zoom:u.zoom,options:aB,children:[t.map(e=>m.jsx(eS,{position:{lat:e.latitude,lng:e.longitude},icon:{path:google.maps.SymbolPath.CIRCLE,scale:c===e.customerNumber?12:8,fillColor:"#8b5cf6",fillOpacity:1,strokeColor:"#ffffff",strokeWeight:2},onClick:()=>p(e),onMouseOver:()=>d(e.customerNumber),onMouseOut:()=>d(null)},e.customerNumber)),i&&m.jsx(tf,{position:{lat:i.latitude,lng:i.longitude},onCloseClick:()=>o(null),children:(0,m.jsxs)("div",{className:"p-2",children:[m.jsx("h4",{className:"font-semibold text-lg",children:i.accountName}),m.jsx("p",{className:"text-sm text-gray-600 mb-2",children:i.customerNumber}),(0,m.jsxs)("div",{className:"space-y-1",children:[(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Address:"})," ",i.address]}),(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"City:"})," ",i.city,", ",i.state," ",i.zip]}),(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Territory:"})," ",i.territory]}),(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Technician:"})," ",i.routeTech]}),(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Service Day:"})," ",i.dayOfService]}),(0,m.jsxs)("div",{className:"mt-2 pt-2 border-t",children:[(0,m.jsxs)("p",{className:"text-sm font-semibold text-green-600",children:["Monthly: $",i.monthlyPrice.toLocaleString()]}),(0,m.jsxs)("p",{className:"text-sm text-gray-600",children:["Yearly: $",i.yearlyPrice.toLocaleString()]})]})]})]})})]})]}),(0,m.jsxs)(g.Zb,{className:"p-4",children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[m.jsx(k,{className:"w-5 h-5"}),"All Commercial Accounts (",t.length,")"]}),m.jsx("div",{className:"overflow-x-auto",children:(0,m.jsxs)(sz.iA,{children:[m.jsx(sz.xD,{children:(0,m.jsxs)(sz.SC,{children:[m.jsx(sz.ss,{children:"Customer #"}),m.jsx(sz.ss,{children:"Name"}),m.jsx(sz.ss,{children:"Address"}),m.jsx(sz.ss,{children:"City"}),m.jsx(sz.ss,{children:"ZIP"}),m.jsx(sz.ss,{children:"Territory"}),m.jsx(sz.ss,{children:"Technician"}),m.jsx(sz.ss,{children:"Service Day"}),m.jsx(sz.ss,{className:"text-right",children:"Monthly Price"}),m.jsx(sz.ss,{className:"text-right",children:"Yearly Price"})]})}),m.jsx(sz.RM,{children:t.map(e=>(0,m.jsxs)(sz.SC,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>p(e),children:[m.jsx(sz.pj,{className:"font-medium",children:e.customerNumber}),m.jsx(sz.pj,{children:e.accountName}),m.jsx(sz.pj,{children:e.address}),m.jsx(sz.pj,{children:e.city}),m.jsx(sz.pj,{children:e.zip}),m.jsx(sz.pj,{children:m.jsx(j.C,{variant:"default",className:"bg-violet-500",children:e.territory})}),m.jsx(sz.pj,{children:e.routeTech}),m.jsx(sz.pj,{children:e.dayOfService}),(0,m.jsxs)(sz.pj,{className:"text-right font-semibold text-green-600",children:["$",e.monthlyPrice.toFixed(2)]}),(0,m.jsxs)(sz.pj,{className:"text-right",children:["$",e.yearlyPrice.toFixed(2)]})]},e.customerNumber))})]})}),m.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:(0,m.jsxs)("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"font-semibold",children:"Total Commercial Revenue:"}),(0,m.jsxs)("div",{className:"flex gap-4",children:[(0,m.jsxs)("span",{children:[m.jsx("span",{className:"text-sm text-gray-600",children:"Monthly:"})," ",(0,m.jsxs)("span",{className:"font-bold text-green-600",children:["$",x.toLocaleString()]})]}),(0,m.jsxs)("span",{children:[m.jsx("span",{className:"text-sm text-gray-600",children:"Yearly:"})," ",(0,m.jsxs)("span",{className:"font-bold text-green-600",children:["$",f.toLocaleString()]})]})]})]})})]})]})}function aU({location:e}){let[t,s]=(0,h.useState)([]),[r,a]=(0,h.useState)(!0),[n,l]=(0,h.useState)(null),[i,o]=(0,h.useState)("all"),[c,d]=(0,h.useState)("all"),[u,p]=(0,h.useState)(null),[x,f]=(0,h.useState)(null),v=aZ[e],y=(0,h.useMemo)(()=>[...new Set(t.map(e=>e.routeTech).filter(Boolean))].sort(),[t]),N=(0,h.useMemo)(()=>t.filter(e=>("all"===i||e.routeTech===i)&&("all"===c||e.dayOfService===c)),[t,i,c]),C=(0,h.useCallback)(e=>{p(e)},[]);return r?m.jsx(g.Zb,{className:"p-6",children:(0,m.jsxs)("div",{className:"flex items-center justify-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"}),(0,m.jsxs)("span",{className:"ml-3",children:["Loading ",v.name," routes..."]})]})}):n?m.jsx(g.Zb,{className:"p-6",children:(0,m.jsxs)("div",{className:"flex items-center text-red-600",children:[m.jsx(sV,{className:"mr-2"}),m.jsx("span",{children:n})]})}):(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)(g.Zb,{className:"p-4",children:[(0,m.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,m.jsxs)("div",{className:"flex-1",children:[m.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Select Technician"}),(0,m.jsxs)(sY.Ph,{value:i,onValueChange:o,children:[m.jsx(sY.i4,{children:m.jsx(sY.ki,{placeholder:"Select a technician"})}),(0,m.jsxs)(sY.Bw,{children:[m.jsx(sY.Ql,{value:"all",children:"All Technicians"}),y.map(e=>(0,m.jsxs)(sY.Ql,{value:e,children:[e," (",t.filter(t=>t.routeTech===e).length,")"]},e))]})]})]}),(0,m.jsxs)("div",{className:"flex-1",children:[m.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Filter by Service Day"}),(0,m.jsxs)(sY.Ph,{value:c,onValueChange:d,children:[m.jsx(sY.i4,{children:m.jsx(sY.ki,{})}),(0,m.jsxs)(sY.Bw,{children:[m.jsx(sY.Ql,{value:"all",children:"All Days"}),["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(e=>m.jsx(sY.Ql,{value:e,children:e},e))]})]})]})]}),(0,m.jsxs)("div",{className:"mt-4 flex gap-2 items-center",children:[m.jsx(w,{className:"w-4 h-4 text-gray-600"}),(0,m.jsxs)("span",{className:"text-sm font-medium",children:["Showing ",N.length," of ",t.length," accounts"]})]}),"all"===i&&m.jsx("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-md",children:(0,m.jsxs)("p",{className:"text-sm text-blue-800 flex items-center gap-2",children:[m.jsx(b,{className:"w-4 h-4"}),(0,m.jsxs)("span",{children:[m.jsx("strong",{children:"Tip:"})," Select a specific technician above to view the route map."]})]})})]}),"all"!==i&&(0,m.jsxs)(g.Zb,{className:"p-4",children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[m.jsx(b,{className:"w-5 h-5"}),"Route Map - ",i]}),(0,m.jsxs)(W,{mapContainerStyle:aF,center:v.center,zoom:v.zoom,options:aB,children:[N.map((e,t)=>m.jsx(eS,{position:{lat:e.latitude,lng:e.longitude},label:{text:String(t+1),color:"white",fontSize:"12px",fontWeight:"bold"},icon:{path:google.maps.SymbolPath.CIRCLE,scale:x===e.customerNumber?16:12,fillColor:"#3b82f6",fillOpacity:1,strokeColor:"#ffffff",strokeWeight:2},onClick:()=>C(e),onMouseOver:()=>f(e.customerNumber),onMouseOut:()=>f(null)},e.customerNumber)),u&&m.jsx(tf,{position:{lat:u.latitude,lng:u.longitude},onCloseClick:()=>p(null),children:(0,m.jsxs)("div",{className:"p-2",children:[m.jsx("h4",{className:"font-semibold text-lg",children:u.accountName}),m.jsx("p",{className:"text-sm text-gray-600 mb-2",children:u.customerNumber}),(0,m.jsxs)("div",{className:"space-y-1",children:[(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Address:"})," ",u.address]}),(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"City:"})," ",u.city,", ",u.state]}),(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Service Day:"})," ",u.dayOfService]}),(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Territory:"})," ",u.territory]}),u.monthlyPrice>0&&m.jsx("div",{className:"mt-2 pt-2 border-t",children:(0,m.jsxs)("p",{className:"text-sm font-semibold text-green-600",children:["$",u.monthlyPrice.toFixed(2),"/month"]})})]})]})})]})]}),(0,m.jsxs)(g.Zb,{className:"p-4",children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[m.jsx(ac,{className:"w-5 h-5"}),"Route Assignments (",N.length,")"]}),m.jsx("div",{className:"overflow-x-auto",children:(0,m.jsxs)(sz.iA,{children:[m.jsx(sz.xD,{children:(0,m.jsxs)(sz.SC,{children:[m.jsx(sz.ss,{children:"Customer #"}),m.jsx(sz.ss,{children:"Name"}),m.jsx(sz.ss,{children:"Address"}),m.jsx(sz.ss,{children:"City"}),m.jsx(sz.ss,{children:"ZIP"}),m.jsx(sz.ss,{children:"Technician"}),m.jsx(sz.ss,{children:"Service Day"}),m.jsx(sz.ss,{children:"Territory"}),m.jsx(sz.ss,{className:"text-right",children:"Monthly Price"})]})}),m.jsx(sz.RM,{children:N.map(e=>(0,m.jsxs)(sz.SC,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>C(e),children:[m.jsx(sz.pj,{className:"font-medium",children:e.customerNumber}),m.jsx(sz.pj,{children:e.accountName}),m.jsx(sz.pj,{children:e.address}),m.jsx(sz.pj,{children:e.city}),m.jsx(sz.pj,{children:e.zip}),m.jsx(sz.pj,{children:e.routeTech}),m.jsx(sz.pj,{children:m.jsx(j.C,{variant:"default",children:e.dayOfService})}),m.jsx(sz.pj,{children:e.territory}),m.jsx(sz.pj,{className:"text-right font-semibold text-green-600",children:e.monthlyPrice>0?`$${e.monthlyPrice.toFixed(2)}`:"-"})]},e.customerNumber))})]})})]})]})}let a_={width:"100%",height:"600px"},aW={dallas:{name:"Dallas",center:{lat:32.7767,lng:-96.797},zoom:10},orlando:{name:"Orlando",center:{lat:28.5383,lng:-81.3792},zoom:10},portCharlotte:{name:"Port Charlotte",center:{lat:26.9762,lng:-82.0909},zoom:11},miami:{name:"Miami",center:{lat:25.7617,lng:-80.1918},zoom:10},jacksonville:{name:"Jacksonville",center:{lat:30.3322,lng:-81.6557},zoom:10}},aY={disableDefaultUI:!1,zoomControl:!0,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!0,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]},aV=e=>({"JAX - Maint Ponte Vedra":"#06b6d4","JAX - Maint Jacksonville":"#2563eb","JAX - Maint St. Augustine":"#14b8a6","JAX - Maint St. Johns":"#10b981","JAX - Maint Nocatee":"#84cc16","JAX - Maint Beaches":"#0ea5e9","JAX - Maint Outskirts":"#6366f1","JAX - Comm Maint":"#8b5cf6"})[e]||"#6b7280",aH=e=>0===e?"#f3f4f6":e<1e3?"#fef3c7":e<3e3?"#fde68a":e<5e3?"#fcd34d":e<8e3?"#fbbf24":e<12e3?"#f59e0b":"#d97706",aG=e=>e.totalMonthlyRevenue??e.totalRevenue??0,aJ=e=>e.totalYearlyRevenue??(e.totalRevenue?12*e.totalRevenue:0);function aX({location:e}){let t=aW[e],[s,r]=(0,h.useState)([]),[a,n]=(0,h.useState)({}),[l,i]=(0,h.useState)(!0),[o,c]=(0,h.useState)(null),[d,u]=(0,h.useState)(null),[p,x]=(0,h.useState)(null),[v,y]=(0,h.useState)({}),[N,C]=(0,h.useState)("none"),w=(0,h.useCallback)(e=>{y(t=>({...t,[e]:!t[e]}))},[]),k=(0,h.useMemo)(()=>s.filter(e=>v[e.territory]),[s,v]),S=(0,h.useMemo)(()=>d&&s.find(e=>e.zip===d)||null,[d,s]),L=(0,h.useMemo)(()=>{if(!S||!S.accounts)return[];let e=[...S.accounts];return"asc"===N?e.sort((e,t)=>e.monthlyPrice-t.monthlyPrice):"desc"===N?e.sort((e,t)=>t.monthlyPrice-e.monthlyPrice):e},[S,N]),M=(0,h.useMemo)(()=>{let e={};return k.forEach(t=>{if(e[t.territory]||(e[t.territory]={count:0,avgResidentialPrice:0,residentialCount:0,totalResidentialRevenue:0}),e[t.territory].count+=t.accountCount,t.accounts&&Array.isArray(t.accounts))t.accounts.forEach(s=>{"Residential"===s.accountType&&(e[t.territory].residentialCount+=1,e[t.territory].totalResidentialRevenue+=s.monthlyPrice)});else if(void 0!==t.residentialCount&&void 0!==t.totalMonthlyRevenue){let s=t.totalAccounts?t.residentialCount/t.totalAccounts:1,r=t.totalMonthlyRevenue*s;e[t.territory].residentialCount+=t.residentialCount,e[t.territory].totalResidentialRevenue+=r}}),Object.keys(e).forEach(t=>{e[t].residentialCount>0&&(e[t].avgResidentialPrice=e[t].totalResidentialRevenue/e[t].residentialCount)}),e},[k]),E=(0,h.useCallback)(e=>{u(e),C("none")},[]),T=(0,h.useCallback)(()=>{C(e=>"none"===e?"desc":"desc"===e?"asc":"none")},[]);return l?m.jsx(g.Zb,{className:"p-6",children:(0,m.jsxs)("div",{className:"flex items-center justify-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"}),(0,m.jsxs)("span",{className:"ml-3",children:["Loading ",t.name," revenue data..."]})]})}):o?m.jsx(g.Zb,{className:"p-6",children:(0,m.jsxs)("div",{className:"flex items-center text-red-600",children:[m.jsx(sV,{className:"mr-2"}),m.jsx("span",{children:o})]})}):(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)(g.Zb,{className:"p-4",children:[m.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Territory Filters"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:Object.keys(v).map(e=>{let t=M[e]||{count:0,avgResidentialPrice:0,residentialCount:0,totalResidentialRevenue:0};return(0,m.jsxs)(f.z,{variant:v[e]?"default":"outline",size:"sm",onClick:()=>w(e),style:{backgroundColor:v[e]?aV(e):void 0,borderColor:aV(e),color:v[e]?"#ffffff":aV(e)},className:"flex items-center gap-2",children:[m.jsx("span",{children:e}),(0,m.jsxs)(j.C,{variant:"secondary",className:"ml-1",children:[t.count," accounts"]}),(0,m.jsxs)(j.C,{variant:"secondary",children:["Avg: $",t.avgResidentialPrice.toFixed(2)]})]},e)})})]}),(0,m.jsxs)(g.Zb,{className:"p-4",children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[m.jsx(b,{className:"w-5 h-5"}),"Revenue by ZIP Code"]}),(0,m.jsxs)(W,{mapContainerStyle:a_,center:t.center,zoom:t.zoom,options:aY,children:[k.map(e=>{let t=a[e.zip];return t&&t.coordinates?("MultiPolygon"===t.type?t.coordinates:[t.coordinates]).map((s,r)=>{if(!s||!Array.isArray(s)||0===s.length)return null;let a=(t.type,s[0]);if(!a||!Array.isArray(a)||0===a.length)return null;let n=a.map(e=>({lat:e[1],lng:e[0]})),l=d===e.zip,i=p===e.zip;return m.jsx(tE,{paths:n,options:{fillColor:aH(aG(e)),fillOpacity:l?.8:i?.6:.5,strokeColor:l?"#000000":aV(e.territory),strokeOpacity:.9,strokeWeight:l?3:2,clickable:!0},onClick:()=>E(e.zip),onMouseOver:()=>x(e.zip),onMouseOut:()=>x(null)},`${e.zip}-${r}`)}):null}),S&&m.jsx(tf,{position:{lat:s.find(e=>e.zip===d)?.accounts?.[0]?.latitude||t.center.lat,lng:s.find(e=>e.zip===d)?.accounts?.[0]?.longitude||t.center.lng},onCloseClick:()=>u(null),children:(0,m.jsxs)("div",{className:"p-2",children:[(0,m.jsxs)("h4",{className:"font-semibold text-lg",children:["ZIP ",S.zip]}),m.jsx("p",{className:"text-sm text-gray-600",children:S.city}),(0,m.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Territory:"})," ",S.territory]}),(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Accounts:"})," ",S.accountCount]}),(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Monthly Revenue:"})," $",aG(S).toLocaleString()]}),(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Yearly Revenue:"})," $",aJ(S).toLocaleString()]}),(0,m.jsxs)("p",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:"Avg Price/Account:"})," $",S.accountCount>0?(aG(S)/S.accountCount).toFixed(2):"0.00"]})]})]})})]}),(0,m.jsxs)("div",{className:"mt-4 flex items-center justify-center gap-4 flex-wrap",children:[m.jsx("span",{className:"text-sm font-medium",children:"Monthly Revenue:"}),[{label:"$0",color:"#f3f4f6"},{label:"<$1k",color:"#fef3c7"},{label:"$1k-$3k",color:"#fde68a"},{label:"$3k-$5k",color:"#fcd34d"},{label:"$5k-$8k",color:"#fbbf24"},{label:"$8k-$12k",color:"#f59e0b"},{label:">$12k",color:"#d97706"}].map(e=>(0,m.jsxs)("div",{className:"flex items-center gap-1",children:[m.jsx("div",{className:"w-4 h-4 border border-gray-300 rounded",style:{backgroundColor:e.color}}),m.jsx("span",{className:"text-xs",children:e.label})]},e.label))]})]}),S&&S.accounts&&S.accounts.length>0&&(0,m.jsxs)(g.Zb,{className:"p-4",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[m.jsx(P,{className:"w-5 h-5"}),"Accounts in ZIP ",S.zip," (",L.length,")"]}),(0,m.jsxs)(f.z,{variant:"outline",size:"sm",onClick:T,className:"flex items-center gap-2",children:[m.jsx(sD,{className:"w-4 h-4"}),"Sort by Price","desc"===N&&" (High to Low)","asc"===N&&" (Low to High)","none"===N&&" (Default)"]})]}),m.jsx("div",{className:"overflow-x-auto",children:(0,m.jsxs)(sz.iA,{children:[m.jsx(sz.xD,{children:(0,m.jsxs)(sz.SC,{children:[m.jsx(sz.ss,{children:"Customer #"}),m.jsx(sz.ss,{children:"Name"}),m.jsx(sz.ss,{children:"Address"}),m.jsx(sz.ss,{children:"Type"}),m.jsx(sz.ss,{children:"Territory"}),m.jsx(sz.ss,{className:"text-right",children:"Monthly Price"}),m.jsx(sz.ss,{className:"text-right",children:"Yearly Price"})]})}),m.jsx(sz.RM,{children:L.map(e=>(0,m.jsxs)(sz.SC,{children:[m.jsx(sz.pj,{className:"font-medium",children:e.customerNumber}),m.jsx(sz.pj,{children:e.customerName}),m.jsx(sz.pj,{children:e.address}),m.jsx(sz.pj,{children:m.jsx(j.C,{variant:"Commercial"===e.accountType?"default":"secondary",children:e.accountType})}),m.jsx(sz.pj,{children:m.jsx("div",{className:"inline-block px-2 py-1 rounded text-xs text-white",style:{backgroundColor:aV(e.territory)},children:e.territory})}),(0,m.jsxs)(sz.pj,{className:"text-right font-semibold",children:["$",e.monthlyPrice.toFixed(2)]}),(0,m.jsxs)(sz.pj,{className:"text-right",children:["$",e.yearlyPrice.toFixed(2)]})]},e.customerNumber))})]})}),m.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:(0,m.jsxs)("div",{className:"flex justify-between items-center",children:[(0,m.jsxs)("span",{className:"font-semibold",children:["Total for ZIP ",S.zip,":"]}),(0,m.jsxs)("div",{className:"flex gap-4",children:[(0,m.jsxs)("span",{children:[m.jsx("span",{className:"text-sm text-gray-600",children:"Monthly:"})," ",(0,m.jsxs)("span",{className:"font-bold text-green-600",children:["$",aG(S).toLocaleString()]})]}),(0,m.jsxs)("span",{children:[m.jsx("span",{className:"text-sm text-gray-600",children:"Yearly:"})," ",(0,m.jsxs)("span",{className:"font-bold text-green-600",children:["$",aJ(S).toLocaleString()]})]})]})]})})]})]})}let aq=(0,v.Z)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);function aK({densityMode:e,onDensityModeChange:t,showLifetime:s=!1,accountType:r="residential",onAccountTypeChange:a,showAccountTypeToggle:n=!1}){return m.jsx(g.Zb,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg",children:m.jsx(g.aY,{className:"p-6",children:(0,m.jsxs)("div",{className:"space-y-4",children:[n&&a&&(0,m.jsxs)("div",{className:"pb-4 border-b border-slate-200",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[m.jsx(k,{className:"h-4 w-4 text-slate-600"}),m.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Account Type"})]}),(0,m.jsxs)("div",{className:"flex gap-2",children:[m.jsx(f.z,{variant:"residential"===r?"default":"outline",className:`flex-1 ${"residential"===r?"bg-blue-500 hover:bg-blue-600 text-white":"hover:bg-blue-50"}`,onClick:()=>a("residential"),children:(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx(aq,{className:"h-4 w-4"}),m.jsx("span",{children:"Residential"})]})}),m.jsx(f.z,{variant:"commercial"===r?"default":"outline",className:`flex-1 ${"commercial"===r?"bg-purple-500 hover:bg-purple-600 text-white":"hover:bg-purple-50"}`,onClick:()=>a("commercial"),children:(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx(k,{className:"h-4 w-4"}),m.jsx("span",{children:"Commercial"})]})})]})]}),(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx(r3,{className:"h-4 w-4 text-slate-600"}),m.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Density View Mode"})]}),(0,m.jsxs)("div",{className:"flex flex-wrap gap-3",children:[m.jsx(f.z,{variant:"active"===e?"default":"outline",className:`px-6 py-2 ${"active"===e?"bg-green-500 hover:bg-green-600 text-white":"hover:bg-green-50"}`,onClick:()=>t("active"),children:(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-lg",children:""}),m.jsx("span",{children:"Active Accounts"})]})}),m.jsx(f.z,{variant:"terminated"===e?"default":"outline",className:`px-6 py-2 ${"terminated"===e?"bg-red-500 hover:bg-red-600 text-white":"hover:bg-red-50"}`,onClick:()=>t("terminated"),children:(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-lg",children:""}),m.jsx("span",{children:"Terminated Accounts"})]})}),m.jsx(f.z,{variant:"both"===e?"default":"outline",className:`px-6 py-2 ${"both"===e?"bg-orange-500 hover:bg-orange-600 text-white":"hover:bg-orange-50"}`,onClick:()=>t("both"),children:(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-lg",children:"\uD83D\uDCCA"}),m.jsx("span",{children:"Churn Rate"})]})}),s&&m.jsx(f.z,{variant:"lifetime"===e?"default":"outline",className:`px-6 py-2 ${"lifetime"===e?"bg-blue-500 hover:bg-blue-600 text-white":"hover:bg-blue-50"}`,onClick:()=>t("lifetime"),children:(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-lg",children:""}),m.jsx("span",{children:"Customer Lifetime"})]})})]}),m.jsx("div",{className:"mt-4 p-4 bg-slate-50 rounded-lg",children:(0,m.jsxs)("p",{className:"text-sm text-slate-600",children:["active"===e&&"\uD83D\uDFE2 Darker green = more active accounts","terminated"===e&&"\uD83D\uDD34 Darker red = more terminated accounts","both"===e&&"\uD83D\uDCC8 Green (low churn)  Red (high churn)","lifetime"===e&&"\uD83D\uDFE2 Darker green = longer customer lifetime (months)"]})})]})})})}function aQ({mode:e,location:t="arizona",accountType:s="residential"}){let r={active:[{label:"0-5",color:"#f0fdf4",textColor:"#166534"},{label:"6-15",color:"#86efac",textColor:"#15803d"},{label:"16-30",color:"#22c55e",textColor:"#ffffff"},{label:"31-50",color:"#16a34a",textColor:"#ffffff"},{label:"50+",color:"#15803d",textColor:"#ffffff"}],terminated:[{label:"0-20",color:"#fef2f2",textColor:"#991b1b"},{label:"21-50",color:"#fca5a5",textColor:"#7f1d1d"},{label:"51-100",color:"#f87171",textColor:"#ffffff"},{label:"101-200",color:"#dc2626",textColor:"#ffffff"},{label:"200+",color:"#991b1b",textColor:"#ffffff"}],both:[{label:"0-50%",color:"#f0fdf4",textColor:"#166534"},{label:"51-70%",color:"#fef3c7",textColor:"#854d0e"},{label:"71-85%",color:"#fbbf24",textColor:"#ffffff"},{label:"86-95%",color:"#f97316",textColor:"#ffffff"},{label:"95-100%",color:"#991b1b",textColor:"#ffffff"}],lifetime:[{label:"0-12",color:"#fbbf24",textColor:"#ffffff"},{label:"13-24",color:"#a3e635",textColor:"#ffffff"},{label:"25-36",color:"#86efac",textColor:"#15803d"},{label:"37-60",color:"#22c55e",textColor:"#ffffff"},{label:"61-120",color:"#16a34a",textColor:"#ffffff"},{label:"120+",color:"#15803d",textColor:"#ffffff"}]},a=r;"miami"===t?a="commercial"===s?{active:[{label:"0-2",color:"#f0fdf4",textColor:"#166534"},{label:"3-4",color:"#d1fae5",textColor:"#15803d"},{label:"5-6",color:"#a7f3d0",textColor:"#047857"},{label:"7-9",color:"#6ee7b7",textColor:"#ffffff"},{label:"10-12",color:"#34d399",textColor:"#ffffff"},{label:"13-15",color:"#10b981",textColor:"#ffffff"},{label:"16-18",color:"#059669",textColor:"#ffffff"},{label:"18+",color:"#065f46",textColor:"#ffffff"}],terminated:[{label:"0-3",color:"#fef2f2",textColor:"#991b1b"},{label:"4-6",color:"#fecaca",textColor:"#7f1d1d"},{label:"7-9",color:"#fca5a5",textColor:"#7f1d1d"},{label:"10-12",color:"#f87171",textColor:"#ffffff"},{label:"13-15",color:"#ef4444",textColor:"#ffffff"},{label:"16-18",color:"#dc2626",textColor:"#ffffff"},{label:"19-21",color:"#b91c1c",textColor:"#ffffff"},{label:"21+",color:"#991b1b",textColor:"#ffffff"}],both:[{label:"0-50%",color:"#f0fdf4",textColor:"#166534"},{label:"51-70%",color:"#fef3c7",textColor:"#854d0e"},{label:"71-85%",color:"#fbbf24",textColor:"#ffffff"},{label:"86-95%",color:"#f97316",textColor:"#ffffff"},{label:"95-100%",color:"#991b1b",textColor:"#ffffff"}],lifetime:[{label:"0-12",color:"#fbbf24",textColor:"#ffffff"},{label:"13-24",color:"#a3e635",textColor:"#ffffff"},{label:"25-36",color:"#86efac",textColor:"#15803d"},{label:"37-60",color:"#22c55e",textColor:"#ffffff"},{label:"61-120",color:"#16a34a",textColor:"#ffffff"},{label:"120+",color:"#15803d",textColor:"#ffffff"}]}:{active:[{label:"0-10",color:"#f0fdf4",textColor:"#166534"},{label:"11-20",color:"#d1fae5",textColor:"#15803d"},{label:"21-35",color:"#a7f3d0",textColor:"#047857"},{label:"36-50",color:"#6ee7b7",textColor:"#ffffff"},{label:"51-75",color:"#34d399",textColor:"#ffffff"},{label:"76-100",color:"#10b981",textColor:"#ffffff"},{label:"101-125",color:"#059669",textColor:"#ffffff"},{label:"125+",color:"#065f46",textColor:"#ffffff"}],terminated:[{label:"0-15",color:"#fef2f2",textColor:"#991b1b"},{label:"16-30",color:"#fecaca",textColor:"#7f1d1d"},{label:"31-50",color:"#fca5a5",textColor:"#7f1d1d"},{label:"51-75",color:"#f87171",textColor:"#ffffff"},{label:"76-100",color:"#ef4444",textColor:"#ffffff"},{label:"101-150",color:"#dc2626",textColor:"#ffffff"},{label:"151-200",color:"#b91c1c",textColor:"#ffffff"},{label:"200+",color:"#991b1b",textColor:"#ffffff"}],both:[{label:"0-50%",color:"#f0fdf4",textColor:"#166534"},{label:"51-70%",color:"#fef3c7",textColor:"#854d0e"},{label:"71-85%",color:"#fbbf24",textColor:"#ffffff"},{label:"86-95%",color:"#f97316",textColor:"#ffffff"},{label:"95-100%",color:"#991b1b",textColor:"#ffffff"}],lifetime:[{label:"0-12",color:"#fbbf24",textColor:"#ffffff"},{label:"13-24",color:"#a3e635",textColor:"#ffffff"},{label:"25-36",color:"#86efac",textColor:"#15803d"},{label:"37-60",color:"#22c55e",textColor:"#ffffff"},{label:"61-120",color:"#16a34a",textColor:"#ffffff"},{label:"120+",color:"#15803d",textColor:"#ffffff"}]}:"dallas"===t?a="commercial"===s?{active:[{label:"0",color:"#f0fdf4",textColor:"#166534"},{label:"1",color:"#6ee7b7",textColor:"#ffffff"},{label:"2+",color:"#10b981",textColor:"#ffffff"}],terminated:[{label:"0-2",color:"#fef2f2",textColor:"#991b1b"},{label:"3-4",color:"#fecaca",textColor:"#7f1d1d"},{label:"5-6",color:"#fca5a5",textColor:"#7f1d1d"},{label:"7-8",color:"#f87171",textColor:"#ffffff"},{label:"8+",color:"#ef4444",textColor:"#ffffff"}],both:[{label:"0-50%",color:"#f0fdf4",textColor:"#166534"},{label:"51-70%",color:"#fef3c7",textColor:"#854d0e"},{label:"71-85%",color:"#fbbf24",textColor:"#ffffff"},{label:"86-95%",color:"#f97316",textColor:"#ffffff"},{label:"95-100%",color:"#991b1b",textColor:"#ffffff"}],lifetime:[{label:"0-12",color:"#fbbf24",textColor:"#ffffff"},{label:"13-24",color:"#a3e635",textColor:"#ffffff"},{label:"25-36",color:"#86efac",textColor:"#15803d"},{label:"37-60",color:"#22c55e",textColor:"#ffffff"},{label:"61-120",color:"#16a34a",textColor:"#ffffff"},{label:"120+",color:"#15803d",textColor:"#ffffff"}]}:{active:[{label:"0-5",color:"#f0fdf4",textColor:"#166534"},{label:"6-10",color:"#d1fae5",textColor:"#15803d"},{label:"11-20",color:"#a7f3d0",textColor:"#047857"},{label:"21-30",color:"#6ee7b7",textColor:"#ffffff"},{label:"31-40",color:"#34d399",textColor:"#ffffff"},{label:"41-50",color:"#10b981",textColor:"#ffffff"},{label:"50+",color:"#059669",textColor:"#ffffff"}],terminated:[{label:"0-20",color:"#fef2f2",textColor:"#991b1b"},{label:"21-40",color:"#fecaca",textColor:"#7f1d1d"},{label:"41-60",color:"#fca5a5",textColor:"#7f1d1d"},{label:"61-80",color:"#f87171",textColor:"#ffffff"},{label:"81-100",color:"#ef4444",textColor:"#ffffff"},{label:"101-150",color:"#dc2626",textColor:"#ffffff"},{label:"150+",color:"#b91c1c",textColor:"#ffffff"}],both:[{label:"0-50%",color:"#f0fdf4",textColor:"#166534"},{label:"51-70%",color:"#fef3c7",textColor:"#854d0e"},{label:"71-85%",color:"#fbbf24",textColor:"#ffffff"},{label:"86-95%",color:"#f97316",textColor:"#ffffff"},{label:"95-100%",color:"#991b1b",textColor:"#ffffff"}],lifetime:[{label:"0-12",color:"#fbbf24",textColor:"#ffffff"},{label:"13-24",color:"#a3e635",textColor:"#ffffff"},{label:"25-36",color:"#86efac",textColor:"#15803d"},{label:"37-60",color:"#22c55e",textColor:"#ffffff"},{label:"61-120",color:"#16a34a",textColor:"#ffffff"},{label:"120+",color:"#15803d",textColor:"#ffffff"}]}:"orlando"===t?a="commercial"===s?{active:[{label:"0-2",color:"#f0fdf4",textColor:"#166534"},{label:"3-4",color:"#d1fae5",textColor:"#15803d"},{label:"5-6",color:"#6ee7b7",textColor:"#ffffff"},{label:"7-9",color:"#34d399",textColor:"#ffffff"},{label:"9+",color:"#10b981",textColor:"#ffffff"}],terminated:[{label:"0-5",color:"#fef2f2",textColor:"#991b1b"},{label:"6-10",color:"#fecaca",textColor:"#7f1d1d"},{label:"11-15",color:"#fca5a5",textColor:"#7f1d1d"},{label:"16-20",color:"#f87171",textColor:"#ffffff"},{label:"21-30",color:"#ef4444",textColor:"#ffffff"},{label:"30+",color:"#dc2626",textColor:"#ffffff"}],both:[{label:"0-50%",color:"#f0fdf4",textColor:"#166534"},{label:"51-70%",color:"#fef3c7",textColor:"#854d0e"},{label:"71-85%",color:"#fbbf24",textColor:"#ffffff"},{label:"86-95%",color:"#f97316",textColor:"#ffffff"},{label:"95-100%",color:"#991b1b",textColor:"#ffffff"}],lifetime:[{label:"0-12",color:"#fbbf24",textColor:"#ffffff"},{label:"13-24",color:"#a3e635",textColor:"#ffffff"},{label:"25-36",color:"#86efac",textColor:"#15803d"},{label:"37-60",color:"#22c55e",textColor:"#ffffff"},{label:"61-120",color:"#16a34a",textColor:"#ffffff"},{label:"120+",color:"#15803d",textColor:"#ffffff"}]}:{active:[{label:"0-10",color:"#f0fdf4",textColor:"#166534"},{label:"11-20",color:"#d1fae5",textColor:"#15803d"},{label:"21-35",color:"#a7f3d0",textColor:"#047857"},{label:"36-50",color:"#6ee7b7",textColor:"#ffffff"},{label:"51-70",color:"#34d399",textColor:"#ffffff"},{label:"71-90",color:"#10b981",textColor:"#ffffff"},{label:"90+",color:"#059669",textColor:"#ffffff"}],terminated:[{label:"0-10",color:"#fef2f2",textColor:"#991b1b"},{label:"11-20",color:"#fecaca",textColor:"#7f1d1d"},{label:"21-30",color:"#fca5a5",textColor:"#7f1d1d"},{label:"31-50",color:"#f87171",textColor:"#ffffff"},{label:"51-75",color:"#ef4444",textColor:"#ffffff"},{label:"76-100",color:"#dc2626",textColor:"#ffffff"},{label:"100+",color:"#b91c1c",textColor:"#ffffff"}],both:[{label:"0-50%",color:"#f0fdf4",textColor:"#166534"},{label:"51-70%",color:"#fef3c7",textColor:"#854d0e"},{label:"71-85%",color:"#fbbf24",textColor:"#ffffff"},{label:"86-95%",color:"#f97316",textColor:"#ffffff"},{label:"95-100%",color:"#991b1b",textColor:"#ffffff"}],lifetime:[{label:"0-12",color:"#fbbf24",textColor:"#ffffff"},{label:"13-24",color:"#a3e635",textColor:"#ffffff"},{label:"25-36",color:"#86efac",textColor:"#15803d"},{label:"37-60",color:"#22c55e",textColor:"#ffffff"},{label:"61-120",color:"#16a34a",textColor:"#ffffff"},{label:"120+",color:"#15803d",textColor:"#ffffff"}]}:"jacksonville"===t&&(a="commercial"===s?{active:[{label:"0",color:"#f0fdf4",textColor:"#166534"},{label:"1",color:"#6ee7b7",textColor:"#ffffff"},{label:"2+",color:"#10b981",textColor:"#ffffff"}],terminated:[{label:"0 (No Losses)",color:"#fef2f2",textColor:"#991b1b"}],both:[{label:"0-50%",color:"#f0fdf4",textColor:"#166534"},{label:"51-70%",color:"#fef3c7",textColor:"#854d0e"},{label:"71-85%",color:"#fbbf24",textColor:"#ffffff"},{label:"86-95%",color:"#f97316",textColor:"#ffffff"},{label:"95-100%",color:"#991b1b",textColor:"#ffffff"}],lifetime:[{label:"0-12",color:"#fbbf24",textColor:"#ffffff"},{label:"13-24",color:"#a3e635",textColor:"#ffffff"},{label:"25-36",color:"#86efac",textColor:"#15803d"},{label:"37-60",color:"#22c55e",textColor:"#ffffff"},{label:"61-120",color:"#16a34a",textColor:"#ffffff"},{label:"120+",color:"#15803d",textColor:"#ffffff"}]}:{active:[{label:"0-10",color:"#f0fdf4",textColor:"#166534"},{label:"11-25",color:"#d1fae5",textColor:"#15803d"},{label:"26-40",color:"#a7f3d0",textColor:"#047857"},{label:"41-60",color:"#6ee7b7",textColor:"#ffffff"},{label:"61-80",color:"#34d399",textColor:"#ffffff"},{label:"81-110",color:"#10b981",textColor:"#ffffff"},{label:"110+",color:"#059669",textColor:"#ffffff"}],terminated:[{label:"0-5",color:"#fef2f2",textColor:"#991b1b"},{label:"6-10",color:"#fecaca",textColor:"#7f1d1d"},{label:"11-20",color:"#fca5a5",textColor:"#7f1d1d"},{label:"21-30",color:"#f87171",textColor:"#ffffff"},{label:"31-50",color:"#ef4444",textColor:"#ffffff"},{label:"50+",color:"#dc2626",textColor:"#ffffff"}],both:[{label:"0-50%",color:"#f0fdf4",textColor:"#166534"},{label:"51-70%",color:"#fef3c7",textColor:"#854d0e"},{label:"71-85%",color:"#fbbf24",textColor:"#ffffff"},{label:"86-95%",color:"#f97316",textColor:"#ffffff"},{label:"95-100%",color:"#991b1b",textColor:"#ffffff"}],lifetime:[{label:"0-12",color:"#fbbf24",textColor:"#ffffff"},{label:"13-24",color:"#a3e635",textColor:"#ffffff"},{label:"25-36",color:"#86efac",textColor:"#15803d"},{label:"37-60",color:"#22c55e",textColor:"#ffffff"},{label:"61-120",color:"#16a34a",textColor:"#ffffff"},{label:"120+",color:"#15803d",textColor:"#ffffff"}]});let n="both"===e||"lifetime"===e?r[e]:a[e];return m.jsx(g.Zb,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg",children:(0,m.jsxs)(g.aY,{className:"p-6",children:[m.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-4",children:{active:"Active Accounts Density",terminated:"Terminated Accounts Density",both:"Churn Rate",lifetime:"Average Customer Lifetime"}[e]}),m.jsx("div",{className:"space-y-2",children:n.map((t,s)=>(0,m.jsxs)("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-12 h-8 rounded border border-slate-200 flex items-center justify-center text-xs font-medium",style:{backgroundColor:t.color,color:t.textColor},children:t.label}),(0,m.jsxs)("span",{className:"text-sm text-slate-600",children:["active"===e&&"Active accounts","terminated"===e&&"Terminated accounts","both"===e&&"Churn rate","lifetime"===e&&"Months"]})]},s))})]})})}function a0(){return(0,m.jsxs)(g.Zb,{className:"bg-white/90 backdrop-blur-sm border-0 shadow-lg",children:[(0,m.jsxs)(g.Ol,{className:"pb-3",children:[(0,m.jsxs)(g.ll,{className:"text-lg flex items-center gap-2",children:[m.jsx(L,{className:"h-5 w-5 text-blue-600"}),"Market Size Legend"]}),m.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"Permitted pools per zip code"})]}),(0,m.jsxs)(g.aY,{className:"space-y-2",children:[[{color:"#1a237e",label:"6,000+ pools",range:"Very High"},{color:"#283593",label:"4,000 - 5,999",range:"High"},{color:"#3949ab",label:"3,000 - 3,999",range:"Medium-High"},{color:"#5e35b1",label:"2,000 - 2,999",range:"Medium"},{color:"#7e57c2",label:"1,500 - 1,999",range:"Medium-Low"},{color:"#9575cd",label:"1,000 - 1,499",range:"Low-Medium"},{color:"#b39ddb",label:"500 - 999",range:"Low"},{color:"#d1c4e9",label:"250 - 499",range:"Very Low"},{color:"#e8eaf6",label:"< 250",range:"Minimal"}].map((e,t)=>(0,m.jsxs)("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-8 h-6 rounded border border-slate-300 flex-shrink-0",style:{backgroundColor:e.color,opacity:.7}}),(0,m.jsxs)("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-sm font-medium text-slate-700 leading-tight",children:e.label}),m.jsx("p",{className:"text-xs text-slate-500",children:e.range})]})]},t)),m.jsx("div",{className:"mt-4 pt-3 border-t border-slate-200",children:m.jsx(j.C,{variant:"outline",className:"w-full justify-center text-xs",children:"Click any zip code for details"})})]})]})}let a1=(0,v.Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);function a2({areaFilter:e}){let[t,s]=(0,h.useState)([]),[r,a]=(0,h.useState)(!0);if(r)return m.jsx(g.Zb,{className:"bg-white/90 backdrop-blur-sm border-0 shadow-lg",children:m.jsx(g.aY,{className:"p-6 text-center",children:m.jsx("div",{className:"animate-spin h-6 w-6 border-2 border-blue-500 border-t-transparent rounded-full mx-auto"})})});let n=t.reduce((e,t)=>e+t.totalPermittedPools,0),l=t.reduce((e,t)=>e+t.currentAccounts,0);return(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)(g.Zb,{className:"bg-white/90 backdrop-blur-sm border-0 shadow-lg",children:[m.jsx(g.Ol,{className:"pb-3",children:(0,m.jsxs)(g.ll,{className:"text-lg flex items-center gap-2",children:[m.jsx(T,{className:"h-5 w-5 text-blue-600"}),"Market Overview"]})}),m.jsx(g.aY,{className:"space-y-4",children:(0,m.jsxs)("div",{className:"space-y-2",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-sm text-slate-600",children:"Total Market:"}),m.jsx("span",{className:"text-lg font-bold text-blue-700",children:n.toLocaleString()})]}),(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-sm text-slate-600",children:"Current Accounts:"}),m.jsx("span",{className:"text-lg font-bold text-green-700",children:l.toLocaleString()})]}),(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-sm text-slate-600",children:"Penetration:"}),(0,m.jsxs)("span",{className:"text-lg font-bold text-purple-700",children:[(n>0?l/n*100:0).toFixed(1),"%"]})]})]})})]}),(0,m.jsxs)(g.Zb,{className:"bg-white/90 backdrop-blur-sm border-0 shadow-lg",children:[m.jsx(g.Ol,{className:"pb-3",children:(0,m.jsxs)(g.ll,{className:"text-lg flex items-center gap-2",children:[m.jsx(a1,{className:"h-5 w-5 text-green-600"}),"Area Breakdown"]})}),m.jsx(g.aY,{className:"space-y-3",children:t.map(e=>{let t="West"===e.area?"text-blue-600":"Central"===e.area?"text-green-600":"East"===e.area?"text-orange-600":"text-purple-600";return(0,m.jsxs)("div",{className:"border-b border-slate-100 last:border-0 pb-3 last:pb-0",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("span",{className:`font-semibold ${t}`,children:"Tucson"===e.area?"Tucson":`Phoenix ${e.area}`}),(0,m.jsxs)("span",{className:"text-xs text-slate-500",children:[e.zipCodes," zip codes"]})]}),(0,m.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,m.jsxs)("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-slate-600",children:"Market Size:"}),m.jsx("span",{className:"font-medium",children:e.totalPermittedPools.toLocaleString()})]}),(0,m.jsxs)("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-slate-600",children:"Accounts:"}),m.jsx("span",{className:"font-medium",children:e.currentAccounts.toLocaleString()})]}),(0,m.jsxs)("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-slate-600",children:"Penetration:"}),(0,m.jsxs)("span",{className:"font-semibold text-purple-600",children:[e.penetrationRate.toFixed(1),"%"]})]})]})]},e.area)})})]})]})}let a4=(0,v.Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);function a5(){let e=[{name:"APS of Glendale",color:"#3B82F6",description:"Western Phoenix metropolitan area",accounts:483},{name:"APS of Scottsdale",color:"#10B981",description:"Central Phoenix metropolitan core",accounts:598},{name:"APS of Chandler",color:"#F59E0B",description:"Eastern Phoenix + San Tan Valley area",accounts:554},{name:"APS of Tucson",color:"#A855F7",description:"Tucson metropolitan area",accounts:64}],t=e.reduce((e,t)=>e+t.accounts,0);return(0,m.jsxs)(g.Zb,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg",children:[m.jsx(g.Ol,{className:"pb-3",children:(0,m.jsxs)(g.ll,{className:"flex items-center gap-2 text-slate-900",children:[m.jsx(b,{className:"h-5 w-5"}),"Territory Legend"]})}),(0,m.jsxs)(g.aY,{className:"pt-0",children:[m.jsx("div",{className:"space-y-4",children:e.map(e=>(0,m.jsxs)("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"w-4 h-4 rounded-full mt-0.5 flex-shrink-0",style:{backgroundColor:e.color}}),(0,m.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-1",children:[m.jsx("h4",{className:"font-medium text-slate-900 text-sm",children:e.name}),(0,m.jsxs)("span",{className:"text-xs font-medium text-slate-600",children:[(e.accounts/t*100).toFixed(1),"%"]})]}),m.jsx("p",{className:"text-xs text-slate-600 leading-relaxed",children:e.description})]})]},e.name))}),m.jsx("div",{className:"mt-6 pt-4 border-t border-slate-200",children:(0,m.jsxs)("div",{className:"flex items-start gap-2",children:[m.jsx(a4,{className:"h-4 w-4 text-blue-500 mt-0.5 flex-shrink-0"}),m.jsx("p",{className:"text-xs text-slate-600 leading-relaxed",children:"Click on map markers to view detailed zip code information and account counts."})]})})]})]})}var a6="Progress",[a3,a8]=(0,s8.b)(a6),[a7,a9]=a3(a6),ne=h.forwardRef((e,t)=>{var s,r;let{__scopeProgress:a,value:n=null,max:l,getValueLabel:i=nr,...o}=e;(l||0===l)&&!nl(l)&&console.error((s=`${l}`,`Invalid prop \`max\` of value \`${s}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let c=nl(l)?l:100;null===n||ni(n,c)||console.error((r=`${n}`,`Invalid prop \`value\` of value \`${r}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let d=ni(n,c)?n:null,h=nn(d)?i(d,c):void 0;return(0,m.jsx)(a7,{scope:a,value:d,max:c,children:(0,m.jsx)(rn.WV.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":nn(d)?d:void 0,"aria-valuetext":h,role:"progressbar","data-state":na(d,c),"data-value":d??void 0,"data-max":c,...o,ref:t})})});ne.displayName=a6;var nt="ProgressIndicator",ns=h.forwardRef((e,t)=>{let{__scopeProgress:s,...r}=e,a=a9(nt,s);return(0,m.jsx)(rn.WV.div,{"data-state":na(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...r,ref:t})});function nr(e,t){return`${Math.round(e/t*100)}%`}function na(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function nn(e){return"number"==typeof e}function nl(e){return nn(e)&&!isNaN(e)&&e>0}function ni(e,t){return nn(e)&&!isNaN(e)&&e<=t&&e>=0}ns.displayName=nt;let no=h.forwardRef(({className:e,value:t,...s},r)=>m.jsx(ne,{ref:r,className:(0,sN.cn)("relative h-2 w-full overflow-hidden rounded-full bg-slate-100",e),...s,children:m.jsx(ns,{className:"h-full w-full flex-1 bg-slate-900 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));function nc({areaStats:e}){let t=Object.values(e).reduce((e,t)=>e+(t?.totalAccounts||0),0),s=Object.values(e).reduce((e,t)=>e+(t?.zipCodes||0),0),r=[{name:"APS of Glendale",color:"#3B82F6",accounts:e?.West?.totalAccounts||0,zipCodes:e?.West?.zipCodes||0},{name:"APS of Scottsdale",color:"#10B981",accounts:e?.Central?.totalAccounts||0,zipCodes:e?.Central?.zipCodes||0},{name:"APS of Chandler",color:"#F59E0B",accounts:e?.East?.totalAccounts||0,zipCodes:e?.East?.zipCodes||0},{name:"APS of Tucson",color:"#A855F7",accounts:e?.Tucson?.totalAccounts||0,zipCodes:e?.Tucson?.zipCodes||0}];return(0,m.jsxs)(g.Zb,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg",children:[m.jsx(g.Ol,{className:"pb-3",children:(0,m.jsxs)(g.ll,{className:"flex items-center gap-2 text-slate-900",children:[m.jsx(T,{className:"h-5 w-5"}),"Territory Statistics"]})}),(0,m.jsxs)(g.aY,{className:"pt-0",children:[m.jsx("div",{className:"space-y-6",children:r.map(e=>{let s=t>0?e.accounts/t*100:0,r=e.zipCodes>0?Math.round(e.accounts/e.zipCodes):0;return(0,m.jsxs)("div",{className:"space-y-3",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),m.jsx("span",{className:"font-medium text-slate-900 text-sm",children:e.name})]}),(0,m.jsxs)("span",{className:"text-xs text-slate-600",children:[s.toFixed(1),"%"]})]}),m.jsx(no,{value:s,className:"h-2",style:{"--progress-background":e.color}}),(0,m.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[(0,m.jsxs)("div",{children:[m.jsx("p",{className:"text-slate-600",children:"Accounts"}),m.jsx("p",{className:"font-semibold text-slate-900",children:e.accounts.toLocaleString()})]}),(0,m.jsxs)("div",{children:[m.jsx("p",{className:"text-slate-600",children:"Zip Codes"}),m.jsx("p",{className:"font-semibold text-slate-900",children:e.zipCodes})]})]}),(0,m.jsxs)("div",{className:"flex items-center gap-1 text-xs",children:[m.jsx(L,{className:"h-3 w-3 text-green-500"}),(0,m.jsxs)("span",{className:"text-slate-600",children:[r," avg accounts per zip"]})]})]},e.name)})}),m.jsx("div",{className:"mt-6 pt-4 border-t border-slate-200",children:(0,m.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-center",children:[(0,m.jsxs)("div",{children:[m.jsx("p",{className:"text-2xl font-bold text-slate-900",children:t.toLocaleString()}),m.jsx("p",{className:"text-xs text-slate-600",children:"Total Accounts"})]}),(0,m.jsxs)("div",{children:[m.jsx("p",{className:"text-2xl font-bold text-slate-900",children:s}),m.jsx("p",{className:"text-xs text-slate-600",children:"Total Zip Codes"})]})]})})]})]})}function nd({message:e="Loading...",className:t}){return m.jsx("div",{className:(0,sN.cn)("flex items-center justify-center h-96",t),children:(0,m.jsxs)("div",{className:"text-center",children:[m.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"}),m.jsx("p",{className:"text-slate-600",children:e})]})})}function nm({title:e,description:t,icon:s,iconClassName:r,action:a,className:n}){return m.jsx(g.Zb,{className:(0,sN.cn)("max-w-md mx-auto",n),children:(0,m.jsxs)(g.aY,{className:"p-6 text-center",children:[s?m.jsx(s,{className:(0,sN.cn)("h-12 w-12 text-slate-500 mx-auto mb-4",r)}):null,m.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:e}),t?m.jsx("p",{className:"text-slate-600 mb-4",children:t}):null,a]})})}no.displayName=ne.displayName;let nh={North:{emoji:"\uD83D\uDFE6",color:"#3B82F6"},Central:{emoji:"\uD83D\uDFE9",color:"#10B981"},South:{emoji:"\uD83D\uDFE7",color:"#F59E0B"}};function nu({areaFilter:e,onToggle:t,onReset:s,variant:r="compact",data:a=[],className:n}){let l=Object.keys(e),i=l.map(e=>{let t=a.filter(t=>t.territory===e),s=t.reduce((e,t)=>e+(t.accountCount||0),0);return{territory:e,zipCount:t.length,accountCount:s}});return"detailed"===r?m.jsx(g.Zb,{className:(0,sN.cn)("bg-white/80 backdrop-blur-sm border-0 shadow-lg",n),children:m.jsx(g.aY,{className:"p-6",children:(0,m.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[(0,m.jsxs)("div",{className:"flex-1",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[m.jsx(O,{className:"h-4 w-4 text-slate-600"}),m.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Territory Filters"})]}),m.jsx("div",{className:"flex flex-wrap gap-3",children:i.map(({territory:s,zipCount:r,accountCount:a})=>{let n=e[s],l=nh[s].color;return(0,m.jsxs)("button",{className:(0,sN.cn)("cursor-pointer px-4 py-3 rounded-md border transition-all hover:shadow-md flex flex-col items-start",n?"text-white border-transparent":"bg-white hover:bg-slate-100 text-slate-700 border-slate-300"),style:{backgroundColor:n?l:void 0,borderColor:n?l:void 0},onClick:()=>t(s),children:[(0,m.jsxs)("div",{className:"flex items-center gap-2 font-medium",children:[nh[s].emoji,"APS Miami - ",s,(0,m.jsxs)("span",{className:"text-xs",children:["(",r,")"]})]}),(0,m.jsxs)("div",{className:(0,sN.cn)("text-[10px] italic mt-0.5",n?"text-white/80":"text-slate-500"),children:[a," accounts"]})]},s)})})]}),m.jsx("div",{className:"lg:w-auto",children:m.jsx(f.z,{onClick:s,variant:"outline",className:"w-full lg:w-auto",children:"Reset Filters"})})]})})}):m.jsx(g.Zb,{className:(0,sN.cn)("bg-white/80 backdrop-blur-sm border-0 shadow-lg",n),children:m.jsx(g.aY,{className:"p-4",children:(0,m.jsxs)("div",{className:"flex items-center gap-4",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx(O,{className:"h-4 w-4 text-slate-600"}),m.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Territory Filters"})]}),m.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(s=>(0,m.jsxs)(j.C,{variant:e[s]?"default":"outline",className:(0,sN.cn)("cursor-pointer px-4 py-2 transition-all hover:shadow-md","North"===s&&e[s]?"bg-blue-500 hover:bg-blue-600":"","Central"===s&&e[s]?"bg-green-500 hover:bg-green-600":"","South"===s&&e[s]?"bg-amber-500 hover:bg-amber-600":"",e[s]?"":"hover:bg-slate-100"),onClick:()=>t(s),children:["APS Miami - ",s]},s))}),m.jsx(f.z,{variant:"ghost",size:"sm",onClick:s,className:"text-xs",children:"Reset"})]})})})}let np=(0,h.createContext)(null);function nx({value:e,children:t}){return m.jsx(np.Provider,{value:e,children:t})}function ng({location:e,onLocationChange:t}){let{data:s}=(0,u.useSession)(),r=s?.user?.role,[a,n]=(0,h.useState)("territory"),[l,i]=(0,h.useState)("active"),[o,c]=(0,h.useState)("residential"),[d,p]=(0,h.useState)([]),[x,v]=(0,h.useState)([]),[z,A]=(0,h.useState)({West:!0,Central:!0,East:!0,Tucson:!0,Commercial:!0}),[R,D]=(0,h.useState)({North:!0,Central:!0,South:!0}),[I,Z]=(0,h.useState)(null),[F,B]=(0,h.useState)([]),[$,U]=(0,h.useState)(!0),[_,W]=(0,h.useState)(null),Y=async()=>{try{U(!0),console.log("\uD83D\uDCCA Starting to load territory data...");let e=await fetch("/phoenix-tucson-map-data.json");if(console.log("\uD83D\uDCCA Fetch response received:",e?.status,e?.ok),!e?.ok)throw Error("Failed to load territory data");let t=await e.json();console.log("\uD83D\uDCCA Data loaded successfully:",t?.length,"records"),p(t||[]),console.log("\uD83D\uDCCA State updated with data")}catch(e){console.error(" Error loading territory data:",e),W("Failed to load territory data")}finally{U(!1),console.log("\uD83D\uDCCA Loading complete")}},V=e=>{A(t=>({...t,[e]:!t?.[e]}))},H=()=>{A({West:!0,Central:!0,East:!0,Tucson:!0,Commercial:!0})},G=e=>{D(t=>({...t,[e]:!t[e]}))},J=()=>{D({North:!0,Central:!0,South:!0})},X=(0,h.useCallback)(e=>{"all"===e?A({West:!0,Central:!0,East:!0,Tucson:!0,Commercial:!0}):A({West:!1,Central:!1,East:!1,Tucson:!1,Commercial:!1,[e]:!0})},[]);if($)return m.jsx(nd,{message:"Loading territory data..."});if(_)return m.jsx(nm,{title:"Error Loading Data",description:_,icon:b,iconClassName:"text-red-500",action:m.jsx(f.z,{onClick:Y,className:"w-full",children:"Try Again"})});let q=I?Object.values(I).reduce((e,t)=>e+(t?.totalAccounts||0),0):0,K=x?.length||0;return m.jsx(nx,{value:{areaFilter:z,setAreaFilter:A,densityMode:l,setDensityMode:i,accountType:o,setAccountType:c},children:m.jsx(sv,{children:(0,m.jsxs)("div",{className:"space-y-6",children:[m.jsx(g.Zb,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg",children:m.jsx(g.aY,{className:"p-6",children:(0,m.jsxs)("div",{className:"flex items-center justify-center gap-3 flex-wrap",children:["arizona"===e&&(0,m.jsxs)(f.z,{onClick:()=>n("territory"),variant:"territory"===a?"default":"outline",className:`px-5 py-5 text-sm ${"territory"===a?"bg-blue-600 hover:bg-blue-700 text-white shadow-lg":"hover:bg-blue-50"}`,children:[m.jsx(y,{className:"mr-2 h-4 w-4"}),"Residential Account Territory Assignments"]}),"miami"===e&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(f.z,{onClick:()=>n("kmlScenario"),variant:"kmlScenario"===a?"default":"outline",className:`px-5 py-5 text-sm ${"kmlScenario"===a?"bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg":"hover:bg-indigo-50"}`,children:[m.jsx(b,{className:"mr-2 h-4 w-4"}),"Miami Breakup Scenario I - Fixed Boundaries"]}),(0,m.jsxs)(f.z,{onClick:()=>n("territory"),variant:"territory"===a?"default":"outline",className:`px-5 py-5 text-sm ${"territory"===a?"bg-blue-600 hover:bg-blue-700 text-white shadow-lg":"hover:bg-blue-50"}`,children:[m.jsx(y,{className:"mr-2 h-4 w-4"}),"Miami Breakup Scenario II - Zip Codes"]}),(0,m.jsxs)(f.z,{onClick:()=>n("assignmentTool"),variant:"assignmentTool"===a?"default":"outline",className:`px-5 py-5 text-sm ${"assignmentTool"===a?"bg-pink-600 hover:bg-pink-700 text-white shadow-lg":"hover:bg-pink-50"}`,children:[m.jsx(b,{className:"mr-2 h-4 w-4"}),"Zip Code Assignment Tool"]}),(0,m.jsxs)(f.z,{onClick:()=>n("miamiFinal"),variant:"miamiFinal"===a?"default":"outline",className:`px-5 py-5 text-sm font-bold ${"miamiFinal"===a?"bg-emerald-600 hover:bg-emerald-700 text-white shadow-lg":"hover:bg-emerald-50 border-emerald-300 text-emerald-700"}`,children:[m.jsx(N,{className:"mr-2 h-4 w-4"}),"FINAL MIAMI TERRITORY MAP"]}),(0,m.jsxs)(f.z,{onClick:()=>n("miami10pct"),variant:"miami10pct"===a?"default":"outline",className:`px-5 py-5 text-sm font-bold ${"miami10pct"===a?"bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg":"hover:bg-indigo-50 border-indigo-300 text-indigo-700"}`,children:[m.jsx(C,{className:"mr-2 h-4 w-4"}),"10% REASSIGNMENT"]}),(0,m.jsxs)(f.z,{onClick:()=>n("miamiZipOptimized"),variant:"miamiZipOptimized"===a?"default":"outline",className:`px-5 py-5 text-sm font-bold ${"miamiZipOptimized"===a?"bg-teal-600 hover:bg-teal-700 text-white shadow-lg":"hover:bg-teal-50 border-teal-300 text-teal-700"}`,children:[m.jsx(b,{className:"mr-2 h-4 w-4"}),"ZIP-OPTIMIZED"]}),(0,m.jsxs)(f.z,{onClick:()=>n("miamiZipOptimized2"),variant:"miamiZipOptimized2"===a?"default":"outline",className:`px-5 py-5 text-sm font-bold ${"miamiZipOptimized2"===a?"bg-cyan-600 hover:bg-cyan-700 text-white shadow-lg":"hover:bg-cyan-50 border-cyan-300 text-cyan-700"}`,children:[m.jsx(b,{className:"mr-2 h-4 w-4"}),"ZIP-OPTIMIZED #2"]}),(0,m.jsxs)(f.z,{onClick:()=>n("radicalReroute"),variant:"radicalReroute"===a?"default":"outline",className:`px-5 py-5 text-sm font-bold ${"radicalReroute"===a?"bg-purple-600 hover:bg-purple-700 text-white shadow-lg":"hover:bg-purple-50 border-purple-300 text-purple-700"}`,children:[m.jsx(w,{className:"mr-2 h-4 w-4"}),"RADICAL REROUTE"]}),(0,m.jsxs)(f.z,{onClick:()=>n("miamiCommercialRoutes"),variant:"miamiCommercialRoutes"===a?"default":"outline",className:`px-5 py-5 text-sm font-bold ${"miamiCommercialRoutes"===a?"bg-emerald-600 hover:bg-emerald-700 text-white shadow-lg":"hover:bg-emerald-50 border-emerald-300 text-emerald-700"}`,children:[m.jsx(k,{className:"mr-2 h-4 w-4"}),"COMMERCIAL ROUTES"]}),(0,m.jsxs)(f.z,{onClick:()=>n("miamiFutureCommercialRoutes"),variant:"miamiFutureCommercialRoutes"===a?"default":"outline",className:`px-5 py-5 text-sm font-bold ${"miamiFutureCommercialRoutes"===a?"bg-amber-600 hover:bg-amber-700 text-white shadow-lg":"hover:bg-amber-50 border-amber-300 text-amber-700"}`,children:[m.jsx(k,{className:"mr-2 h-4 w-4"}),"FUTURE COMMERCIAL"]})]}),(0,m.jsxs)(f.z,{onClick:()=>n("density"),variant:"density"===a?"default":"outline",className:`px-5 py-5 text-sm ${"density"===a?"bg-purple-600 hover:bg-purple-700 text-white shadow-lg":"hover:bg-purple-50"}`,children:[m.jsx(S,{className:"mr-2 h-4 w-4"}),"Density Analysis"]}),"arizona"===e&&(0,m.jsxs)(f.z,{onClick:()=>n("market"),variant:"market"===a?"default":"outline",className:`px-5 py-5 text-sm ${"market"===a?"bg-green-600 hover:bg-green-700 text-white shadow-lg":"hover:bg-green-50"}`,children:[m.jsx(L,{className:"mr-2 h-4 w-4"}),"Market Size"]}),"arizona"===e&&(0,m.jsxs)(f.z,{onClick:()=>n("revenue"),variant:"revenue"===a?"default":"outline",className:`px-5 py-5 text-sm ${"revenue"===a?"bg-emerald-600 hover:bg-emerald-700 text-white shadow-lg":"hover:bg-emerald-50"}`,children:[m.jsx(P,{className:"mr-2 h-4 w-4"}),"Revenue Analysis"]}),"arizona"===e&&("LEVEL2"===r||"ADMIN"===r)&&(0,m.jsxs)(f.z,{onClick:()=>n("employees"),variant:"employees"===a?"default":"outline",className:`px-5 py-5 text-sm ${"employees"===a?"bg-orange-600 hover:bg-orange-700 text-white shadow-lg":"hover:bg-orange-50"}`,children:[m.jsx(w,{className:"mr-2 h-4 w-4"}),"Employee Locations"]}),"arizona"===e&&(0,m.jsxs)(f.z,{onClick:()=>n("commercial"),variant:"commercial"===a?"default":"outline",className:`px-5 py-5 text-sm ${"commercial"===a?"bg-amber-600 hover:bg-amber-700 text-white shadow-lg":"hover:bg-amber-50"}`,children:[m.jsx(k,{className:"mr-2 h-4 w-4"}),"Commercial Accounts"]}),"arizona"===e&&(0,m.jsxs)(f.z,{onClick:()=>n("routes"),variant:"routes"===a?"default":"outline",className:`px-5 py-5 text-sm ${"routes"===a?"bg-rose-600 hover:bg-rose-700 text-white shadow-lg":"hover:bg-rose-50"}`,children:[m.jsx(M,{className:"mr-2 h-4 w-4"}),"Routes by Tech"]}),"arizona"===e&&(0,m.jsxs)(f.z,{onClick:()=>n("ancillarySales"),variant:"ancillarySales"===a?"default":"outline",className:`px-5 py-5 text-sm ${"ancillarySales"===a?"bg-amber-600 hover:bg-amber-700 text-white shadow-lg":"hover:bg-amber-50"}`,children:[m.jsx(P,{className:"mr-2 h-4 w-4"}),"Ancillary Sales"]}),"jacksonville"===e&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(f.z,{onClick:()=>n("jaxRevenue"),variant:"jaxRevenue"===a?"default":"outline",className:`px-5 py-5 text-sm ${"jaxRevenue"===a?"bg-teal-600 hover:bg-teal-700 text-white shadow-lg":"hover:bg-teal-50"}`,children:[m.jsx(P,{className:"mr-2 h-4 w-4"}),"Revenue Analysis"]}),(0,m.jsxs)(f.z,{onClick:()=>n("jaxCommercial"),variant:"jaxCommercial"===a?"default":"outline",className:`px-5 py-5 text-sm ${"jaxCommercial"===a?"bg-violet-600 hover:bg-violet-700 text-white shadow-lg":"hover:bg-violet-50"}`,children:[m.jsx(k,{className:"mr-2 h-4 w-4"}),"Commercial Accounts"]}),(0,m.jsxs)(f.z,{onClick:()=>n("jaxRoutes"),variant:"jaxRoutes"===a?"default":"outline",className:`px-5 py-5 text-sm ${"jaxRoutes"===a?"bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg":"hover:bg-indigo-50"}`,children:[m.jsx(M,{className:"mr-2 h-4 w-4"}),"Routes by Tech"]})]}),"dallas"===e&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(f.z,{onClick:()=>n("locRevenue"),variant:"locRevenue"===a?"default":"outline",className:`px-5 py-5 text-sm ${"locRevenue"===a?"bg-teal-600 hover:bg-teal-700 text-white shadow-lg":"hover:bg-teal-50"}`,children:[m.jsx(P,{className:"mr-2 h-4 w-4"}),"Revenue Analysis"]}),(0,m.jsxs)(f.z,{onClick:()=>n("locCommercial"),variant:"locCommercial"===a?"default":"outline",className:`px-5 py-5 text-sm ${"locCommercial"===a?"bg-violet-600 hover:bg-violet-700 text-white shadow-lg":"hover:bg-violet-50"}`,children:[m.jsx(k,{className:"mr-2 h-4 w-4"}),"Commercial Accounts"]}),(0,m.jsxs)(f.z,{onClick:()=>n("locRoutes"),variant:"locRoutes"===a?"default":"outline",className:`px-5 py-5 text-sm ${"locRoutes"===a?"bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg":"hover:bg-indigo-50"}`,children:[m.jsx(M,{className:"mr-2 h-4 w-4"}),"Routes by Tech"]})]}),"orlando"===e&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(f.z,{onClick:()=>n("locRevenue"),variant:"locRevenue"===a?"default":"outline",className:`px-5 py-5 text-sm ${"locRevenue"===a?"bg-teal-600 hover:bg-teal-700 text-white shadow-lg":"hover:bg-teal-50"}`,children:[m.jsx(P,{className:"mr-2 h-4 w-4"}),"Revenue Analysis"]}),(0,m.jsxs)(f.z,{onClick:()=>n("locRoutes"),variant:"locRoutes"===a?"default":"outline",className:`px-5 py-5 text-sm ${"locRoutes"===a?"bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg":"hover:bg-indigo-50"}`,children:[m.jsx(M,{className:"mr-2 h-4 w-4"}),"Routes by Tech"]})]}),"portCharlotte"===e&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(f.z,{onClick:()=>n("locRevenue"),variant:"locRevenue"===a?"default":"outline",className:`px-5 py-5 text-sm ${"locRevenue"===a?"bg-teal-600 hover:bg-teal-700 text-white shadow-lg":"hover:bg-teal-50"}`,children:[m.jsx(P,{className:"mr-2 h-4 w-4"}),"Revenue Analysis"]}),(0,m.jsxs)(f.z,{onClick:()=>n("locRoutes"),variant:"locRoutes"===a?"default":"outline",className:`px-5 py-5 text-sm ${"locRoutes"===a?"bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg":"hover:bg-indigo-50"}`,children:[m.jsx(M,{className:"mr-2 h-4 w-4"}),"Routes by Tech"]})]}),"miami"===e&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(f.z,{onClick:()=>n("locRevenue"),variant:"locRevenue"===a?"default":"outline",className:`px-5 py-5 text-sm ${"locRevenue"===a?"bg-teal-600 hover:bg-teal-700 text-white shadow-lg":"hover:bg-teal-50"}`,children:[m.jsx(P,{className:"mr-2 h-4 w-4"}),"Revenue Analysis"]}),(0,m.jsxs)(f.z,{onClick:()=>n("locCommercial"),variant:"locCommercial"===a?"default":"outline",className:`px-5 py-5 text-sm ${"locCommercial"===a?"bg-violet-600 hover:bg-violet-700 text-white shadow-lg":"hover:bg-violet-50"}`,children:[m.jsx(k,{className:"mr-2 h-4 w-4"}),"Commercial Accounts"]}),(0,m.jsxs)(f.z,{onClick:()=>n("locRoutes"),variant:"locRoutes"===a?"default":"outline",className:`px-5 py-5 text-sm ${"locRoutes"===a?"bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg":"hover:bg-indigo-50"}`,children:[m.jsx(M,{className:"mr-2 h-4 w-4"}),"Routes by Tech"]})]}),"arizona"===e&&(0,m.jsxs)(f.z,{onClick:()=>n("lookup"),variant:"lookup"===a?"default":"outline",className:`px-5 py-5 text-sm ${"lookup"===a?"bg-cyan-600 hover:bg-cyan-700 text-white shadow-lg":"hover:bg-cyan-50"}`,children:[m.jsx(E,{className:"mr-2 h-4 w-4"}),"Customer Lookup"]})]})})}),"territory"===a?m.jsx(m.Fragment,{children:"miami"===e?(0,m.jsxs)(m.Fragment,{children:[m.jsx(g.Zb,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg",children:m.jsx(g.aY,{className:"p-6",children:(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[m.jsx(k,{className:"h-5 w-5 text-blue-600 mr-2"}),m.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Total Territories"})]}),m.jsx("p",{className:"text-3xl font-bold text-slate-900",children:"3"}),m.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"North, Central, South"})]}),(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[m.jsx(b,{className:"h-5 w-5 text-green-600 mr-2"}),m.jsx("span",{className:"text-sm font-medium text-slate-600",children:"ZIP Codes"})]}),m.jsx("p",{className:"text-3xl font-bold text-slate-900",children:F.length}),m.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Across Miami-Dade County"})]}),(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[m.jsx(w,{className:"h-5 w-5 text-orange-600 mr-2"}),m.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Total Accounts"})]}),m.jsx("p",{className:"text-3xl font-bold text-slate-900",children:F.reduce((e,t)=>e+(t.accountCount||0),0)}),m.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Residential customers"})]}),(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[m.jsx(T,{className:"h-5 w-5 text-purple-600 mr-2"}),m.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Avg per ZIP"})]}),m.jsx("p",{className:"text-3xl font-bold text-slate-900",children:F.length>0?Math.round(F.reduce((e,t)=>e+(t.accountCount||0),0)/F.length):0}),m.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Account density"})]})]})})}),m.jsx(nu,{variant:"detailed",areaFilter:R,data:F,onToggle:G,onReset:J}),m.jsx(rP,{areaFilter:R})]}):(0,m.jsxs)(m.Fragment,{children:[m.jsx(g.Zb,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg",children:m.jsx(g.aY,{className:"p-6",children:(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[m.jsx(k,{className:"h-5 w-5 text-blue-600 mr-2"}),m.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Total Areas"})]}),m.jsx("p",{className:"text-3xl font-bold text-slate-900",children:"4"})]}),(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[m.jsx(b,{className:"h-5 w-5 text-green-600 mr-2"}),m.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Zip Codes"})]}),m.jsx("p",{className:"text-3xl font-bold text-slate-900",children:K})]}),(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[m.jsx(w,{className:"h-5 w-5 text-orange-600 mr-2"}),m.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Total Accounts"})]}),m.jsx("p",{className:"text-3xl font-bold text-slate-900",children:q})]}),(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[m.jsx(T,{className:"h-5 w-5 text-purple-600 mr-2"}),m.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Avg per Zip"})]}),m.jsx("p",{className:"text-3xl font-bold text-slate-900",children:K>0?Math.round(q/K):0})]})]})})}),m.jsx(g.Zb,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg",children:m.jsx(g.aY,{className:"p-6",children:(0,m.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[(0,m.jsxs)("div",{className:"flex-1",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[m.jsx(O,{className:"h-4 w-4 text-slate-600"}),m.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Territory Filters"})]}),m.jsx("div",{className:"flex flex-wrap gap-3",children:Object.entries(z).filter(([e])=>"Commercial"!==e).map(([e,t])=>(0,m.jsxs)("button",{className:`cursor-pointer px-4 py-3 rounded-md border transition-all hover:shadow-md flex flex-col items-start ${"West"===e&&t?"bg-blue-500 hover:bg-blue-600 text-white border-blue-600":"Central"===e&&t?"bg-green-500 hover:bg-green-600 text-white border-green-600":"East"===e&&t?"bg-orange-500 hover:bg-orange-600 text-white border-orange-600":"Tucson"===e&&t?"bg-purple-500 hover:bg-purple-600 text-white border-purple-600":"bg-white hover:bg-slate-100 text-slate-700 border-slate-300"}`,onClick:()=>V(e),children:[(0,m.jsxs)("div",{className:"flex items-center gap-2 font-medium",children:["West"===e&&"\uD83D\uDFE6","Central"===e&&"\uD83D\uDFE9","East"===e&&"\uD83D\uDFE7","Tucson"===e&&"\uD83D\uDFEA","West"===e&&"APS-Glendale","Central"===e&&"APS-Scottsdale","East"===e&&"APS-Chandler","Tucson"===e&&"APS-Tucson",(0,m.jsxs)("span",{className:"text-xs",children:["(",I?.[e]?.zipCodes||0,")"]})]}),(0,m.jsxs)("div",{className:`text-[10px] italic mt-0.5 ${t?"text-white/80":"text-slate-500"}`,children:["West"===e&&"Phoenix west metro area","Central"===e&&"Phoenix central/north metro area","East"===e&&"Phoenix east metro area","Tucson"===e&&"Tucson metro area"]})]},e))})]}),m.jsx("div",{className:"lg:w-auto",children:m.jsx(f.z,{onClick:H,variant:"outline",className:"w-full lg:w-auto",children:"Reset Filters"})})]})})}),(0,m.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-6",children:[m.jsx("div",{className:"xl:col-span-3",children:m.jsx(g.Zb,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg",children:m.jsx(g.aY,{className:"p-0",children:m.jsx(sS,{territoryData:x,areaFilter:z})})})}),(0,m.jsxs)("div",{className:"xl:col-span-1 space-y-6",children:[m.jsx(a5,{}),I&&m.jsx(nc,{areaStats:I})]})]})]})}):"kmlScenario"===a?m.jsx(m.Fragment,{children:"miami"===e?m.jsx(rz,{areaFilter:R}):m.jsx(g.Zb,{className:"max-w-md mx-auto",children:(0,m.jsxs)(g.aY,{className:"p-6 text-center",children:[m.jsx(b,{className:"h-12 w-12 text-blue-500 mx-auto mb-4"}),m.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Miami Only"}),m.jsx("p",{className:"text-slate-600",children:"KML Boundary Scenario is only available for Miami, FL."})]})})}):"assignmentTool"===a?m.jsx(m.Fragment,{children:"miami"===e?(0,m.jsxs)(m.Fragment,{children:[m.jsx(nu,{className:"mb-4",areaFilter:R,onToggle:G,onReset:J}),m.jsx(rB,{areaFilter:R})]}):m.jsx(g.Zb,{className:"max-w-md mx-auto",children:(0,m.jsxs)(g.aY,{className:"p-6 text-center",children:[m.jsx(b,{className:"h-12 w-12 text-pink-500 mx-auto mb-4"}),m.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Miami Only"}),m.jsx("p",{className:"text-slate-600",children:"Miami Breakup Scenario II is only available for Miami, FL."})]})})}):"miamiFinal"===a?m.jsx(m.Fragment,{children:"miami"===e?(0,m.jsxs)(m.Fragment,{children:[m.jsx(nu,{className:"mb-4",areaFilter:R,onToggle:G,onReset:J}),m.jsx(rH,{areaFilter:R})]}):m.jsx(g.Zb,{className:"max-w-md mx-auto",children:(0,m.jsxs)(g.aY,{className:"p-6 text-center",children:[m.jsx(N,{className:"h-12 w-12 text-emerald-500 mx-auto mb-4"}),m.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Miami Only"}),m.jsx("p",{className:"text-slate-600",children:"Final Miami Territory Map is only available for Miami, FL."})]})})}):"miami10pct"===a?m.jsx(m.Fragment,{children:"miami"===e?(0,m.jsxs)(m.Fragment,{children:[m.jsx(nu,{className:"mb-4",areaFilter:R,onToggle:G,onReset:J}),m.jsx(rQ,{areaFilter:R})]}):m.jsx(g.Zb,{className:"max-w-md mx-auto",children:(0,m.jsxs)(g.aY,{className:"p-6 text-center",children:[m.jsx(C,{className:"h-12 w-12 text-indigo-500 mx-auto mb-4"}),m.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Miami Only"}),m.jsx("p",{className:"text-slate-600",children:"10% Reassignment Optimization is only available for Miami, FL."})]})})}):"miamiZipOptimized"===a?m.jsx(m.Fragment,{children:"miami"===e?(0,m.jsxs)(m.Fragment,{children:[m.jsx(nu,{className:"mb-4",areaFilter:R,onToggle:G,onReset:J}),m.jsx(r5,{areaFilter:R})]}):m.jsx(g.Zb,{className:"max-w-md mx-auto",children:(0,m.jsxs)(g.aY,{className:"p-6 text-center",children:[m.jsx(b,{className:"h-12 w-12 text-teal-500 mx-auto mb-4"}),m.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Miami Only"}),m.jsx("p",{className:"text-slate-600",children:"ZIP-Optimized Scenario is only available for Miami, FL."})]})})}):"miamiZipOptimized2"===a?m.jsx(m.Fragment,{children:"miami"===e?(0,m.jsxs)(m.Fragment,{children:[m.jsx(nu,{className:"mb-4",areaFilter:R,onToggle:G,onReset:J}),m.jsx(at,{areaFilter:R})]}):m.jsx(g.Zb,{className:"max-w-md mx-auto",children:(0,m.jsxs)(g.aY,{className:"p-6 text-center",children:[m.jsx(b,{className:"h-12 w-12 text-cyan-500 mx-auto mb-4"}),m.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Miami Only"}),m.jsx("p",{className:"text-slate-600",children:"ZIP-Optimized #2 Scenario is only available for Miami, FL."})]})})}):"radicalReroute"===a?m.jsx(m.Fragment,{children:"miami"===e?(0,m.jsxs)(m.Fragment,{children:[m.jsx(nu,{className:"mb-4",areaFilter:R,onToggle:G,onReset:J}),m.jsx(ao,{areaFilter:R})]}):m.jsx(g.Zb,{className:"max-w-md mx-auto",children:(0,m.jsxs)(g.aY,{className:"p-6 text-center",children:[m.jsx(w,{className:"h-12 w-12 text-purple-500 mx-auto mb-4"}),m.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Miami Only"}),m.jsx("p",{className:"text-slate-600",children:"Radical Reroute Scenario is only available for Miami, FL."})]})})}):"miamiCommercialRoutes"===a?m.jsx(m.Fragment,{children:"miami"===e?m.jsx(ax,{}):m.jsx(g.Zb,{className:"max-w-md mx-auto",children:(0,m.jsxs)(g.aY,{className:"p-6 text-center",children:[m.jsx(k,{className:"h-12 w-12 text-emerald-500 mx-auto mb-4"}),m.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Miami Only"}),m.jsx("p",{className:"text-slate-600",children:"Commercial Routes is only available for Miami, FL."})]})})}):"miamiFutureCommercialRoutes"===a?m.jsx(m.Fragment,{children:"miami"===e?m.jsx(ay,{}):m.jsx(g.Zb,{className:"max-w-md mx-auto",children:(0,m.jsxs)(g.aY,{className:"p-6 text-center",children:[m.jsx(k,{className:"h-12 w-12 text-amber-500 mx-auto mb-4"}),m.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Miami Only"}),m.jsx("p",{className:"text-slate-600",children:"Future Commercial Routes is only available for Miami, FL."})]})})}):"density"===a?(0,m.jsxs)(m.Fragment,{children:[m.jsx(aK,{densityMode:l,onDensityModeChange:i,showLifetime:"miami"===e||"dallas"===e||"orlando"===e||"jacksonville"===e,accountType:o,onAccountTypeChange:c,showAccountTypeToggle:"miami"===e||"dallas"===e||"orlando"===e||"jacksonville"===e}),"arizona"===e&&m.jsx(g.Zb,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg",children:m.jsx(g.aY,{className:"p-6",children:(0,m.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[(0,m.jsxs)("div",{className:"flex-1",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[m.jsx(O,{className:"h-4 w-4 text-slate-600"}),m.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Territory Filters"})]}),m.jsx("div",{className:"flex flex-wrap gap-3",children:Object.entries(z).map(([e,t])=>(0,m.jsxs)(j.C,{variant:t?"default":"outline",className:`cursor-pointer px-4 py-2 transition-all hover:shadow-md ${"West"===e&&t?"bg-blue-500 hover:bg-blue-600":"Central"===e&&t?"bg-green-500 hover:bg-green-600":"East"===e&&t?"bg-orange-500 hover:bg-orange-600":"Tucson"===e&&t?"bg-purple-500 hover:bg-purple-600":"hover:bg-slate-100"}`,onClick:()=>V(e),children:["West"===e&&"\uD83D\uDFE6","Central"===e&&"\uD83D\uDFE9","East"===e&&"\uD83D\uDFE7","Tucson"===e&&"\uD83D\uDFEA","Tucson"===e?"Tucson":`Phoenix ${e}`]},e))})]}),m.jsx("div",{className:"lg:w-auto",children:m.jsx(f.z,{onClick:H,variant:"outline",className:"w-full lg:w-auto",children:"Reset Filters"})})]})})}),(0,m.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-6",children:[m.jsx("div",{className:"xl:col-span-3",children:m.jsx(g.Zb,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg",children:m.jsx(g.aY,{className:"p-0",children:m.jsx(sM,{densityMode:l,areaFilter:z,location:e,accountType:o})})})}),m.jsx("div",{className:"xl:col-span-1 space-y-6",children:m.jsx(aQ,{mode:l,location:e,accountType:o})})]})]}):"market"===a?(0,m.jsxs)(m.Fragment,{children:[m.jsx(g.Zb,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg",children:m.jsx(g.aY,{className:"p-6",children:(0,m.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[(0,m.jsxs)("div",{className:"flex-1",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[m.jsx(O,{className:"h-4 w-4 text-slate-600"}),m.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Territory Filters"})]}),m.jsx("div",{className:"flex flex-wrap gap-3",children:Object.entries(z).map(([e,t])=>(0,m.jsxs)(j.C,{variant:t?"default":"outline",className:`cursor-pointer px-4 py-2 transition-all hover:shadow-md ${"West"===e&&t?"bg-blue-500 hover:bg-blue-600":"Central"===e&&t?"bg-green-500 hover:bg-green-600":"East"===e&&t?"bg-orange-500 hover:bg-orange-600":"Tucson"===e&&t?"bg-purple-500 hover:bg-purple-600":"hover:bg-slate-100"}`,onClick:()=>V(e),children:["West"===e&&"\uD83D\uDFE6","Central"===e&&"\uD83D\uDFE9","East"===e&&"\uD83D\uDFE7","Tucson"===e&&"\uD83D\uDFEA","Tucson"===e?"Tucson":`Phoenix ${e}`]},e))})]}),m.jsx("div",{className:"lg:w-auto",children:m.jsx(f.z,{onClick:H,variant:"outline",className:"w-full lg:w-auto",children:"Reset Filters"})})]})})}),(0,m.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-6",children:[m.jsx("div",{className:"xl:col-span-3",children:m.jsx(g.Zb,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg",children:m.jsx(g.aY,{className:"p-0",children:m.jsx(sO,{areaFilter:z})})})}),(0,m.jsxs)("div",{className:"xl:col-span-1 space-y-6",children:[m.jsx(a0,{}),m.jsx(a2,{areaFilter:z})]})]})]}):"revenue"===a?m.jsx(m.Fragment,{children:m.jsx(sB,{areaFilter:z,onToggleArea:V,onResetFilters:H})}):"employees"===a?m.jsx(m.Fragment,{children:m.jsx(g.Zb,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg h-[800px]",children:m.jsx(g.aY,{className:"p-0 h-full",children:m.jsx(s$,{})})})}):"commercial"===a?m.jsx(m.Fragment,{children:m.jsx(g.Zb,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg",children:(0,m.jsxs)(g.aY,{className:"p-6",children:[(0,m.jsxs)("div",{className:"mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Commercial Account Locations"}),m.jsx("p",{className:"text-slate-600",children:"Visualization of 73 commercial pool accounts across Arizona. Each account is shown as a marker color-coded by its assigned branch. Click any marker to view account details."})]}),(0,m.jsxs)("div",{className:"mb-4 p-4 bg-slate-50 rounded-lg",children:[m.jsx("h3",{className:"font-semibold text-slate-900 mb-3",children:"Legend"}),(0,m.jsxs)("div",{className:"space-y-3",children:[(0,m.jsxs)("div",{children:[m.jsx("p",{className:"text-sm font-medium text-slate-700 mb-2",children:"Account Markers (by Branch Assignment):"}),(0,m.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:"#9333ea",border:"2px solid white"}}),m.jsx("span",{children:"APS - Commercial (58.9% of accounts)"})]}),m.jsx("div",{className:"text-xs text-slate-600 ml-6 mt-1",children:"Commercial locations within the footprint of APS of Glendale and APS of Scottsdale"}),(0,m.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[m.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:"#f97316",border:"2px solid white"}}),m.jsx("span",{children:"APS of Chandler (38.4% of accounts)"})]}),(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:"#ec4899",border:"2px solid white"}}),m.jsx("span",{children:"APS of Tucson (2.7% of accounts)"})]})]})]}),(0,m.jsxs)("div",{className:"pt-2 border-t border-slate-200",children:[m.jsx("p",{className:"text-sm font-medium text-slate-700 mb-2",children:"Office Locations:"}),(0,m.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"text-blue-600 text-lg",children:""}),m.jsx("span",{children:"APS of Glendale"})]}),(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"text-green-600 text-lg",children:""}),m.jsx("span",{children:"APS of Scottsdale"})]}),(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"text-orange-600 text-lg",children:""}),m.jsx("span",{children:"APS of Chandler"})]}),(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"text-pink-600 text-lg",children:""}),m.jsx("span",{children:"APS of Tucson"})]})]})]})]})]}),m.jsx(sW,{areaFilter:{...z,Commercial:!0}}),(0,m.jsxs)("div",{className:"mt-6 p-6 bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg border border-purple-200",children:[m.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"\uD83D\uDCCA Commercial Account Distribution"}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,m.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,m.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-600"}),m.jsx("span",{className:"font-semibold text-slate-900",children:"APS - Commercial"})]}),m.jsx("p",{className:"text-3xl font-bold text-purple-600",children:"43"}),m.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"accounts (58.9%)"})]}),(0,m.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,m.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-600"}),m.jsx("span",{className:"font-semibold text-slate-900",children:"APS of Chandler"})]}),m.jsx("p",{className:"text-3xl font-bold text-orange-600",children:"28"}),m.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"accounts (38.4%)"})]}),(0,m.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,m.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-full bg-pink-600"}),m.jsx("span",{className:"font-semibold text-slate-900",children:"APS of Tucson"})]}),m.jsx("p",{className:"text-3xl font-bold text-pink-600",children:"2"}),m.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"accounts (2.7%)"})]})]}),m.jsx("div",{className:"mt-4 pt-4 border-t border-purple-200",children:(0,m.jsxs)("p",{className:"text-sm text-slate-700",children:[m.jsx("span",{className:"font-semibold",children:"Total Commercial Accounts:"})," 73 across all branches"]})})]})]})})}):"routes"===a?m.jsx(m.Fragment,{children:m.jsx(sX,{areaFilter:Object.keys(z).find(e=>!0===z[e])||"all",onAreaChange:X})}):"lookup"===a?m.jsx(m.Fragment,{children:m.jsx(s4,{})}):"ancillarySales"===a?m.jsx(m.Fragment,{children:m.jsx(rN,{})}):"jaxRevenue"===a?m.jsx(m.Fragment,{children:m.jsx(aL,{})}):"jaxCommercial"===a?m.jsx(m.Fragment,{children:m.jsx(aT,{})}):"jaxRoutes"===a?m.jsx(m.Fragment,{children:m.jsx(aI,{})}):"locRevenue"===a?m.jsx(m.Fragment,{children:m.jsx(aX,{location:e})}):"locCommercial"===a?m.jsx(m.Fragment,{children:m.jsx(a$,{location:e})}):"locRoutes"===a?m.jsx(m.Fragment,{children:m.jsx(aU,{location:e})}):null]})})})}var nf=s(31048);function nj({selectedLocation:e,onLocationChange:t}){return(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx(nf._,{htmlFor:"location-select",className:"text-sm font-medium whitespace-nowrap",children:"Location:"}),(0,m.jsxs)(sY.Ph,{value:e,onValueChange:t,children:[m.jsx(sY.i4,{id:"location-select",className:"w-[220px]",children:m.jsx(sY.ki,{placeholder:"Select location"})}),(0,m.jsxs)(sY.Bw,{children:[m.jsx(sY.Ql,{value:"arizona",children:"Phoenix / Tucson AZ"}),m.jsx(sY.Ql,{value:"dallas",children:"Dallas TX"}),m.jsx(sY.Ql,{value:"orlando",children:"Orlando FL"}),m.jsx(sY.Ql,{value:"jacksonville",children:"Jacksonville FL"}),m.jsx(sY.Ql,{value:"portCharlotte",children:"Port Charlotte FL"}),m.jsx(sY.Ql,{value:"miami",children:"Miami FL"})]})]})]})}var nv=s(58038),nb=s(8798);let ny=(0,v.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);function nN(){let{data:e}=(0,u.useSession)(),t=e?.user?.role,s=e?.user?.email,[r,a]=(0,h.useState)("arizona"),n="ADMIN"===t?{label:"Administrator",color:"bg-red-100 text-red-800",icon:nv.Z}:"LEVEL2"===t?{label:"Level 2",color:"bg-[#27add6]/20 text-[#1e759d]",icon:nb.Z}:{label:"Level 1",color:"bg-[#53bc53]/20 text-[#53bc53]",icon:sq.Z},l=n.icon;return(0,m.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-[#27add6]/10",children:[(0,m.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[m.jsx(g.Zb,{className:"mb-6 bg-white/80 backdrop-blur-sm border-0 shadow-lg",children:(0,m.jsxs)(g.aY,{className:"p-4 flex items-center justify-between",children:[(0,m.jsxs)("div",{className:"flex items-center gap-4",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx(l,{className:"h-5 w-5 text-slate-600"}),m.jsx("span",{className:"text-sm font-medium text-slate-700",children:s})]}),m.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${n.color}`,children:n.label})]}),(0,m.jsxs)("div",{className:"flex items-center gap-3",children:["ADMIN"===t&&m.jsx(p.default,{href:"/admin",children:(0,m.jsxs)(f.z,{variant:"outline",size:"sm",className:"gap-2 border-[#1e759d] text-[#1e759d] hover:bg-[#1e759d]/10",children:[m.jsx(nb.Z,{className:"h-4 w-4"}),"Manage Users"]})}),(0,m.jsxs)(f.z,{variant:"outline",size:"sm",onClick:()=>(0,u.signOut)({callbackUrl:"/login"}),className:"gap-2",children:[m.jsx(ny,{className:"h-4 w-4"}),"Sign Out"]})]})]})}),(0,m.jsxs)("header",{className:"text-center mb-8",children:[m.jsx("div",{className:"flex justify-center mb-4",children:m.jsx(x.default,{src:"/aps-logo-horizontal.png",alt:"Amenity Pool Services",width:350,height:100,priority:!0})}),m.jsx("h1",{className:"text-3xl font-bold text-[#1e759d] mb-3",children:"Data Visualization Tools"}),m.jsx("p",{className:"text-lg text-slate-600 mb-2",children:"Marketing, Routing, Account and Personnel Assignment Tools"}),(0,m.jsxs)("p",{className:"text-sm text-[#e54e4e] font-medium",children:["v0.71 | Questions ? contact ",m.jsx("a",{href:"mailto:sjohnson@amenitypool.com",className:"hover:underline",children:"sjohnson@amenitypool.com"})]})]}),m.jsx(g.Zb,{className:"mb-6 bg-gradient-to-r from-[#27add6]/10 to-[#1e759d]/10 border-[#27add6]/30 shadow-lg",children:m.jsx(g.aY,{className:"p-6",children:(0,m.jsxs)("div",{className:"flex items-start gap-4",children:[m.jsx("div",{className:"p-3 bg-[#1e759d] rounded-lg",children:m.jsx(y,{className:"h-6 w-6 text-white"})}),(0,m.jsxs)("div",{className:"flex-1",children:[m.jsx("h3",{className:"text-lg font-semibold text-[#1e759d] mb-3",children:"Select Location for Analysis"}),(0,m.jsxs)("div",{className:"flex items-center gap-3",children:[m.jsx(nj,{selectedLocation:r,onLocationChange:e=>a(e)}),m.jsx("p",{className:"text-sm text-slate-600",children:"Choose a location to view available data analysis tools below"})]})]})]})})}),m.jsx(ng,{location:r,onLocationChange:e=>a(e)})]}),m.jsx("footer",{className:"bg-[#1e759d] text-white py-8 mt-12",children:m.jsx("div",{className:"max-w-7xl mx-auto px-4",children:(0,m.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[(0,m.jsxs)("div",{className:"flex items-center gap-4",children:[m.jsx(x.default,{src:"/aps-logo-stacked.png",alt:"Amenity Pool Services",width:100,height:100,className:"bg-white rounded-lg p-2"}),(0,m.jsxs)("div",{children:[m.jsx("p",{className:"text-[#ffdb43] font-semibold",children:"Amenity Pool Services"}),m.jsx("p",{className:"text-sm text-white/80",children:"Data Visualization Tools"})]})]}),(0,m.jsxs)("div",{className:"text-center md:text-right",children:[(0,m.jsxs)("p",{className:"text-sm text-white/80",children:["\xa9 ",new Date().getFullYear()," Amenity Pool Services. All rights reserved."]}),m.jsx("p",{className:"text-xs text-white/60 mt-1",children:"Internal use only"})]})]})})})]})}},78143:(e,t,s)=>{"use strict";s.d(t,{Providers:()=>n});var r=s(10326),a=s(77109);function n({children:e}){return r.jsx(a.SessionProvider,{children:e})}},15813:(e,t,s)=>{"use strict";s.d(t,{ThemeProvider:()=>n});var r=s(10326);s(17577);var a=s(14831);function n({children:e,...t}){return r.jsx(a.f,{...t,children:e})}},567:(e,t,s)=>{"use strict";s.d(t,{C:()=>i});var r=s(10326);s(17577);var a=s(28671),n=s(77863);let l=(0,a.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i({className:e,variant:t,...s}){return r.jsx("div",{className:(0,n.cn)(l({variant:t}),e),...s})}},90772:(e,t,s)=>{"use strict";s.d(t,{z:()=>c});var r=s(10326),a=s(17577),n=s(34214),l=s(28671),i=s(77863);let o=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef(({className:e,variant:t,size:s,asChild:a=!1,...l},c)=>{let d=a?n.g7:"button";return r.jsx(d,{className:(0,i.cn)(o({variant:t,size:s,className:e})),ref:c,...l})});c.displayName="Button"},33071:(e,t,s)=>{"use strict";s.d(t,{Ol:()=>i,SZ:()=>c,Zb:()=>l,aY:()=>d,eW:()=>m,ll:()=>o});var r=s(10326),a=s(17577),n=s(77863);let l=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));l.displayName="Card";let i=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));i.displayName="CardHeader";let o=a.forwardRef(({className:e,...t},s)=>r.jsx("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));o.displayName="CardTitle";let c=a.forwardRef(({className:e,...t},s)=>r.jsx("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));c.displayName="CardDescription";let d=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,n.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent";let m=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t}));m.displayName="CardFooter"},54432:(e,t,s)=>{"use strict";s.d(t,{I:()=>l});var r=s(10326),a=s(17577),n=s(77863);let l=a.forwardRef(({className:e,type:t,...s},a)=>r.jsx("input",{type:t,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));l.displayName="Input"},31048:(e,t,s)=>{"use strict";s.d(t,{_:()=>c});var r=s(10326),a=s(17577),n=s(34478),l=s(28671),i=s(77863);let o=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef(({className:e,...t},s)=>r.jsx(n.f,{ref:s,className:(0,i.cn)(o(),e),...t}));c.displayName=n.f.displayName},34474:(e,t,s)=>{"use strict";s.d(t,{Bw:()=>x,Ph:()=>d,Ql:()=>g,i4:()=>h,ki:()=>m});var r=s(10326),a=s(17577),n=s(95448),l=s(941),i=s(96633),o=s(32933),c=s(77863);let d=n.fC;n.ZA;let m=n.B4,h=a.forwardRef(({className:e,children:t,...s},a)=>(0,r.jsxs)(n.xz,{ref:a,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...s,children:[t,r.jsx(n.JO,{asChild:!0,children:r.jsx(l.Z,{className:"h-4 w-4 opacity-50"})})]}));h.displayName=n.xz.displayName;let u=a.forwardRef(({className:e,...t},s)=>r.jsx(n.u_,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(i.Z,{className:"h-4 w-4"})}));u.displayName=n.u_.displayName;let p=a.forwardRef(({className:e,...t},s)=>r.jsx(n.$G,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(l.Z,{className:"h-4 w-4"})}));p.displayName=n.$G.displayName;let x=a.forwardRef(({className:e,children:t,position:s="popper",...a},l)=>r.jsx(n.h_,{children:(0,r.jsxs)(n.VY,{ref:l,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...a,children:[r.jsx(u,{}),r.jsx(n.l_,{className:(0,c.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),r.jsx(p,{})]})}));x.displayName=n.VY.displayName,a.forwardRef(({className:e,...t},s)=>r.jsx(n.__,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=n.__.displayName;let g=a.forwardRef(({className:e,children:t,...s},a)=>(0,r.jsxs)(n.ck,{ref:a,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(n.wU,{children:r.jsx(o.Z,{className:"h-4 w-4"})})}),r.jsx(n.eT,{children:t})]}));g.displayName=n.ck.displayName,a.forwardRef(({className:e,...t},s)=>r.jsx(n.Z0,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=n.Z0.displayName},15940:(e,t,s)=>{"use strict";s.d(t,{RM:()=>o,SC:()=>c,iA:()=>l,pj:()=>m,ss:()=>d,xD:()=>i});var r=s(10326),a=s(17577),n=s(77863);let l=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:s,className:(0,n.cn)("w-full caption-bottom text-sm",e),...t})}));l.displayName="Table";let i=a.forwardRef(({className:e,...t},s)=>r.jsx("thead",{ref:s,className:(0,n.cn)("[&_tr]:border-b",e),...t}));i.displayName="TableHeader";let o=a.forwardRef(({className:e,...t},s)=>r.jsx("tbody",{ref:s,className:(0,n.cn)("[&_tr:last-child]:border-0",e),...t}));o.displayName="TableBody",a.forwardRef(({className:e,...t},s)=>r.jsx("tfoot",{ref:s,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let c=a.forwardRef(({className:e,...t},s)=>r.jsx("tr",{ref:s,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));c.displayName="TableRow";let d=a.forwardRef(({className:e,...t},s)=>r.jsx("th",{ref:s,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));d.displayName="TableHead";let m=a.forwardRef(({className:e,...t},s)=>r.jsx("td",{ref:s,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));m.displayName="TableCell",a.forwardRef(({className:e,...t},s)=>r.jsx("caption",{ref:s,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption"},77863:(e,t,s)=>{"use strict";s.d(t,{G:()=>l,cn:()=>n});var r=s(41135),a=s(31009);function n(...e){return(0,a.m6)((0,r.W)(e))}function l(e){return({West:"APS of Glendale",Central:"APS of Scottsdale",East:"APS of Chandler",Tucson:"APS of Tucson",Commercial:"APS - Commercial",Mesa:"APS of Mesa",Goodyear:"APS of Goodyear","Cave Creek":"APS of Cave Creek"})[e]||e}},37462:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m,dynamic:()=>c,metadata:()=>d});var r=s(19510),a=s(85384),n=s.n(a);s(67272);var l=s(68570);let i=(0,l.createProxy)(String.raw`/data/projects/ac_maps/phoenix_territory_map/nextjs_space/components/theme-provider.tsx#ThemeProvider`),o=(0,l.createProxy)(String.raw`/data/projects/ac_maps/phoenix_territory_map/nextjs_space/app/providers.tsx#Providers`),c="force-dynamic",d={metadataBase:new URL(process.env.NEXTAUTH_URL||"http://localhost:3000"),title:"Amenity Pool Services - Arizona Reorganization",description:"Marketing, Routing, Account and Personnel Assignment Tools for branch territory reorganization across Phoenix and Tucson.",icons:{icon:"/favicon.svg"},openGraph:{title:"Amenity Pool Services - Arizona Reorganization",description:"Marketing, Routing, Account and Personnel Assignment Tools for branch territory reorganization across Phoenix and Tucson.",images:["/og-image.png"]}};function m({children:e}){return r.jsx("html",{lang:"en",suppressHydrationWarning:!0,children:r.jsx("body",{className:n().className,suppressHydrationWarning:!0,children:r.jsx(i,{attribute:"class",defaultTheme:"light",enableSystem:!0,disableTransitionOnChange:!0,children:r.jsx(o,{children:e})})})})}},90908:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(68570).createProxy)(String.raw`/data/projects/ac_maps/phoenix_territory_map/nextjs_space/app/page.tsx#default`)},67272:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[276,263,713,226,611],()=>s(927));module.exports=r})();