(()=>{var e={};e.id=3,e.ids=[3],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16577:(e,r,a)=>{"use strict";a.r(r),a.d(r,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>o}),a(66136),a(37462),a(35866);var s=a(23191),t=a(88716),i=a(37922),n=a.n(i),d=a(95231),l={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);a.d(r,l);let o=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,66136)),"/data/projects/ac_maps/phoenix_territory_map/nextjs_space/app/admin/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,37462)),"/data/projects/ac_maps/phoenix_territory_map/nextjs_space/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/data/projects/ac_maps/phoenix_territory_map/nextjs_space/app/admin/page.tsx"],m="/admin/page",u={require:a,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},54816:(e,r,a)=>{Promise.resolve().then(a.bind(a,56883))},57786:(e,r,a)=>{Promise.resolve().then(a.bind(a,78143)),Promise.resolve().then(a.bind(a,15813))},74820:(e,r,a)=>{Promise.resolve().then(a.t.bind(a,12994,23)),Promise.resolve().then(a.t.bind(a,96114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,79671,23)),Promise.resolve().then(a.t.bind(a,41868,23)),Promise.resolve().then(a.t.bind(a,84759,23))},56883:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>S});var s=a(10326),t=a(77109),i=a(35047),n=a(17577),d=a(90772),l=a(33071),o=a(54432),c=a(31048),m=a(34474),u=a(43273),p=a(77863);let f=n.forwardRef(({className:e,...r},a)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:a,className:(0,p.cn)("w-full caption-bottom text-sm",e),...r})}));f.displayName="Table";let x=n.forwardRef(({className:e,...r},a)=>s.jsx("thead",{ref:a,className:(0,p.cn)("[&_tr]:border-b",e),...r}));x.displayName="TableHeader";let h=n.forwardRef(({className:e,...r},a)=>s.jsx("tbody",{ref:a,className:(0,p.cn)("[&_tr:last-child]:border-0",e),...r}));h.displayName="TableBody",n.forwardRef(({className:e,...r},a)=>s.jsx("tfoot",{ref:a,className:(0,p.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...r})).displayName="TableFooter";let g=n.forwardRef(({className:e,...r},a)=>s.jsx("tr",{ref:a,className:(0,p.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...r}));g.displayName="TableRow";let b=n.forwardRef(({className:e,...r},a)=>s.jsx("th",{ref:a,className:(0,p.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...r}));b.displayName="TableHead";let v=n.forwardRef(({className:e,...r},a)=>s.jsx("td",{ref:a,className:(0,p.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...r}));v.displayName="TableCell",n.forwardRef(({className:e,...r},a)=>s.jsx("caption",{ref:a,className:(0,p.cn)("mt-4 text-sm text-muted-foreground",e),...r})).displayName="TableCaption";let j=(0,a(28671).j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function y({className:e,variant:r,...a}){return s.jsx("div",{className:(0,p.cn)(j({variant:r}),e),...a})}var N=a(58038),w=a(8798),_=a(79635),R=a(77506),P=a(62881);let k=(0,P.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),A=(0,P.Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var Z=a(66307),T=a(90434);function S(){let{data:e,status:r}=(0,t.useSession)();(0,i.useRouter)();let[a,p]=(0,n.useState)([]),[j,P]=(0,n.useState)(!0),[S,C]=(0,n.useState)(!1),[L,z]=(0,n.useState)(""),[E,U]=(0,n.useState)(""),[V,M]=(0,n.useState)(""),[q,F]=(0,n.useState)("LEVEL1"),D=async()=>{try{let e=await fetch("/api/admin/users");if(e.ok){let r=await e.json();p(r.users)}}catch(e){console.error("Failed to load users:",e)}finally{P(!1)}},H=async e=>{e.preventDefault(),z(""),U(""),C(!0);try{let e=await fetch("/api/admin/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:V.toLowerCase(),role:q})}),r=await e.json();e.ok?(U(`User ${V} added successfully!`),M(""),F("LEVEL1"),D()):z(r.error||"Failed to add user")}catch(e){z("An unexpected error occurred")}finally{C(!1)}},O=e=>"ADMIN"===e?{label:"Administrator",color:"bg-red-100 text-red-800",icon:N.Z}:"LEVEL2"===e?{label:"Level 2",color:"bg-blue-100 text-blue-800",icon:w.Z}:{label:"Level 1",color:"bg-green-100 text-green-800",icon:_.Z};return j||"loading"===r?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-blue-50",children:s.jsx(R.Z,{className:"h-8 w-8 animate-spin text-blue-600"})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-4",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto py-8",children:[s.jsx("div",{className:"mb-6",children:s.jsx(T.default,{href:"/",children:(0,s.jsxs)(d.z,{variant:"outline",size:"sm",className:"gap-2",children:[s.jsx(k,{className:"h-4 w-4"}),"Back to Dashboard"]})})}),(0,s.jsxs)("div",{className:"grid gap-6",children:[(0,s.jsxs)(l.Zb,{children:[(0,s.jsxs)(l.Ol,{children:[(0,s.jsxs)(l.ll,{className:"flex items-center gap-2",children:[s.jsx(A,{className:"h-5 w-5"}),"Add New User"]}),s.jsx(l.SZ,{children:"Pre-provision a new user account. They will need to register their password."})]}),s.jsx(l.aY,{children:(0,s.jsxs)("form",{onSubmit:H,className:"space-y-4",children:[L&&s.jsx(u.bZ,{variant:"destructive",children:s.jsx(u.X,{children:L})}),E&&(0,s.jsxs)(u.bZ,{className:"bg-green-50 text-green-900 border-green-200",children:[s.jsx(Z.Z,{className:"h-4 w-4"}),s.jsx(u.X,{children:E})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{htmlFor:"email",children:"Email Address"}),s.jsx(o.I,{id:"email",type:"email",placeholder:"user@amenitypool.com",value:V,onChange:e=>M(e.target.value),required:!0,disabled:S})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{htmlFor:"role",children:"User Role"}),(0,s.jsxs)(m.Ph,{value:q,onValueChange:F,disabled:S,children:[s.jsx(m.i4,{id:"role",children:s.jsx(m.ki,{})}),(0,s.jsxs)(m.Bw,{children:[s.jsx(m.Ql,{value:"LEVEL1",children:"Level 1 (Standard Access)"}),s.jsx(m.Ql,{value:"LEVEL2",children:"Level 2 (Employee Locations Access)"}),s.jsx(m.Ql,{value:"ADMIN",children:"Administrator (Full Access)"})]})]})]})]}),s.jsx(d.z,{type:"submit",disabled:S,className:"w-full md:w-auto",children:S?(0,s.jsxs)(s.Fragment,{children:[s.jsx(R.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Adding User..."]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(A,{className:"mr-2 h-4 w-4"}),"Add User"]})})]})})]}),(0,s.jsxs)(l.Zb,{children:[(0,s.jsxs)(l.Ol,{children:[(0,s.jsxs)(l.ll,{children:["All Users (",a.length,")"]}),s.jsx(l.SZ,{children:"List of all provisioned users and their registration status"})]}),s.jsx(l.aY,{children:s.jsx("div",{className:"rounded-md border",children:(0,s.jsxs)(f,{children:[s.jsx(x,{children:(0,s.jsxs)(g,{children:[s.jsx(b,{children:"Email"}),s.jsx(b,{children:"Role"}),s.jsx(b,{children:"Status"}),s.jsx(b,{children:"Created"})]})}),s.jsx(h,{children:a.map(e=>{let r=O(e.role),a=r.icon;return(0,s.jsxs)(g,{children:[s.jsx(v,{className:"font-medium",children:e.email}),s.jsx(v,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(a,{className:"h-4 w-4"}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${r.color}`,children:r.label})]})}),s.jsx(v,{children:e.hasRegistered?s.jsx(y,{variant:"default",className:"bg-green-100 text-green-800",children:"Registered"}):s.jsx(y,{variant:"outline",className:"border-amber-300 text-amber-800",children:"Pending"})}),s.jsx(v,{className:"text-muted-foreground",children:new Date(e.createdAt).toLocaleDateString()})]},e.id)})})]})})})]})]})]})})}},78143:(e,r,a)=>{"use strict";a.d(r,{Providers:()=>i});var s=a(10326),t=a(77109);function i({children:e}){return s.jsx(t.SessionProvider,{children:e})}},15813:(e,r,a)=>{"use strict";a.d(r,{ThemeProvider:()=>i});var s=a(10326);a(17577);var t=a(14831);function i({children:e,...r}){return s.jsx(t.f,{...r,children:e})}},43273:(e,r,a)=>{"use strict";a.d(r,{X:()=>o,bZ:()=>l});var s=a(10326),t=a(17577),i=a(28671),n=a(77863);let d=(0,i.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),l=t.forwardRef(({className:e,variant:r,...a},t)=>s.jsx("div",{ref:t,role:"alert",className:(0,n.cn)(d({variant:r}),e),...a}));l.displayName="Alert",t.forwardRef(({className:e,...r},a)=>s.jsx("h5",{ref:a,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",e),...r})).displayName="AlertTitle";let o=t.forwardRef(({className:e,...r},a)=>s.jsx("div",{ref:a,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",e),...r}));o.displayName="AlertDescription"},90772:(e,r,a)=>{"use strict";a.d(r,{z:()=>o});var s=a(10326),t=a(17577),i=a(34214),n=a(28671),d=a(77863);let l=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=t.forwardRef(({className:e,variant:r,size:a,asChild:t=!1,...n},o)=>{let c=t?i.g7:"button";return s.jsx(c,{className:(0,d.cn)(l({variant:r,size:a,className:e})),ref:o,...n})});o.displayName="Button"},33071:(e,r,a)=>{"use strict";a.d(r,{Ol:()=>d,SZ:()=>o,Zb:()=>n,aY:()=>c,eW:()=>m,ll:()=>l});var s=a(10326),t=a(17577),i=a(77863);let n=t.forwardRef(({className:e,...r},a)=>s.jsx("div",{ref:a,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));n.displayName="Card";let d=t.forwardRef(({className:e,...r},a)=>s.jsx("div",{ref:a,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...r}));d.displayName="CardHeader";let l=t.forwardRef(({className:e,...r},a)=>s.jsx("h3",{ref:a,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));l.displayName="CardTitle";let o=t.forwardRef(({className:e,...r},a)=>s.jsx("p",{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",e),...r}));o.displayName="CardDescription";let c=t.forwardRef(({className:e,...r},a)=>s.jsx("div",{ref:a,className:(0,i.cn)("p-6 pt-0",e),...r}));c.displayName="CardContent";let m=t.forwardRef(({className:e,...r},a)=>s.jsx("div",{ref:a,className:(0,i.cn)("flex items-center p-6 pt-0",e),...r}));m.displayName="CardFooter"},54432:(e,r,a)=>{"use strict";a.d(r,{I:()=>n});var s=a(10326),t=a(17577),i=a(77863);let n=t.forwardRef(({className:e,type:r,...a},t)=>s.jsx("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...a}));n.displayName="Input"},31048:(e,r,a)=>{"use strict";a.d(r,{_:()=>o});var s=a(10326),t=a(17577),i=a(34478),n=a(28671),d=a(77863);let l=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=t.forwardRef(({className:e,...r},a)=>s.jsx(i.f,{ref:a,className:(0,d.cn)(l(),e),...r}));o.displayName=i.f.displayName},34474:(e,r,a)=>{"use strict";a.d(r,{Bw:()=>x,Ph:()=>c,Ql:()=>h,i4:()=>u,ki:()=>m});var s=a(10326),t=a(17577),i=a(65817),n=a(941),d=a(96633),l=a(32933),o=a(77863);let c=i.fC;i.ZA;let m=i.B4,u=t.forwardRef(({className:e,children:r,...a},t)=>(0,s.jsxs)(i.xz,{ref:t,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[r,s.jsx(i.JO,{asChild:!0,children:s.jsx(n.Z,{className:"h-4 w-4 opacity-50"})})]}));u.displayName=i.xz.displayName;let p=t.forwardRef(({className:e,...r},a)=>s.jsx(i.u_,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...r,children:s.jsx(d.Z,{className:"h-4 w-4"})}));p.displayName=i.u_.displayName;let f=t.forwardRef(({className:e,...r},a)=>s.jsx(i.$G,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...r,children:s.jsx(n.Z,{className:"h-4 w-4"})}));f.displayName=i.$G.displayName;let x=t.forwardRef(({className:e,children:r,position:a="popper",...t},n)=>s.jsx(i.h_,{children:(0,s.jsxs)(i.VY,{ref:n,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...t,children:[s.jsx(p,{}),s.jsx(i.l_,{className:(0,o.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),s.jsx(f,{})]})}));x.displayName=i.VY.displayName,t.forwardRef(({className:e,...r},a)=>s.jsx(i.__,{ref:a,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...r})).displayName=i.__.displayName;let h=t.forwardRef(({className:e,children:r,...a},t)=>(0,s.jsxs)(i.ck,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(i.wU,{children:s.jsx(l.Z,{className:"h-4 w-4"})})}),s.jsx(i.eT,{children:r})]}));h.displayName=i.ck.displayName,t.forwardRef(({className:e,...r},a)=>s.jsx(i.Z0,{ref:a,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",e),...r})).displayName=i.Z0.displayName},77863:(e,r,a)=>{"use strict";a.d(r,{cn:()=>i});var s=a(41135),t=a(31009);function i(...e){return(0,t.m6)((0,s.W)(e))}},66307:(e,r,a)=>{"use strict";a.d(r,{Z:()=>s});let s=(0,a(62881).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},77506:(e,r,a)=>{"use strict";a.d(r,{Z:()=>s});let s=(0,a(62881).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},35047:(e,r,a)=>{"use strict";var s=a(77389);a.o(s,"useRouter")&&a.d(r,{useRouter:function(){return s.useRouter}})},66136:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>s});let s=(0,a(68570).createProxy)(String.raw`/data/projects/ac_maps/phoenix_territory_map/nextjs_space/app/admin/page.tsx#default`)},37462:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>m,dynamic:()=>o,metadata:()=>c});var s=a(19510),t=a(85384),i=a.n(t);a(67272);var n=a(68570);let d=(0,n.createProxy)(String.raw`/data/projects/ac_maps/phoenix_territory_map/nextjs_space/components/theme-provider.tsx#ThemeProvider`),l=(0,n.createProxy)(String.raw`/data/projects/ac_maps/phoenix_territory_map/nextjs_space/app/providers.tsx#Providers`),o="force-dynamic",c={metadataBase:new URL(process.env.NEXTAUTH_URL||"http://localhost:3000"),title:"Amenity Pool Services - Arizona Reorganization",description:"Marketing, Routing, Account and Personnel Assignment Tools for branch territory reorganization across Phoenix and Tucson.",icons:{icon:"/favicon.svg"},openGraph:{title:"Amenity Pool Services - Arizona Reorganization",description:"Marketing, Routing, Account and Personnel Assignment Tools for branch territory reorganization across Phoenix and Tucson.",images:["/og-image.png"]}};function m({children:e}){return s.jsx("html",{lang:"en",suppressHydrationWarning:!0,children:s.jsx("body",{className:i().className,suppressHydrationWarning:!0,children:s.jsx(d,{attribute:"class",defaultTheme:"light",enableSystem:!0,disableTransitionOnChange:!0,children:s.jsx(l,{children:e})})})})}},67272:()=>{}};var r=require("../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),s=r.X(0,[276,263,876,421],()=>a(16577));module.exports=s})();